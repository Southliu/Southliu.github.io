import{c as E,f as F,b as M,e as j,g as G}from"./@babel_runtime@7.20.1-c09c1810.js";import{r}from"./react@18.2.0-693b9b6f.js";import{r as Q}from"./react-dom@18.2.0_react@18.2.0-82c339a3.js";import{a as q}from"./rc-motion@2.6.2_biqbaboplfbrettd7655fr4n2y-d68d6615.js";import{c as L}from"./classnames@2.3.2-d75d9a59.js";import{b as W,j as I,F as z}from"./@ant-design_cssinjs@1.0.2_biqbaboplfbrettd7655fr4n2y-8bfcb13e.js";var B=r.exports.forwardRef(function(e,y){var C=e.prefixCls,s=e.style,v=e.className,u=e.duration,l=u===void 0?4.5:u,N=e.eventKey,R=e.content,g=e.closable,$=e.closeIcon,h=$===void 0?"x":$,k=e.props,S=e.onClick,m=e.onNoticeClose,b=r.exports.useState(!1),_=E(b,2),f=_[0],x=_[1],p=function(){m(N)};r.exports.useEffect(function(){if(!f&&l>0){var c=setTimeout(function(){p()},l*1e3);return function(){clearTimeout(c)}}},[l,f]);var d="".concat(C,"-notice");return W("div",{...k,ref:y,className:L(d,v,F({},"".concat(d,"-closable"),g)),style:s,onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)},onClick:S,children:[I("div",{className:"".concat(d,"-content"),children:R}),g&&I("a",{tabIndex:0,className:"".concat(d,"-close"),onClick:function(t){t.preventDefault(),t.stopPropagation(),p()},children:h})]})});const J=B;var U=r.exports.forwardRef(function(e,y){var C=e.prefixCls,s=C===void 0?"rc-notification":C,v=e.container,u=e.motion,l=e.maxCount,N=e.className,R=e.style,g=e.onAllRemoved,$=r.exports.useState([]),h=E($,2),k=h[0],S=h[1],m=function(n){var i,o=k.find(function(a){return a.key===n});o==null||(i=o.onClose)===null||i===void 0||i.call(o),S(function(a){return a.filter(function(A){return A.key!==n})})};r.exports.useImperativeHandle(y,function(){return{open:function(n){S(function(i){var o=M(i),a=o.findIndex(function(A){return A.key===n.key});return a>=0?o[a]=n:o.push(n),l>0&&o.length>l&&(o=o.slice(-l)),o})},close:function(n){m(n)},destroy:function(){S([])}}});var b=r.exports.useState({}),_=E(b,2),f=_[0],x=_[1];r.exports.useEffect(function(){var t={};k.forEach(function(n){var i=n.placement,o=i===void 0?"topRight":i;o&&(t[o]=t[o]||[],t[o].push(n))}),Object.keys(f).forEach(function(n){t[n]=t[n]||[]}),x(t)},[k]);var p=function(n){x(function(i){var o=j({},i),a=o[n]||[];return a.length||delete o[n],o})},d=r.exports.useRef(!1);if(r.exports.useEffect(function(){Object.keys(f).length>0?d.current=!0:d.current&&(g==null||g(),d.current=!1)},[f]),!v)return null;var c=Object.keys(f);return Q.exports.createPortal(I(z,{children:c.map(function(t){var n=f[t],i=n.map(function(a){return{config:a,key:a.key}}),o=typeof u=="function"?u(t):u;return I(q,{className:L(s,"".concat(s,"-").concat(t),N==null?void 0:N(t)),style:R==null?void 0:R(t),keys:i,motionAppear:!0,...o,onAllRemoved:function(){p(t)},children:function(a,A){var P=a.config,O=a.className,T=a.style,w=P.key,H=P.className,D=P.style;return r.exports.createElement(J,{...P,ref:A,prefixCls:s,className:L(O,H),style:j(j({},T),D),key:w,eventKey:w,onNoticeClose:m})}},t)})}),v)}),V=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],X=function(){return document.body},K=0;function Y(){for(var e={},y=arguments.length,C=new Array(y),s=0;s<y;s++)C[s]=arguments[s];return C.forEach(function(v){v&&Object.keys(v).forEach(function(u){var l=v[u];l!==void 0&&(e[u]=l)})}),e}function ae(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=e.getContainer,C=y===void 0?X:y,s=e.motion,v=e.prefixCls,u=e.maxCount,l=e.className,N=e.style,R=e.onAllRemoved,g=G(e,V),$=r.exports.useState(),h=E($,2),k=h[0],S=h[1],m=r.exports.useRef(),b=I(U,{container:k,ref:m,prefixCls:v,motion:s,maxCount:u,className:l,style:N,onAllRemoved:R}),_=r.exports.useState([]),f=E(_,2),x=f[0],p=f[1],d=r.exports.useMemo(function(){return{open:function(t){var n=Y(g,t);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(K),K+=1),p(function(i){return[].concat(M(i),[{type:"open",config:n}])})},close:function(t){p(function(n){return[].concat(M(n),[{type:"close",key:t}])})},destroy:function(){p(function(t){return[].concat(M(t),[{type:"destroy"}])})}}},[]);return r.exports.useEffect(function(){S(C())}),r.exports.useEffect(function(){m.current&&x.length&&(x.forEach(function(c){switch(c.type){case"open":m.current.open(c.config);break;case"close":m.current.close(c.key);break;case"destroy":m.current.destroy();break}}),p([]))},[x]),[d,b]}export{J as N,ae as u};
