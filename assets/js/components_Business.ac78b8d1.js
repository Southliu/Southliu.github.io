import{a as d}from"./components_Form.2b8ebf99.js";import{j as u}from"./react.e58b2294.js";import{a as g}from"./axios.a6d91ec4.js";import{a as p,U as P}from"./crypto-js.026ee2b2.js";import{m as E}from"./antd.a9b3ffac.js";import{A,a as I}from"./components_Selects.873875ea.js";const H="后台管理系统",m="admin_token",K="-",T="__Vite_Admin_Secret__",Q="theme_key",L="请输入",b="请选择",V="responsive",X=[{required:!0,message:L}],Z=[{required:!0,message:b}],k="https://www.fastmock.site/mock/bdd0efa89c5ddba1b003043010702b77/v1",W=`${k}/authority/file/upload-file`,tt="新增",et=(t,e)=>`编辑${e??""}${t?`(${t})`:""}`,nt={pattern:/^(?=.*\d)(?=.*[a-zA-Z])[\da-zA-Z~!@#$%^&*+\.\_\-*]{6,30}$/,message:"密码为6-30位必须包含字母和数字!"};function y(t,e=T){const n=JSON.stringify(t);return p.encrypt(n,e).toString()}function v(t,e=T){const o=p.decrypt(t,e).toString(P);return o?JSON.parse(o):null}const U=60*60*24*2;function x(t,e,n=U){const o=n!==null?new Date().getTime()+n*1e3:null,r=y({value:e,expire:o});localStorage.setItem(t,r)}function D(t){const e=localStorage.getItem(t);if(e){let n=null;try{n=v(e)}catch{E.error({content:"数据解密失败",key:"decryption"})}if(n){const{value:o,expire:s}=n;if(s===null||s>=Date.now())return o}return S(t),null}return null}function S(t){localStorage.removeItem(t)}function j(){return[()=>D(m)||"",o=>{x(m,o)},()=>{S(m)}]}const C="https://www.fastmock.site/mock/bdd0efa89c5ddba1b003043010702b77/v1",i=[],R=g.CancelToken,$=R.source(),l=g.create({baseURL:C,timeout:180*1e3}),c=(t,e)=>{console.error("错误信息:",t),E.error({content:e||t||"服务器错误",key:"error"})};l.interceptors.request.use(t=>{const[e]=j(),n=e()||"";t!=null&&t.headers&&n&&(t.headers.Authorization=`Bearer ${n}`);const o=JSON.stringify(t.url)+JSON.stringify(t.data)+"&"+t.method;return i.includes(o)?$.cancel():i.push(o),t},t=>(c(t,"服务器错误"),Promise.reject(t)));l.interceptors.response.use(t=>{const e=t.data,n=JSON.stringify(t.config.url)+JSON.stringify(t.config.data)+"&"+t.config.method,o=i.findIndex(s=>s===n);return i.splice(o,1),(e==null?void 0:e.code)===0?(c(e==null?void 0:e.message,"权限不足，请重新登录"),Promise.reject(t)):(e==null?void 0:e.code)===601||(e==null?void 0:e.code)!==200?(c(e==null?void 0:e.message),Promise.reject(t)):Promise.resolve(t)},t=>(i.length=0,c(t,"服务器错误"),Promise.reject(t)));function ot(t){return`${t}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function rt(t,e){for(let n=0;n<(e==null?void 0:e.length);n++)if(e[n].value===t)return e[n].label;return""}function st(t,e){var s;if(!t||!e)return"";(t==null?void 0:t[0])==="?"&&(t=t.substring(1,t.length));const n=t.split("&"),o=[];for(let r=0;r<n.length;r++){const a=(s=n[r])==null?void 0:s.split("=");(a==null?void 0:a.length)===2&&o.push([a[0],a[1]])}for(let r=0;r<o.length;r++)if(o[r][0]===e)return o[r][1];return""}function _(t,e){if(t.length===0)return[];const n=[];for(let o=0;o<t.length;o++){const s=t[o],r=e(s),a=s.children?_(s.children,e):void 0;n.push({...r,children:a})}return n}function w(t){return new Promise((e,n)=>{l.get("/authority/common/games",{params:t}).then(o=>{var r;const s=_((r=o==null?void 0:o.data)==null?void 0:r.data,a=>{const{id:f,name:h}=a;return{value:f,label:`${f}:${h}`}});e(s)}).catch(()=>n([]))})}function F(t){return u.jsx(u.Fragment,{children:u.jsx(A,{...t,multiple:!0,api:w})})}function N(t){return new Promise((e,n)=>{l.get("/platform/partner",{params:t}).then(o=>{var r;const s=[];(r=o==null?void 0:o.data)==null||r.data.forEach(a=>{s.push({label:a.name,value:a.id})}),e(s)}).catch(()=>n([]))})}function O(t){return u.jsx(I,{...t,api:N,mode:"multiple"})}function at(){d("GameSelect",F),d("PartnerSelect",O)}export{tt as A,at as C,K as E,W as F,X as I,V as M,L as P,Z as S,Q as T,ot as a,b,H as c,et as d,nt as e,st as g,l as r,j as u,rt as v};
