import{r as e,j as l}from"./react@18.2.0.CwGjMYfB.js";import{h as a,b as s,c as i}from"./componentMap.B2MeWIJE.js";import{u as t}from"./react-i18next@14.1.1_i18next@23.11.4_react-dom@18.2.0_react@18.2.0.CoFanrD1.js";import{F as n,B as r,f as d,e as o}from"./antd@5.20.2_react-dom@18.2.0_react@18.2.0.DxyHYYAl.js";import{l as c,m,n as h}from"./@ant-design_icons@5.3.7_react-dom@18.2.0_react@18.2.0.1hpSyJyf.js";const p=e.forwardRef(((p,u)=>{var f;const{list:x,data:j,initSearch:b,isLoading:v,isSearch:C=!0,isClear:w=!0,isRowExpand:g=!0,type:y="default",style:F,className:N,children:_,labelCol:S,wrapperCol:E,defaultColCount:I=4,defaultRowExpand:W=2,handleFinish:k}=p,{t:R}=t(),[B]=n.useForm(),[L,P]=e.useState(!1),[V,$]=e.useState(!0),[A,H]=e.useState(g);e.useEffect((()=>{if(H(g),g){H(I*W<x.length)}}),[I,W,g,x.length]),e.useEffect((()=>{try{Object.keys(j).length&&($(!1),B.setFieldsValue({...j}))}catch(e){}}),[j,B,V]);const M={...p};delete M.type,delete M.isSearch,delete M.isClear,delete M.isLoading,delete M.initSearch,delete M.handleFinish;const O=()=>{null==B||B.submit()},T=e=>(null==e?void 0:e.labelWidth)?{style:{width:e.labelWidth}}:(null==e?void 0:e.labelCol)?e.labelCol:S||("grid"===y?{span:6}:void 0),q=e=>(null==e?void 0:e.wrapperWidth)?{style:{width:e.wrapperWidth}}:(null==e?void 0:e.wrapperCol)?e.wrapperCol:E||("grid"===y?{span:18}:void 0),z=l.jsxs("div",{className:"flex items-center flex-wrap",children:[!!C&&l.jsx(n.Item,{children:l.jsx(r,{type:"primary",htmlType:"submit",className:"!mb-5px",loading:v,icon:l.jsx(c,{}),children:R("public.search")})}),!!w&&l.jsx(n.Item,{children:l.jsx(r,{className:"!mb-5px",icon:l.jsx(m,{}),onClick:()=>{null==B||B.resetFields(),null==B||B.setFieldsValue(b?{...b}:{}),null==B||B.submit()},children:R("public.clear")})}),_,"grid"===y&&!!A&&l.jsxs("div",{className:"text-12px cursor-pointer color-#1677ff hover:color-#69b1ff",onClick:()=>{P(!L)},children:[l.jsx(h,{rotate:L?180:0}),L?"收缩":"展开"]})]});return l.jsx("div",{id:"searches",style:F,className:N,children:l.jsxs(n,{layout:"inline",...M,ref:u,form:B,onFinish:e=>{if(k){const l=i(e,x);null==k||k(l)}},onFinishFailed:e=>{},autoComplete:"off",children:["default"===y&&l.jsxs(l.Fragment,{children:[null==x?void 0:x.map((e=>l.jsx(n.Item,{label:e.label,name:e.name,className:"!mb-5px",hidden:e.hidden,labelCol:T(e),wrapperCol:q(e),rules:e.rules,valuePropName:a(e.component),children:s(R,e,O)},`${e.name}`))),z]}),"grid"===y&&l.jsxs(d,{wrap:!0,className:"w-full",children:[null==(f=(e=>{if(!A)return e;const l=I*W;for(let a=0;a<e.length;a++){const s=e[a];a<l?s.hidden=!1:s.hidden=!L}return e})(x))?void 0:f.map((e=>l.jsx("div",{style:{width:e.hidden?0:100/I+"%"},children:l.jsx(n.Item,{label:e.label,name:e.name,className:"!mb-5px",hidden:e.hidden,labelCol:T(e),wrapperCol:q(e),rules:e.rules,valuePropName:a(e.component),children:s(R,e,O)})},`${e.name}`))),l.jsx(o,{flex:(null==x?void 0:x.length)%I==0||A?"auto":void 0,children:l.jsx(d,{justify:"flex-end",children:z})})]})]})})}));export{p as B};
