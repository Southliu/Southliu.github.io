{"version":3,"file":"page_dashboard_comp_Bar.2d252749.js","sources":["../../../src/hooks/useEcharts.ts","../../../src/pages/dashboard/components/Bar.tsx"],"sourcesContent":["import { useCallback, useEffect, useRef } from 'react'\nimport * as echarts from 'echarts'\n/**\n * 使用Echarts\n * @param options -  绘制echarts的参数\n * @param data -  数据\n */\nexport const useEcharts = (options: echarts.EChartsCoreOption, data?: unknown) => {\n  const echartsRef = useRef<echarts.EChartsType>()\n  const htmlDivRef = useRef<HTMLDivElement>(null)\n\n  /** 销毁echarts */\n  const dispose = () => {\n    if (htmlDivRef.current) {\n      echartsRef.current?.dispose()\n    }\n  }\n\n  /** 初始化 */\n  const init = useCallback(() => {\n    if (options) {\n      // 摧毁echarts后在初始化\n      dispose()\n\n      // 初始化chart\n      if (htmlDivRef.current) {\n        echartsRef.current = echarts.init(htmlDivRef.current)\n        echartsRef.current.setOption(options)\n      }\n    }\n  }, [options])\n\n  // 监听操作值\n  useEffect(() => {\n    if (options) init()\n  }, [init, options])\n  \n  useEffect(() => {\n    init()\n    window.addEventListener(\"resize\", init, false)\n\n    return () => {\n      window.removeEventListener(\"resize\", init)\n      dispose()\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    if (data) {\n      echartsRef?.current?.setOption(options)\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data])\n\n  return [htmlDivRef, init] as const\n}\n","import type { EChartsCoreOption } from 'echarts'\nimport type { RootState } from '@/stores'\nimport { useEffect } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useEcharts } from '@/hooks/useEcharts'\n\nconst data = [\n  96285,\n  102352,\n  111235,\n  112356,\n  123984,\n  138205,\n  142059,\n  152362,\n  162231,\n  164324,\n  178291,\n  192830,\n]\n\nconst option: EChartsCoreOption = {\n  title: {\n    text: '当日充值排行',\n    left: 30,\n    top: 5\n  },\n  tooltip: {\n    trigger: 'axis',\n    axisPointer: {\n      type: 'shadow'\n    }\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  xAxis: {\n    type: 'value',\n    boundaryGap: [0, 0.01]\n  },\n  yAxis: {\n    type: 'category',\n    data: [\n      '孤独的霸气',\n      '凌云齐天',\n      '夏至未至',\n      '叶璃溪',\n      '良辰美景奈何天',\n      '凹凸曼',\n      '六月离别',\n      '离歌',\n      '终极战犯',\n      '水洗晴空',\n      '安城如沫',\n      '渣渣灰',\n\n    ]\n  },\n  series: [\n    {\n      name: '充值数',\n      type: 'bar',\n      data\n    }\n  ]\n}\n\nfunction Bar() {\n  const permissions = useSelector((state: RootState) => state.user.permissions)\n  const [echartsRef, init] = useEcharts(option, data)\n\n  useEffect(() => {\n    if (permissions.length) {\n      setTimeout(() => {\n        init()\n      }, 100)\n    }\n  }, [init, permissions.length])\n  \n  return (\n    <div className='w-38% h-550px border border-gray-200 rounded-10px'>\n      <div ref={echartsRef} className='w-full h-full'></div>\n    </div>\n  )\n}\n\nexport default Bar"],"names":["useEcharts","options","data","echartsRef","useRef","htmlDivRef","dispose","_a","init","useCallback","echarts.init","useEffect","option","Bar","permissions","useSelector","state","jsx"],"mappings":"+KAOa,MAAAA,EAAa,CAACC,EAAoCC,IAAmB,CAChF,MAAMC,EAAaC,EAAAA,SACbC,EAAaD,SAAuB,IAAI,EAGxCE,EAAU,IAAM,OAChBD,EAAW,WACbE,EAAAJ,EAAW,UAAX,MAAAI,EAAoB,UACtB,EAIIC,EAAOC,EAAAA,YAAY,IAAM,CACzBR,IAEMK,IAGJD,EAAW,UACbF,EAAW,QAAUO,EAAaL,EAAW,OAAO,EACzCF,EAAA,QAAQ,UAAUF,CAAO,GAExC,EACC,CAACA,CAAO,CAAC,EAGZU,OAAAA,EAAAA,UAAU,IAAM,CACVV,GAAcO,GAAA,EACjB,CAACA,EAAMP,CAAO,CAAC,EAElBU,EAAAA,UAAU,KACHH,IACE,OAAA,iBAAiB,SAAUA,EAAM,EAAK,EAEtC,IAAM,CACJ,OAAA,oBAAoB,SAAUA,CAAI,EACjCF,GAAA,GAGT,CAAE,CAAA,EAELK,EAAAA,UAAU,IAAM,OACVT,KACUK,EAAAJ,GAAA,YAAAA,EAAA,UAAA,MAAAI,EAAS,UAAUN,GACjC,EAEC,CAACC,CAAI,CAAC,EAEF,CAACG,EAAYG,CAAI,CAC1B,EClDMN,EAAO,CACX,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACF,EAEMU,EAA4B,CAChC,MAAO,CACL,KAAM,SACN,KAAM,GACN,IAAK,CACP,EACA,QAAS,CACP,QAAS,OACT,YAAa,CACX,KAAM,QACR,CACF,EACA,KAAM,CACJ,KAAM,KACN,MAAO,KACP,OAAQ,KACR,aAAc,EAChB,EACA,MAAO,CACL,KAAM,QACN,YAAa,CAAC,EAAG,GAAI,CACvB,EACA,MAAO,CACL,KAAM,WACN,KAAM,CACJ,QACA,OACA,OACA,MACA,UACA,MACA,OACA,KACA,OACA,OACA,OACA,KAEF,CACF,EACA,OAAQ,CACN,CACE,KAAM,MACN,KAAM,MACN,KAAAV,CACF,CACF,CACF,EAEA,SAASW,GAAM,CACb,MAAMC,EAAcC,EAAaC,GAAqBA,EAAM,KAAK,WAAW,EACtE,CAACb,EAAYK,CAAI,EAAIR,EAAWY,EAAQV,CAAI,EAElDS,OAAAA,EAAAA,UAAU,IAAM,CACVG,EAAY,QACd,WAAW,IAAM,CACVN,KACJ,GAAG,CAEP,EAAA,CAACA,EAAMM,EAAY,MAAM,CAAC,EAG3BG,EAAC,MAAI,CAAA,UAAU,oDACb,SAAAA,EAAC,OAAI,IAAKd,EAAY,UAAU,eAAgB,CAAA,CAClD,CAAA,CAEJ"}