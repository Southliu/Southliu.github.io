import{b as e,c as t,h as n,d as a,e as r,f as o,g as i}from"./@babel_runtime.d775819b.js";import{r as c}from"./react.a7da97a2.js";import{c as l}from"./classnames.71976509.js";import{H as u,K as s,e as f,l as d,h as v,o as m,A as b}from"./rc-util.b2252098.js";import{C as p}from"./rc-motion.477113fa.js";import{R as h}from"./rc-resize-observer.5e6ad543.js";import{D as y}from"./rc-dropdown.02f0e73a.js";import{E as g,M as E}from"./rc-menu.67811a74.js";const k=c.createContext(null);var x=c.forwardRef((function(e,t){var n=e.prefixCls,a=e.className,r=e.style,o=e.id,i=e.active,u=e.tabKey,s=e.children;return c.createElement("div",{id:o&&"".concat(o,"-panel-").concat(u),role:"tabpanel",tabIndex:i?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(u),"aria-hidden":!i,style:r,className:l(n,i&&"".concat(n,"-active"),a),ref:t},s)})),C=["key","forceRender","style","className"];function w(r){var o=r.id,i=r.activeKey,u=r.animated,s=r.tabPosition,f=r.destroyInactiveTabPane,d=c.useContext(k),v=d.prefixCls,m=d.tabs,b=u.tabPane,h="".concat(v,"-tabpane");return c.createElement("div",{className:l("".concat(v,"-content-holder"))},c.createElement("div",{className:l("".concat(v,"-content"),"".concat(v,"-content-").concat(s),e({},"".concat(v,"-content-animated"),b))},m.map((function(e){var r=e.key,s=e.forceRender,d=e.style,v=e.className,m=t(e,C),y=r===i;return c.createElement(p,n({key:r,visible:y,forceRender:s,removeOnLeave:!!f,leavedClassName:"".concat(h,"-hidden")},u.tabPaneMotion),(function(e,t){var i=e.style,u=e.className;return c.createElement(x,n({},m,{prefixCls:h,id:o,tabKey:r,animated:b,active:y,style:a(a({},d),i),className:l(v,u),ref:t}))}))}))))}var N={width:0,height:0,left:0,top:0};function P(e,t){var n=c.useRef(e),a=c.useState({}),o=r(a,2)[1];return[n.current,function(e){var a="function"==typeof e?e(n.current):e;a!==n.current&&t(a,n.current),n.current=a,o({})}]}var T=.1,R=.01,S=20,M=Math.pow(.995,S);function I(e){var t=c.useState(0),n=r(t,2),a=n[0],o=n[1],i=c.useRef(0),l=c.useRef();return l.current=e,u((function(){var e;null===(e=l.current)||void 0===e||e.call(l)}),[a]),function(){i.current===a&&(i.current+=1,o(i.current))}}var B={width:0,height:0,left:0,top:0,right:0};function L(e){var t;return e instanceof Map?(t={},e.forEach((function(e,n){t[n]=e}))):t=e,JSON.stringify(t)}var D="TABS_DQ";function A(e){return String(e).replace(/"/g,D)}function j(e,t,n,a){return!(!n||a||!1===e||void 0===e&&(!1===t||null===t))}function K(e,t){var n=e.prefixCls,a=e.editable,r=e.locale,o=e.style;return a&&!1!==a.showAdd?c.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(null==r?void 0:r.addAriaLabel)||"Add tab",onClick:function(e){a.onEdit("add",{event:e})}},a.addIcon||"+"):null}const W=c.forwardRef(K);var _=c.forwardRef((function(e,t){var n,a=e.position,r=e.prefixCls,i=e.extra;if(!i)return null;var l={};return"object"!==o(i)||c.isValidElement(i)?l.right=i:l=i,"right"===a&&(n=l.right),"left"===a&&(n=l.left),n?c.createElement("div",{className:"".concat(r,"-extra-content"),ref:t},n):null}));function G(t,n){var a=t.prefixCls,o=t.id,i=t.tabs,u=t.locale,f=t.mobile,d=t.moreIcon,v=void 0===d?"More":d,m=t.moreTransitionName,b=t.style,p=t.className,h=t.editable,k=t.tabBarGutter,x=t.rtl,C=t.removeAriaLabel,w=t.onTabClick,N=t.getPopupContainer,P=t.popupClassName,T=c.useState(!1),R=r(T,2),S=R[0],M=R[1],I=c.useState(null),B=r(I,2),L=B[0],D=B[1],A="".concat(o,"-more-popup"),K="".concat(a,"-dropdown"),_=null!==L?"".concat(A,"-").concat(L):null,G=null==u?void 0:u.dropdownAriaLabel;var V=c.createElement(g,{onClick:function(e){var t=e.key,n=e.domEvent;w(t,n),M(!1)},prefixCls:"".concat(K,"-menu"),id:A,tabIndex:-1,role:"listbox","aria-activedescendant":_,selectedKeys:[L],"aria-label":void 0!==G?G:"expanded dropdown"},i.map((function(e){var t=e.closable,n=e.disabled,a=e.closeIcon,r=e.key,i=e.label,l=j(t,a,h,n);return c.createElement(E,{key:r,id:"".concat(A,"-").concat(r),role:"option","aria-controls":o&&"".concat(o,"-panel-").concat(r),disabled:n},c.createElement("span",null,i),l&&c.createElement("button",{type:"button","aria-label":C||"remove",tabIndex:0,className:"".concat(K,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),h.onEdit("remove",{key:t,event:e})}(e,r)}},a||h.removeIcon||"×"))})));function F(e){for(var t=i.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===L}))||0,a=t.length,r=0;r<a;r+=1){var o=t[n=(n+e+a)%a];if(!o.disabled)return void D(o.key)}}c.useEffect((function(){var e=document.getElementById(_);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[L]),c.useEffect((function(){S||D(null)}),[S]);var O=e({},x?"marginRight":"marginLeft",k);i.length||(O.visibility="hidden",O.order=1);var X=l(e({},"".concat(K,"-rtl"),x)),z=f?null:c.createElement(y,{prefixCls:K,overlay:V,trigger:["hover"],visible:!!i.length&&S,transitionName:m,onVisibleChange:M,overlayClassName:l(X,P),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:N},c.createElement("button",{type:"button",className:"".concat(a,"-nav-more"),style:O,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":A,id:"".concat(o,"-more"),"aria-expanded":S,onKeyDown:function(e){var t=e.which;if(S)switch(t){case s.UP:F(-1),e.preventDefault();break;case s.DOWN:F(1),e.preventDefault();break;case s.ESC:M(!1);break;case s.SPACE:case s.ENTER:null!==L&&w(L,e)}else[s.DOWN,s.SPACE,s.ENTER].includes(t)&&(M(!0),e.preventDefault())}},v));return c.createElement("div",{className:l("".concat(a,"-nav-operations"),p),style:b,ref:n},z,c.createElement(W,{prefixCls:a,locale:u,editable:h}))}const V=c.memo(c.forwardRef(G),(function(e,t){return t.tabMoving}));function F(t){var n,a=t.prefixCls,r=t.id,o=t.active,i=t.tab,u=i.key,f=i.label,d=i.disabled,v=i.closeIcon,m=t.closable,b=t.renderWrapper,p=t.removeAriaLabel,h=t.editable,y=t.onClick,g=t.onFocus,E=t.style,k="".concat(a,"-tab"),x=j(m,v,h,d);function C(e){d||y(e)}var w=c.createElement("div",{key:u,"data-node-key":A(u),className:l(k,(n={},e(n,"".concat(k,"-with-remove"),x),e(n,"".concat(k,"-active"),o),e(n,"".concat(k,"-disabled"),d),n)),style:E,onClick:C},c.createElement("div",{role:"tab","aria-selected":o,id:r&&"".concat(r,"-tab-").concat(u),className:"".concat(k,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(u),"aria-disabled":d,tabIndex:d?null:0,onClick:function(e){e.stopPropagation(),C(e)},onKeyDown:function(e){[s.SPACE,s.ENTER].includes(e.which)&&(e.preventDefault(),C(e))},onFocus:g},f),x&&c.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(k,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),h.onEdit("remove",{key:u,event:t})}},v||h.removeIcon||"×"));return b?b(w):w}var O=function(e){var t=e.current||{},n=t.offsetWidth,a=void 0===n?0:n,r=t.offsetHeight;return[a,void 0===r?0:r]},X=function(e,t){return e[t?0:1]};function z(t,o){var u,s=c.useContext(k),m=s.prefixCls,b=s.tabs,p=t.className,y=t.style,g=t.id,E=t.animated,x=t.activeKey,C=t.rtl,w=t.extra,D=t.editable,j=t.locale,K=t.tabPosition,G=t.tabBarGutter,z=t.children,H=t.onTabClick,Y=t.onTabScroll,q=c.useRef(),J=c.useRef(),Q=c.useRef(),U=c.useRef(),Z=c.useRef(),$=c.useRef(),ee=c.useRef(),te="top"===K||"bottom"===K,ne=P(0,(function(e,t){te&&Y&&Y({direction:e>t?"left":"right"})})),ae=r(ne,2),re=ae[0],oe=ae[1],ie=P(0,(function(e,t){!te&&Y&&Y({direction:e>t?"top":"bottom"})})),ce=r(ie,2),le=ce[0],ue=ce[1],se=c.useState([0,0]),fe=r(se,2),de=fe[0],ve=fe[1],me=c.useState([0,0]),be=r(me,2),pe=be[0],he=be[1],ye=c.useState([0,0]),ge=r(ye,2),Ee=ge[0],ke=ge[1],xe=c.useState([0,0]),Ce=r(xe,2),we=Ce[0],Ne=Ce[1],Pe=function(e){var t=c.useRef([]),n=c.useState({}),a=r(n,2)[1],o=c.useRef("function"==typeof e?e():e),i=I((function(){var e=o.current;t.current.forEach((function(t){e=t(e)})),t.current=[],o.current=e,a({})}));return[o.current,function(e){t.current.push(e),i()}]}(new Map),Te=r(Pe,2),Re=Te[0],Se=Te[1],Me=function(e,t,n){return c.useMemo((function(){for(var n,r=new Map,o=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||N,i=o.left+o.width,c=0;c<e.length;c+=1){var l,u=e[c].key,s=t.get(u);s||(s=t.get(null===(l=e[c-1])||void 0===l?void 0:l.key)||N);var f=r.get(u)||a({},s);f.right=i-f.left-f.width,r.set(u,f)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(b,Re,pe[0]),Ie=X(de,te),Be=X(pe,te),Le=X(Ee,te),De=X(we,te),Ae=Ie<Be+Le,je=Ae?Ie-De:Ie-Le,Ke="".concat(m,"-nav-operations-hidden"),We=0,_e=0;function Ge(e){return e<We?We:e>_e?_e:e}te&&C?(We=0,_e=Math.max(0,Be-je)):(We=Math.min(0,je-Be),_e=0);var Ve=c.useRef(),Fe=c.useState(),Oe=r(Fe,2),Xe=Oe[0],ze=Oe[1];function He(){ze(Date.now())}function Ye(){window.clearTimeout(Ve.current)}!function(e,t){var n=c.useState(),a=r(n,2),o=a[0],i=a[1],l=c.useState(0),u=r(l,2),s=u[0],f=u[1],d=c.useState(0),v=r(d,2),m=v[0],b=v[1],p=c.useState(),h=r(p,2),y=h[0],g=h[1],E=c.useRef(),k=c.useRef(),x=c.useRef(null);x.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,a=t.screenY;i({x:n,y:a}),window.clearInterval(E.current)},onTouchMove:function(e){if(o){e.preventDefault();var n=e.touches[0],a=n.screenX,r=n.screenY;i({x:a,y:r});var c=a-o.x,l=r-o.y;t(c,l);var u=Date.now();f(u),b(u-s),g({x:c,y:l})}},onTouchEnd:function(){if(o&&(i(null),g(null),y)){var e=y.x/m,n=y.y/m,a=Math.abs(e),r=Math.abs(n);if(Math.max(a,r)<T)return;var c=e,l=n;E.current=window.setInterval((function(){Math.abs(c)<R&&Math.abs(l)<R?window.clearInterval(E.current):t((c*=M)*S,(l*=M)*S)}),S)}},onWheel:function(e){var n=e.deltaX,a=e.deltaY,r=0,o=Math.abs(n),i=Math.abs(a);o===i?r="x"===k.current?n:a:o>i?(r=n,k.current="x"):(r=a,k.current="y"),t(-r,-r)&&e.preventDefault()}},c.useEffect((function(){function t(e){x.current.onTouchMove(e)}function n(e){x.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){x.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){x.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])}(U,(function(e,t){function n(e,t){e((function(e){return Ge(e+t)}))}return!!Ae&&(te?n(oe,e):n(ue,t),Ye(),He(),!0)})),c.useEffect((function(){return Ye(),Xe&&(Ve.current=window.setTimeout((function(){ze(0)}),100)),Ye}),[Xe]);var qe=function(e,t,n,a,r,o,i){var l,u,s,f=i.tabs,d=i.tabPosition,v=i.rtl;return["top","bottom"].includes(d)?(l="width",u=v?"right":"left",s=Math.abs(n)):(l="height",u="top",s=-n),c.useMemo((function(){if(!f.length)return[0,0];for(var n=f.length,a=n,r=0;r<n;r+=1){var o=e.get(f[r].key)||B;if(o[u]+o[l]>s+t){a=r-1;break}}for(var i=0,c=n-1;c>=0;c-=1)if((e.get(f[c].key)||B)[u]<s){i=c+1;break}return i>=a?[0,0]:[i,a]}),[e,t,a,r,o,s,d,f.map((function(e){return e.key})).join("_"),v])}(Me,je,te?re:le,Be,Le,De,a(a({},t),{},{tabs:b})),Je=r(qe,2),Qe=Je[0],Ue=Je[1],Ze=f((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=Me.get(e)||{width:0,height:0,left:0,right:0,top:0};if(te){var n=re;C?t.right<re?n=t.right:t.right+t.width>re+je&&(n=t.right+t.width-je):t.left<-re?n=-t.left:t.left+t.width>-re+je&&(n=-(t.left+t.width-je)),ue(0),oe(Ge(n))}else{var a=le;t.top<-le?a=-t.top:t.top+t.height>-le+je&&(a=-(t.top+t.height-je)),oe(0),ue(Ge(a))}})),$e={};"top"===K||"bottom"===K?$e[C?"marginRight":"marginLeft"]=G:$e.marginTop=G;var et=b.map((function(e,t){var n=e.key;return c.createElement(F,{id:g,prefixCls:m,key:n,tab:e,style:0===t?void 0:$e,closable:e.closable,editable:D,active:n===x,renderWrapper:z,removeAriaLabel:null==j?void 0:j.removeAriaLabel,onClick:function(e){H(n,e)},onFocus:function(){Ze(n),He(),U.current&&(C||(U.current.scrollLeft=0),U.current.scrollTop=0)}})})),tt=function(){return Se((function(){var e=new Map;return b.forEach((function(t){var n,a=t.key,r=null===(n=Z.current)||void 0===n?void 0:n.querySelector('[data-node-key="'.concat(A(a),'"]'));r&&e.set(a,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))};c.useEffect((function(){tt()}),[b.map((function(e){return e.key})).join("_")]);var nt=I((function(){var e=O(q),t=O(J),n=O(Q);ve([e[0]-t[0]-n[0],e[1]-t[1]-n[1]]);var a=O(ee);ke(a);var r=O($);Ne(r);var o=O(Z);he([o[0]-a[0],o[1]-a[1]]),tt()})),at=b.slice(0,Qe),rt=b.slice(Ue+1),ot=[].concat(i(at),i(rt)),it=c.useState(),ct=r(it,2),lt=ct[0],ut=ct[1],st=Me.get(x),ft=c.useRef();function dt(){d.cancel(ft.current)}c.useEffect((function(){var e={};return st&&(te?(C?e.right=st.right:e.left=st.left,e.width=st.width):(e.top=st.top,e.height=st.height)),dt(),ft.current=d((function(){ut(e)})),dt}),[st,te,C]),c.useEffect((function(){Ze()}),[x,We,_e,L(st),L(Me),te]),c.useEffect((function(){nt()}),[C]);var vt,mt,bt,pt,ht=!!ot.length,yt="".concat(m,"-nav-wrap");return te?C?(mt=re>0,vt=re!==_e):(vt=re<0,mt=re!==We):(bt=le<0,pt=le!==We),c.createElement(h,{onResize:nt},c.createElement("div",{ref:v(o,q),role:"tablist",className:l("".concat(m,"-nav"),p),style:y,onKeyDown:function(){He()}},c.createElement(_,{ref:J,position:"left",extra:w,prefixCls:m}),c.createElement("div",{className:l(yt,(u={},e(u,"".concat(yt,"-ping-left"),vt),e(u,"".concat(yt,"-ping-right"),mt),e(u,"".concat(yt,"-ping-top"),bt),e(u,"".concat(yt,"-ping-bottom"),pt),u)),ref:U},c.createElement(h,{onResize:nt},c.createElement("div",{ref:Z,className:"".concat(m,"-nav-list"),style:{transform:"translate(".concat(re,"px, ").concat(le,"px)"),transition:Xe?"none":void 0}},et,c.createElement(W,{ref:ee,prefixCls:m,locale:j,editable:D,style:a(a({},0===et.length?void 0:$e),{},{visibility:ht?"hidden":null})}),c.createElement("div",{className:l("".concat(m,"-ink-bar"),e({},"".concat(m,"-ink-bar-animated"),E.inkBar)),style:lt})))),c.createElement(V,n({},t,{removeAriaLabel:null==j?void 0:j.removeAriaLabel,ref:$,prefixCls:m,tabs:ot,className:!ht&&Ke,tabMoving:!!Xe})),c.createElement(_,{ref:Q,position:"right",extra:w,prefixCls:m})))}const H=c.forwardRef(z);var Y=["renderTabBar"],q=["label","key"];function J(e){var r=e.renderTabBar,o=t(e,Y),i=c.useContext(k).tabs;return r?r(a(a({},o),{},{panes:i.map((function(e){var a=e.label,r=e.key,o=t(e,q);return c.createElement(x,n({tab:a,key:r,tabKey:r},o))}))}),H):c.createElement(H,o)}var Q=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],U=0;function Z(i,u){var s,f=i.id,d=i.prefixCls,v=void 0===d?"rc-tabs":d,p=i.className,h=i.items,y=i.direction,g=i.activeKey,E=i.defaultActiveKey,x=i.editable,C=i.animated,N=i.tabPosition,P=void 0===N?"top":N,T=i.tabBarGutter,R=i.tabBarStyle,S=i.tabBarExtraContent,M=i.locale,I=i.moreIcon,B=i.moreTransitionName,L=i.destroyInactiveTabPane,D=i.renderTabBar,A=i.onChange,j=i.onTabClick,K=i.onTabScroll,W=i.getPopupContainer,_=i.popupClassName,G=t(i,Q),V=c.useMemo((function(){return(h||[]).filter((function(e){return e&&"object"===o(e)&&"key"in e}))}),[h]),F="rtl"===y,O=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inkBar:!0,tabPane:!1};return(e=!1===t?{inkBar:!1,tabPane:!1}:!0===t?{inkBar:!0,tabPane:!1}:a({inkBar:!0},"object"===o(t)?t:{})).tabPaneMotion&&void 0===e.tabPane&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}(C),X=c.useState(!1),z=r(X,2),H=z[0],Y=z[1];c.useEffect((function(){Y(m())}),[]);var q=b((function(){var e;return null===(e=V[0])||void 0===e?void 0:e.key}),{value:g,defaultValue:E}),Z=r(q,2),$=Z[0],ee=Z[1],te=c.useState((function(){return V.findIndex((function(e){return e.key===$}))})),ne=r(te,2),ae=ne[0],re=ne[1];c.useEffect((function(){var e,t=V.findIndex((function(e){return e.key===$}));-1===t&&(t=Math.max(0,Math.min(ae,V.length-1)),ee(null===(e=V[t])||void 0===e?void 0:e.key));re(t)}),[V.map((function(e){return e.key})).join("_"),$,ae]);var oe=b(null,{value:f}),ie=r(oe,2),ce=ie[0],le=ie[1];c.useEffect((function(){f||(le("rc-tabs-".concat(U)),U+=1)}),[]);var ue={id:ce,activeKey:$,animated:O,tabPosition:P,rtl:F,mobile:H},se=a(a({},ue),{},{editable:x,locale:M,moreIcon:I,moreTransitionName:B,tabBarGutter:T,onTabClick:function(e,t){null==j||j(e,t);var n=e!==$;ee(e),n&&(null==A||A(e))},onTabScroll:K,extra:S,style:R,panes:null,getPopupContainer:W,popupClassName:_});return c.createElement(k.Provider,{value:{tabs:V,prefixCls:v}},c.createElement("div",n({ref:u,id:f,className:l(v,"".concat(v,"-").concat(P),(s={},e(s,"".concat(v,"-mobile"),H),e(s,"".concat(v,"-editable"),x),e(s,"".concat(v,"-rtl"),F),s),p)},G),undefined,c.createElement(J,n({},se,{renderTabBar:D})),c.createElement(w,n({destroyInactiveTabPane:L},ue,{animated:O}))))}var $=c.forwardRef(Z);export{$ as F};
