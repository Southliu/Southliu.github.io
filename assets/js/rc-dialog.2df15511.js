import{h as S,e as C,c as j}from"./@babel_runtime.cff7d31a.js";import{r as n,R as c}from"./react.1ab83802.js";import{P as le}from"./@rc-component_portal.3b2cac27.js";import{c as $}from"./classnames.96a48171.js";import{v as se,x as ce,n as Y,K as q}from"./rc-util.72bdd974.js";import{C as Q}from"./rc-motion.7814719b.js";function fe(e){var a=e.prefixCls,t=e.style,o=e.visible,r=e.maskProps,i=e.motionName;return n.exports.createElement(Q,{key:"mask",visible:o,motionName:i,leavedClassName:"".concat(a,"-mask-hidden")},function(s,f){var m=s.className,d=s.style;return n.exports.createElement("div",S({ref:f,style:C(C({},d),t),className:$("".concat(a,"-mask"),m)},r))})}function F(e,a,t){var o=a;return!o&&t&&(o="".concat(e,"-").concat(t)),o}function G(e,a){var t=e["page".concat(a?"Y":"X","Offset")],o="scroll".concat(a?"Top":"Left");if(typeof t!="number"){var r=e.document;t=r.documentElement[o],typeof t!="number"&&(t=r.body[o])}return t}function ue(e){var a=e.getBoundingClientRect(),t={left:a.left,top:a.top},o=e.ownerDocument,r=o.defaultView||o.parentWindow;return t.left+=G(r),t.top+=G(r,!0),t}const me=n.exports.memo(function(e){var a=e.children;return a},function(e,a){var t=a.shouldUpdate;return!t});var J={width:0,height:0,overflow:"hidden",outline:"none"},de=c.forwardRef(function(e,a){var t=e.prefixCls,o=e.className,r=e.style,i=e.title,s=e.ariaId,f=e.footer,m=e.closable,d=e.closeIcon,y=e.onClose,b=e.children,x=e.bodyStyle,N=e.bodyProps,g=e.modalRender,w=e.onMouseDown,P=e.onMouseUp,I=e.holderRef,D=e.visible,k=e.forceRender,u=e.width,_=e.height,h=n.exports.useRef(),R=n.exports.useRef();c.useImperativeHandle(a,function(){return{focus:function(){var v;(v=h.current)===null||v===void 0||v.focus()},changeActive:function(v){var K=document,O=K.activeElement;v&&O===R.current?h.current.focus():!v&&O===h.current&&R.current.focus()}}});var M={};u!==void 0&&(M.width=u),_!==void 0&&(M.height=_);var T;f&&(T=c.createElement("div",{className:"".concat(t,"-footer")},f));var V;i&&(V=c.createElement("div",{className:"".concat(t,"-header")},c.createElement("div",{className:"".concat(t,"-title"),id:s},i)));var U;m&&(U=c.createElement("button",{type:"button",onClick:y,"aria-label":"Close",className:"".concat(t,"-close")},d||c.createElement("span",{className:"".concat(t,"-close-x")})));var E=c.createElement("div",{className:"".concat(t,"-content")},U,V,c.createElement("div",S({className:"".concat(t,"-body"),style:x},N),b),T);return c.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?s:null,"aria-modal":"true",ref:I,style:C(C({},r),M),className:$(t,o),onMouseDown:w,onMouseUp:P},c.createElement("div",{tabIndex:0,ref:h,style:J,"aria-hidden":"true"}),c.createElement(me,{shouldUpdate:D||k},g?g(E):E),c.createElement("div",{tabIndex:0,ref:R,style:J,"aria-hidden":"true"}))});const ve=de;var Z=n.exports.forwardRef(function(e,a){var t=e.prefixCls,o=e.title,r=e.style,i=e.className,s=e.visible,f=e.forceRender,m=e.destroyOnClose,d=e.motionName,y=e.ariaId,b=e.onVisibleChanged,x=e.mousePosition,N=n.exports.useRef(),g=n.exports.useState(),w=j(g,2),P=w[0],I=w[1],D={};P&&(D.transformOrigin=P);function k(){var u=ue(N.current);I(x?"".concat(x.x-u.left,"px ").concat(x.y-u.top,"px"):"")}return n.exports.createElement(Q,{visible:s,onVisibleChanged:b,onAppearPrepare:k,onEnterPrepare:k,forceRender:f,motionName:d,removeOnLeave:m,ref:N},function(u,_){var h=u.className,R=u.style;return n.exports.createElement(ve,S({},e,{ref:a,title:o,ariaId:y,prefixCls:t,holderRef:_,style:C(C(C({},R),r),D),className:$(i,h)}))})});Z.displayName="Content";function Ce(e){var a=e.prefixCls,t=a===void 0?"rc-dialog":a,o=e.zIndex,r=e.visible,i=r===void 0?!1:r,s=e.keyboard,f=s===void 0?!0:s,m=e.focusTriggerAfterClose,d=m===void 0?!0:m,y=e.wrapStyle,b=e.wrapClassName,x=e.wrapProps,N=e.onClose,g=e.afterClose,w=e.transitionName,P=e.animation,I=e.closable,D=I===void 0?!0:I,k=e.mask,u=k===void 0?!0:k,_=e.maskTransitionName,h=e.maskAnimation,R=e.maskClosable,M=R===void 0?!0:R,T=e.maskStyle,V=e.maskProps,U=e.rootClassName,E=n.exports.useRef(),A=n.exports.useRef(),v=n.exports.useRef(),K=n.exports.useState(i),O=j(K,2),p=O[0],H=O[1],ee=se();function te(){Y(A.current,document.activeElement)||(E.current=document.activeElement)}function ae(){if(!Y(A.current,document.activeElement)){var l;(l=v.current)===null||l===void 0||l.focus()}}function ne(l){if(l)ae();else{if(H(!1),u&&E.current&&d){try{E.current.focus({preventScroll:!0})}catch{}E.current=null}p&&(g==null||g())}}function z(l){N==null||N(l)}var W=n.exports.useRef(!1),L=n.exports.useRef(),oe=function(){clearTimeout(L.current),W.current=!0},re=function(){L.current=setTimeout(function(){W.current=!1})},X=null;M&&(X=function(B){W.current?W.current=!1:A.current===B.target&&z(B)});function ie(l){if(f&&l.keyCode===q.ESC){l.stopPropagation(),z(l);return}i&&l.keyCode===q.TAB&&v.current.changeActive(!l.shiftKey)}return n.exports.useEffect(function(){i&&(H(!0),te())},[i]),n.exports.useEffect(function(){return function(){clearTimeout(L.current)}},[]),n.exports.createElement("div",S({className:$("".concat(t,"-root"),U)},ce(e,{data:!0})),n.exports.createElement(fe,{prefixCls:t,visible:u&&i,motionName:F(t,_,h),style:C({zIndex:o},T),maskProps:V}),n.exports.createElement("div",S({tabIndex:-1,onKeyDown:ie,className:$("".concat(t,"-wrap"),b),ref:A,onClick:X,style:C(C({zIndex:o},y),{},{display:p?null:"none"})},x),n.exports.createElement(Z,S({},e,{onMouseDown:oe,onMouseUp:re,ref:v,closable:D,ariaId:ee,prefixCls:t,visible:i&&p,onClose:z,onVisibleChanged:ne,motionName:F(t,w,P)}))))}var ye=function(a){var t=a.visible,o=a.getContainer,r=a.forceRender,i=a.destroyOnClose,s=i===void 0?!1:i,f=a.afterClose,m=n.exports.useState(t),d=j(m,2),y=d[0],b=d[1];return n.exports.useEffect(function(){t&&b(!0)},[t]),!r&&s&&!y?null:n.exports.createElement(le,{open:t||r||y,autoDestroy:!1,getContainer:o,autoLock:t||y},n.exports.createElement(Ce,S({},a,{destroyOnClose:s,afterClose:function(){f==null||f(),b(!1)}})))};ye.displayName="Dialog";export{ye as D,ve as P};
