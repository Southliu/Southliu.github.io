import{e as Y,h as Ne,f as A,i as Ye,j as Oe,a as Ee,_ as Te,c as L,d as He,g as ze}from"./@babel_runtime.0b96ec9f.js";import{r as o}from"./react.017637b6.js";import{c as G}from"./classnames.96a48171.js";import{R as We}from"./rc-resize-observer.c02c0b35.js";import{f as w,E as Ke,b as se}from"./rc-util.88348ebb.js";var Ve=o.exports.forwardRef(function(r,v){var u=r.height,e=r.offset,f=r.children,a=r.prefixCls,l=r.onInnerResize,t=r.innerProps,n={},i={display:"flex",flexDirection:"column"};return e!==void 0&&(n={height:u,position:"relative",overflow:"hidden"},i=Y(Y({},i),{},{transform:"translateY(".concat(e,"px)"),position:"absolute",left:0,right:0,top:0})),o.exports.createElement("div",{style:n},o.exports.createElement(We,{onResize:function(s){var d=s.offsetHeight;d&&l&&l()}},o.exports.createElement("div",Ne({style:i,className:G(A({},"".concat(a,"-holder-inner"),a)),ref:v},t),f)))});Ve.displayName="Filler";var Ze=20;function Fe(r){return"touches"in r?r.touches[0].pageY:r.pageY}var qe=function(r){Ye(u,r);var v=Oe(u);function u(){var e;Ee(this,u);for(var f=arguments.length,a=new Array(f),l=0;l<f;l++)a[l]=arguments[l];return e=v.call.apply(v,[this].concat(a)),e.moveRaf=null,e.scrollbarRef=o.exports.createRef(),e.thumbRef=o.exports.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout(function(){e.setState({visible:!1})},2e3)},e.onScrollbarTouchStart=function(t){t.preventDefault()},e.onContainerMouseDown=function(t){t.stopPropagation(),t.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),(t=e.scrollbarRef.current)===null||t===void 0||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),w.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:Fe(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,i=n.dragging,c=n.pageY,s=n.startTop,d=e.props.onScroll;if(w.cancel(e.moveRaf),i){var p=Fe(t)-c,g=s+p,x=e.getEnableScrollRange(),M=e.getEnableHeightRange(),C=M?g/M:0,$=Math.ceil(C*x);e.moveRaf=w(function(){d($)})}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,i=t.count,c=n/i*10;return c=Math.max(c,Ze),c=Math.min(c,n/2),Math.floor(c)},e.getEnableScrollRange=function(){var t=e.props,n=t.scrollHeight,i=t.height;return n-i||0},e.getEnableHeightRange=function(){var t=e.props.height,n=e.getSpinHeight();return t-n||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),i=e.getEnableHeightRange();if(t===0||n===0)return 0;var c=t/n;return c*i},e.showScroll=function(){var t=e.props,n=t.height,i=t.scrollHeight;return i>n},e}return Te(u,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(f){f.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var f=this.state,a=f.dragging,l=f.visible,t=this.props.prefixCls,n=this.getSpinHeight(),i=this.getTop(),c=this.showScroll(),s=c&&l;return o.exports.createElement("div",{ref:this.scrollbarRef,className:G("".concat(t,"-scrollbar"),A({},"".concat(t,"-scrollbar-show"),c)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:s?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},o.exports.createElement("div",{ref:this.thumbRef,className:G("".concat(t,"-scrollbar-thumb"),A({},"".concat(t,"-scrollbar-thumb-moving"),a)),style:{width:"100%",height:n,top:i,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),u}(o.exports.Component);function Be(r){var v=r.children,u=r.setRef,e=o.exports.useCallback(function(f){u(f)},[]);return o.exports.cloneElement(v,{ref:e})}function Je(r,v,u,e,f,a){var l=a.getKey;return r.slice(v,u+1).map(function(t,n){var i=v+n,c=f(t,i,{}),s=l(t);return o.exports.createElement(Be,{key:s,setRef:function(p){return e(t,p)}},c)})}var Qe=function(){function r(){Ee(this,r),this.maps=void 0,this.maps=Object.create(null)}return Te(r,[{key:"set",value:function(u,e){this.maps[u]=e}},{key:"get",value:function(u){return this.maps[u]}}]),r}();function Xe(r,v,u){var e=o.exports.useState(0),f=L(e,2),a=f[0],l=f[1],t=o.exports.useRef(new Map),n=o.exports.useRef(new Qe),i=o.exports.useRef();function c(){w.cancel(i.current)}function s(){c(),i.current=w(function(){t.current.forEach(function(p,g){if(p&&p.offsetParent){var x=Ke(p),M=x.offsetHeight;n.current.get(g)!==M&&n.current.set(g,x.offsetHeight)}}),l(function(p){return p+1})})}function d(p,g){var x=r(p),M=t.current.get(x);g?(t.current.set(x,g),s()):t.current.delete(x),!M!=!g&&(g?v==null||v(p):u==null||u(p))}return o.exports.useEffect(function(){return c},[]),[d,s,n.current,a]}function et(r,v,u,e,f,a,l,t){var n=o.exports.useRef();return function(i){if(i==null){t();return}if(w.cancel(n.current),typeof i=="number")l(i);else if(i&&He(i)==="object"){var c,s=i.align;"index"in i?c=i.index:c=v.findIndex(function(x){return f(x)===i.key});var d=i.offset,p=d===void 0?0:d,g=function x(M,C){if(!(M<0||!r.current)){var $=r.current.clientHeight,_=!1,E=C;if($){for(var z=C||s,F=0,T=0,H=0,Z=Math.min(v.length,c),k=0;k<=Z;k+=1){var W=f(v[k]);T=F;var N=u.get(W);H=T+(N===void 0?e:N),F=H,k===c&&N===void 0&&(_=!0)}var D=null;switch(z){case"top":D=T-p;break;case"bottom":D=H-$+p;break;default:{var b=r.current.scrollTop,S=b+$;T<b?E="top":H>S&&(E="bottom")}}D!==null&&D!==r.current.scrollTop&&l(D)}n.current=w(function(){_&&a(),x(M-1,E)},2)}};g(3)}}}function tt(r,v,u){var e=r.length,f=v.length,a,l;if(e===0&&f===0)return null;e<f?(a=r,l=v):(a=v,l=r);var t={__EMPTY_ITEM__:!0};function n(g){return g!==void 0?u(g):t}for(var i=null,c=Math.abs(e-f)!==1,s=0;s<l.length;s+=1){var d=n(a[s]),p=n(l[s]);if(d!==p){i=s,c=c||d!==n(l[s+1]);break}}return i===null?null:{index:i,multiple:c}}function rt(r,v,u){var e=o.exports.useState(r),f=L(e,2),a=f[0],l=f[1],t=o.exports.useState(null),n=L(t,2),i=n[0],c=n[1];return o.exports.useEffect(function(){var s=tt(a||[],r||[],v);(s==null?void 0:s.index)!==void 0&&(u==null||u(s.index),c(r[s.index])),l(r)},[r]),[i]}var nt=(typeof navigator>"u"?"undefined":He(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const je=function(r,v){var u=o.exports.useRef(!1),e=o.exports.useRef(null);function f(){clearTimeout(e.current),u.current=!0,e.current=setTimeout(function(){u.current=!1},50)}var a=o.exports.useRef({top:r,bottom:v});return a.current.top=r,a.current.bottom=v,function(l){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=l<0&&a.current.top||l>0&&a.current.bottom;return t&&n?(clearTimeout(e.current),u.current=!1):(!n||u.current)&&f(),!u.current&&n}};function ot(r,v,u,e){var f=o.exports.useRef(0),a=o.exports.useRef(null),l=o.exports.useRef(null),t=o.exports.useRef(!1),n=je(v,u);function i(s){if(!!r){w.cancel(a.current);var d=s.deltaY;f.current+=d,l.current=d,!n(d)&&(nt||s.preventDefault(),a.current=w(function(){var p=t.current?10:1;e(f.current*p),f.current=0}))}}function c(s){!r||(t.current=s.detail===l.current)}return[i,c]}var at=14/15;function it(r,v,u){var e=o.exports.useRef(!1),f=o.exports.useRef(0),a=o.exports.useRef(null),l=o.exports.useRef(null),t,n=function(d){if(e.current){var p=Math.ceil(d.touches[0].pageY),g=f.current-p;f.current=p,u(g)&&d.preventDefault(),clearInterval(l.current),l.current=setInterval(function(){g*=at,(!u(g,!0)||Math.abs(g)<=.1)&&clearInterval(l.current)},16)}},i=function(){e.current=!1,t()},c=function(d){t(),d.touches.length===1&&!e.current&&(e.current=!0,f.current=Math.ceil(d.touches[0].pageY),a.current=d.target,a.current.addEventListener("touchmove",n),a.current.addEventListener("touchend",i))};t=function(){a.current&&(a.current.removeEventListener("touchmove",n),a.current.removeEventListener("touchend",i))},se(function(){return r&&v.current.addEventListener("touchstart",c),function(){var s;(s=v.current)===null||s===void 0||s.removeEventListener("touchstart",c),t(),clearInterval(l.current)}},[r])}var ut=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],lt=[],st={overflowY:"auto",overflowAnchor:"none"};function ct(r,v){var u=r.prefixCls,e=u===void 0?"rc-virtual-list":u,f=r.className,a=r.height,l=r.itemHeight,t=r.fullHeight,n=t===void 0?!0:t,i=r.style,c=r.data,s=r.children,d=r.itemKey,p=r.virtual,g=r.component,x=g===void 0?"div":g,M=r.onScroll,C=r.onVisibleChange,$=r.innerProps,_=ze(r,ut),E=!!(p!==!1&&a&&l),z=E&&c&&l*c.length>a,F=o.exports.useState(0),T=L(F,2),H=T[0],Z=T[1],k=o.exports.useState(!1),W=L(k,2),N=W[0],D=W[1],b=G(e,f),S=c||lt,P=o.exports.useRef(),ce=o.exports.useRef(),K=o.exports.useRef(),q=o.exports.useCallback(function(h){return typeof d=="function"?d(h):h==null?void 0:h[d]},[d]),ee={getKey:q};function B(h){Z(function(R){var y;typeof h=="function"?y=h(R):y=h;var I=Re(y);return P.current.scrollTop=I,I})}var pe=o.exports.useRef({start:0,end:S.length}),ye=o.exports.useRef(),we=rt(S,q),_e=L(we,1),De=_e[0];ye.current=De;var te=Xe(q,null,null),re=L(te,4),ge=re[0],fe=re[1],me=re[2],ne=re[3],V=o.exports.useMemo(function(){if(!E)return{scrollHeight:void 0,start:0,end:S.length-1,offset:void 0};if(!z){var h;return{scrollHeight:((h=ce.current)===null||h===void 0?void 0:h.offsetHeight)||0,start:0,end:S.length-1,offset:void 0}}for(var R=0,y,I,U,Q=S.length,X=0;X<Q;X+=1){var ke=S[X],be=q(ke),le=me.get(be),Pe=R+(le===void 0?l:le);Pe>=H&&y===void 0&&(y=X,I=R),Pe>H+a&&U===void 0&&(U=X),R=Pe}return y===void 0&&(y=0,I=0,U=Math.ceil(a/l)),U===void 0&&(U=S.length-1),U=Math.min(U+1,S.length),{scrollHeight:R,start:y,end:U,offset:I}},[z,E,H,S,ne,a]),j=V.scrollHeight,O=V.start,oe=V.end,ve=V.offset;pe.current.start=O,pe.current.end=oe;var J=j-a,he=o.exports.useRef(J);he.current=J;function Re(h){var R=h;return Number.isNaN(he.current)||(R=Math.min(R,he.current)),R=Math.max(R,0),R}var de=H<=0,Se=H>=J,Le=je(de,Se);function Ce(h){var R=h;B(R)}function $e(h){var R=h.currentTarget.scrollTop;R!==H&&B(R),M==null||M(h)}var xe=ot(E,de,Se,function(h){B(function(R){var y=R+h;return y})}),ae=L(xe,2),ie=ae[0],Me=ae[1];it(E,P,function(h,R){return Le(h,R)?!1:(ie({preventDefault:function(){},deltaY:h}),!0)}),se(function(){function h(R){E&&R.preventDefault()}return P.current.addEventListener("wheel",ie),P.current.addEventListener("DOMMouseScroll",Me),P.current.addEventListener("MozMousePixelScroll",h),function(){P.current&&(P.current.removeEventListener("wheel",ie),P.current.removeEventListener("DOMMouseScroll",Me),P.current.removeEventListener("MozMousePixelScroll",h))}},[E]);var Ie=et(P,S,me,l,q,fe,B,function(){var h;(h=K.current)===null||h===void 0||h.delayHidden()});o.exports.useImperativeHandle(v,function(){return{scrollTo:Ie}}),se(function(){if(C){var h=S.slice(O,oe+1);C(h,S)}},[O,oe,S]);var ue=Je(S,O,oe,ge,s,ee),m=null;return a&&(m=Y(A({},n?"height":"maxHeight",a),st),E&&(m.overflowY="hidden",N&&(m.pointerEvents="none"))),o.exports.createElement("div",Ne({style:Y(Y({},i),{},{position:"relative"}),className:b},_),o.exports.createElement(x,{className:"".concat(e,"-holder"),style:m,ref:P,onScroll:$e},o.exports.createElement(Ve,{prefixCls:e,height:j,offset:ve,onInnerResize:fe,ref:ce,innerProps:$},ue)),E&&o.exports.createElement(qe,{ref:K,prefixCls:e,scrollTop:H,height:a,scrollHeight:j,count:S.length,onScroll:Ce,onStartMove:function(){D(!0)},onStopMove:function(){D(!1)}}))}var ft=o.exports.forwardRef(ct);ft.displayName="List";var Ae=o.exports.forwardRef(function(r,v){var u=r.height,e=r.offset,f=r.children,a=r.prefixCls,l=r.onInnerResize,t={},n={display:"flex",flexDirection:"column"};return e!==void 0&&(t={height:u,position:"relative",overflow:"hidden"},n=Y(Y({},n),{},{transform:"translateY(".concat(e,"px)"),position:"absolute",left:0,right:0,top:0})),o.exports.createElement("div",{style:t},o.exports.createElement(We,{onResize:function(c){var s=c.offsetHeight;s&&l&&l()}},o.exports.createElement("div",{style:n,className:G(A({},"".concat(a,"-holder-inner"),a)),ref:v},f)))});Ae.displayName="Filler";var vt=20;function Ue(r){return"touches"in r?r.touches[0].pageY:r.pageY}var ht=function(r){Ye(u,r);var v=Oe(u);function u(){var e;Ee(this,u);for(var f=arguments.length,a=new Array(f),l=0;l<f;l++)a[l]=arguments[l];return e=v.call.apply(v,[this].concat(a)),e.moveRaf=null,e.scrollbarRef=o.exports.createRef(),e.thumbRef=o.exports.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout(function(){e.setState({visible:!1})},2e3)},e.onScrollbarTouchStart=function(t){t.preventDefault()},e.onContainerMouseDown=function(t){t.stopPropagation(),t.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),(t=e.scrollbarRef.current)===null||t===void 0||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),w.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:Ue(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,i=n.dragging,c=n.pageY,s=n.startTop,d=e.props.onScroll;if(w.cancel(e.moveRaf),i){var p=Ue(t)-c,g=s+p,x=e.getEnableScrollRange(),M=e.getEnableHeightRange(),C=M?g/M:0,$=Math.ceil(C*x);e.moveRaf=w(function(){d($)})}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,i=t.count,c=n/i*10;return c=Math.max(c,vt),c=Math.min(c,n/2),Math.floor(c)},e.getEnableScrollRange=function(){var t=e.props,n=t.scrollHeight,i=t.height;return n-i||0},e.getEnableHeightRange=function(){var t=e.props.height,n=e.getSpinHeight();return t-n||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),i=e.getEnableHeightRange();if(t===0||n===0)return 0;var c=t/n;return c*i},e.showScroll=function(){var t=e.props,n=t.height,i=t.scrollHeight;return i>n},e}return Te(u,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(f){f.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var f=this.state,a=f.dragging,l=f.visible,t=this.props.prefixCls,n=this.getSpinHeight(),i=this.getTop(),c=this.showScroll(),s=c&&l;return o.exports.createElement("div",{ref:this.scrollbarRef,className:G("".concat(t,"-scrollbar"),A({},"".concat(t,"-scrollbar-show"),c)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:s?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},o.exports.createElement("div",{ref:this.thumbRef,className:G("".concat(t,"-scrollbar-thumb"),A({},"".concat(t,"-scrollbar-thumb-moving"),a)),style:{width:"100%",height:n,top:i,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),u}(o.exports.Component);function dt(r){var v=r.children,u=r.setRef,e=o.exports.useCallback(function(f){u(f)},[]);return o.exports.cloneElement(v,{ref:e})}function pt(r,v,u,e,f,a){var l=a.getKey;return r.slice(v,u+1).map(function(t,n){var i=v+n,c=f(t,i,{}),s=l(t);return o.exports.createElement(dt,{key:s,setRef:function(p){return e(t,p)}},c)})}var gt=function(){function r(){Ee(this,r),this.maps=void 0,this.maps=Object.create(null)}return Te(r,[{key:"set",value:function(u,e){this.maps[u]=e}},{key:"get",value:function(u){return this.maps[u]}}]),r}();function mt(r,v,u){var e=o.exports.useState(0),f=L(e,2),a=f[0],l=f[1],t=o.exports.useRef(new Map),n=o.exports.useRef(new gt),i=o.exports.useRef();function c(){w.cancel(i.current)}function s(){c(),i.current=w(function(){t.current.forEach(function(p,g){if(p&&p.offsetParent){var x=Ke(p),M=x.offsetHeight;n.current.get(g)!==M&&n.current.set(g,x.offsetHeight)}}),l(function(p){return p+1})})}function d(p,g){var x=r(p),M=t.current.get(x);g?(t.current.set(x,g),s()):t.current.delete(x),!M!=!g&&(g?v==null||v(p):u==null||u(p))}return o.exports.useEffect(function(){return c},[]),[d,s,n.current,a]}function Rt(r,v,u,e,f,a,l,t){var n=o.exports.useRef();return function(i){if(i==null){t();return}if(w.cancel(n.current),typeof i=="number")l(i);else if(i&&He(i)==="object"){var c,s=i.align;"index"in i?c=i.index:c=v.findIndex(function(x){return f(x)===i.key});var d=i.offset,p=d===void 0?0:d,g=function x(M,C){if(!(M<0||!r.current)){var $=r.current.clientHeight,_=!1,E=C;if($){for(var z=C||s,F=0,T=0,H=0,Z=Math.min(v.length,c),k=0;k<=Z;k+=1){var W=f(v[k]);T=F;var N=u.get(W);H=T+(N===void 0?e:N),F=H,k===c&&N===void 0&&(_=!0)}var D=null;switch(z){case"top":D=T-p;break;case"bottom":D=H-$+p;break;default:{var b=r.current.scrollTop,S=b+$;T<b?E="top":H>S&&(E="bottom")}}D!==null&&D!==r.current.scrollTop&&l(D)}n.current=w(function(){_&&a(),x(M-1,E)})}};g(3)}}}function St(r,v,u){var e=r.length,f=v.length,a,l;if(e===0&&f===0)return null;e<f?(a=r,l=v):(a=v,l=r);var t={__EMPTY_ITEM__:!0};function n(g){return g!==void 0?u(g):t}for(var i=null,c=Math.abs(e-f)!==1,s=0;s<l.length;s+=1){var d=n(a[s]),p=n(l[s]);if(d!==p){i=s,c=c||d!==n(l[s+1]);break}}return i===null?null:{index:i,multiple:c}}function xt(r,v,u){var e=o.exports.useState(r),f=L(e,2),a=f[0],l=f[1],t=o.exports.useState(null),n=L(t,2),i=n[0],c=n[1];return o.exports.useEffect(function(){var s=St(a||[],r||[],v);(s==null?void 0:s.index)!==void 0&&(u==null||u(s.index),c(r[s.index])),l(r)},[r]),[i]}var Mt=(typeof navigator>"u"?"undefined":He(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Ge=function(r,v){var u=o.exports.useRef(!1),e=o.exports.useRef(null);function f(){clearTimeout(e.current),u.current=!0,e.current=setTimeout(function(){u.current=!1},50)}var a=o.exports.useRef({top:r,bottom:v});return a.current.top=r,a.current.bottom=v,function(l){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=l<0&&a.current.top||l>0&&a.current.bottom;return t&&n?(clearTimeout(e.current),u.current=!1):(!n||u.current)&&f(),!u.current&&n}};function bt(r,v,u,e){var f=o.exports.useRef(0),a=o.exports.useRef(null),l=o.exports.useRef(null),t=o.exports.useRef(!1),n=Ge(v,u);function i(s){if(!!r){w.cancel(a.current);var d=s.deltaY;f.current+=d,l.current=d,!n(d)&&(Mt||s.preventDefault(),a.current=w(function(){var p=t.current?10:1;e(f.current*p),f.current=0}))}}function c(s){!r||(t.current=s.detail===l.current)}return[i,c]}var Et=14/15;function Tt(r,v,u){var e=o.exports.useRef(!1),f=o.exports.useRef(0),a=o.exports.useRef(null),l=o.exports.useRef(null),t,n=function(d){if(e.current){var p=Math.ceil(d.touches[0].pageY),g=f.current-p;f.current=p,u(g)&&d.preventDefault(),clearInterval(l.current),l.current=setInterval(function(){g*=Et,(!u(g,!0)||Math.abs(g)<=.1)&&clearInterval(l.current)},16)}},i=function(){e.current=!1,t()},c=function(d){t(),d.touches.length===1&&!e.current&&(e.current=!0,f.current=Math.ceil(d.touches[0].pageY),a.current=d.target,a.current.addEventListener("touchmove",n),a.current.addEventListener("touchend",i))};t=function(){a.current&&(a.current.removeEventListener("touchmove",n),a.current.removeEventListener("touchend",i))},se(function(){return r&&v.current.addEventListener("touchstart",c),function(){var s;(s=v.current)===null||s===void 0||s.removeEventListener("touchstart",c),t(),clearInterval(l.current)}},[r])}var Ht=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange"],yt=[],wt={overflowY:"auto",overflowAnchor:"none"};function _t(r,v){var u=r.prefixCls,e=u===void 0?"rc-virtual-list":u,f=r.className,a=r.height,l=r.itemHeight,t=r.fullHeight,n=t===void 0?!0:t,i=r.style,c=r.data,s=r.children,d=r.itemKey,p=r.virtual,g=r.component,x=g===void 0?"div":g,M=r.onScroll,C=r.onVisibleChange,$=ze(r,Ht),_=!!(p!==!1&&a&&l),E=_&&c&&l*c.length>a,z=o.exports.useState(0),F=L(z,2),T=F[0],H=F[1],Z=o.exports.useState(!1),k=L(Z,2),W=k[0],N=k[1],D=G(e,f),b=c||yt,S=o.exports.useRef(),P=o.exports.useRef(),ce=o.exports.useRef(),K=o.exports.useCallback(function(m){return typeof d=="function"?d(m):m==null?void 0:m[d]},[d]),q={getKey:K};function ee(m){H(function(h){var R;typeof m=="function"?R=m(h):R=m;var y=he(R);return S.current.scrollTop=y,y})}var B=o.exports.useRef({start:0,end:b.length}),pe=o.exports.useRef(),ye=xt(b,K),we=L(ye,1),_e=we[0];pe.current=_e;var De=mt(K,null,null),te=L(De,4),re=te[0],ge=te[1],fe=te[2],me=te[3],ne=o.exports.useMemo(function(){if(!_)return{scrollHeight:void 0,start:0,end:b.length-1,offset:void 0};if(!E){var m;return{scrollHeight:((m=P.current)===null||m===void 0?void 0:m.offsetHeight)||0,start:0,end:b.length-1,offset:void 0}}for(var h=0,R,y,I,U=b.length,Q=0;Q<U;Q+=1){var X=b[Q],ke=K(X),be=fe.get(ke),le=h+(be===void 0?l:be);le>=T&&R===void 0&&(R=Q,y=h),le>T+a&&I===void 0&&(I=Q),h=le}return R===void 0&&(R=0,y=0,I=Math.ceil(a/l)),I===void 0&&(I=b.length-1),I=Math.min(I+1,b.length),{scrollHeight:h,start:R,end:I,offset:y}},[E,_,T,b,me,a]),V=ne.scrollHeight,j=ne.start,O=ne.end,oe=ne.offset;B.current.start=j,B.current.end=O;var ve=V-a,J=o.exports.useRef(ve);J.current=ve;function he(m){var h=m;return Number.isNaN(J.current)||(h=Math.min(h,J.current)),h=Math.max(h,0),h}var Re=T<=0,de=T>=ve,Se=Ge(Re,de);function Le(m){var h=m;ee(h)}function Ce(m){var h=m.currentTarget.scrollTop;h!==T&&ee(h),M==null||M(m)}var $e=bt(_,Re,de,function(m){ee(function(h){var R=h+m;return R})}),xe=L($e,2),ae=xe[0],ie=xe[1];Tt(_,S,function(m,h){return Se(m,h)?!1:(ae({preventDefault:function(){},deltaY:m}),!0)}),se(function(){function m(h){_&&h.preventDefault()}return S.current.addEventListener("wheel",ae),S.current.addEventListener("DOMMouseScroll",ie),S.current.addEventListener("MozMousePixelScroll",m),function(){S.current&&(S.current.removeEventListener("wheel",ae),S.current.removeEventListener("DOMMouseScroll",ie),S.current.removeEventListener("MozMousePixelScroll",m))}},[_]);var Me=Rt(S,b,fe,l,K,ge,ee,function(){var m;(m=ce.current)===null||m===void 0||m.delayHidden()});o.exports.useImperativeHandle(v,function(){return{scrollTo:Me}}),se(function(){if(C){var m=b.slice(j,O+1);C(m,b)}},[j,O,b]);var Ie=pt(b,j,O,re,s,q),ue=null;return a&&(ue=Y(A({},n?"height":"maxHeight",a),wt),_&&(ue.overflowY="hidden",W&&(ue.pointerEvents="none"))),o.exports.createElement("div",Ne({style:Y(Y({},i),{},{position:"relative"}),className:D},$),o.exports.createElement(x,{className:"".concat(e,"-holder"),style:ue,ref:S,onScroll:Ce},o.exports.createElement(Ae,{prefixCls:e,height:V,offset:oe,onInnerResize:ge,ref:P},Ie)),_&&o.exports.createElement(ht,{ref:ce,prefixCls:e,scrollTop:T,height:a,scrollHeight:V,count:b.length,onScroll:Le,onStartMove:function(){N(!0)},onStopMove:function(){N(!1)}}))}var Dt=o.exports.forwardRef(_t);Dt.displayName="List";export{ft as L,Dt as a};
