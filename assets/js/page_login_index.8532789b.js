import{r as s,j as t}from"./react.a7da97a2.js";import{a as r}from"./react-redux.5cd65198.js";import{T as o,P as e}from"./components_Business.9d39360a.js";import{g as i,p as n,s as m,a,L as p,u as c,b as l,l as j}from"./layouts.0069338d.js";import{u as d}from"./page_content_article.c0ef286a.js";import{u,s as g}from"./components_Fullscreen.2bfa9107.js";import{c as h,u as x}from"./components_GlobalSearch.432ec2c3.js";import{I as _}from"./components_I18n.3506ce08.js";import{u as f}from"./react-i18next.1d91db1a.js";import{u as b}from"./react-router.31c22429.js";import{m as y,F as w,I as k,B as v}from"./antd.aa967287.js";import{Z as N,_ as F}from"./@ant-design_icons.7fe075eb.js";import"./@babel_runtime.d775819b.js";import"./react-dom.cfbe57ec.js";import"./scheduler.c51d43b5.js";import"./hoist-non-react-statics.b23c5de2.js";import"./react-is.90ab392a.js";import"./use-sync-external-store.dbd3228b.js";import"./components_Form.503a7402.js";import"./components_Dates.a56ec33f.js";import"./dayjs.ff0d32ce.js";import"./components_Selects.79bf220c.js";import"./components_Transfer.35b1d4af.js";import"./components_PasswordStrength.4cf85e0f.js";import"./ahooks.80a0312c.js";import"./lodash.f155d9e4.js";import"./tslib.c9a5fa8e.js";import"./resize-observer-polyfill.ad543aa3.js";import"./components_WangEditor.ca776220.js";import"./@wangeditor_editor.4b26d4e5.js";import"./@wangeditor_editor-for-react.2b027529.js";import"./crypto-js.07c9f78c.js";import"./axios.743c2fba.js";import"./@iconify_react.bcaf6c88.js";import"./@reduxjs_toolkit.fb91ade4.js";import"./immer.269227bb.js";import"./redux.345203f6.js";import"./redux-thunk.b3d00609.js";import"./react-activation.cb49eacd.js";import"./szfe-tools.83ebc5a8.js";import"./create-react-context.3ef34c67.js";import"./prop-types.b55ce3dc.js";import"./gud.e7728936.js";import"./warning.008c4a7c.js";import"./react-node-key.23b4b3b4.js";import"./components_DataScreen.45300580.js";import"./components_Github.94cf38e3.js";import"./components_Theme.e67a418a.js";import"./components_Modal.c4aa4ca5.js";import"./react-draggable.5729c172.js";import"./clsx.9a62146f.js";import"./page_403.tsx_index.d02b6829.js";import"./page_all.module.less_used_index.64a5bd38.js";import"./@remix-run_router.1d5183a9.js";import"./rc-util.b2252098.js";import"./@ant-design_cssinjs.3a9c1ed6.js";import"./@emotion_hash.b17c1a96.js";import"./@emotion_unitless.ede54c47.js";import"./stylis.b6f45693.js";import"./classnames.71976509.js";import"./rc-resize-observer.5e6ad543.js";import"./rc-motion.477113fa.js";import"./rc-notification.670f9b6a.js";import"./@ant-design_icons-svg.e0482074.js";import"./@ant-design_colors.b9432bc2.js";import"./@ctrl_tinycolor.4982d949.js";import"./rc-picker.393de4c8.js";import"./@rc-component_trigger.52678524.js";import"./@rc-component_portal.e0cb7306.js";import"./rc-tabs.f64c38e1.js";import"./rc-dropdown.02f0e73a.js";import"./rc-menu.67811a74.js";import"./rc-overflow.08e2f92e.js";import"./rc-select.d5a0882c.js";import"./rc-virtual-list.e4d0feea.js";import"./rc-input-number.be5f41a2.js";import"./@rc-component_mini-decimal.bd81c0df.js";import"./rc-input.8d9b8356.js";import"./rc-drawer.4525c61f.js";import"./rc-field-form.86aa9db1.js";import"./async-validator.cf877c1f.js";import"./scroll-into-view-if-needed.60bf512d.js";import"./compute-scroll-into-view.9a30535a.js";import"./rc-dialog.0f205f75.js";import"./rc-rate.c47b70ed.js";import"./rc-slider.337b561a.js";import"./rc-switch.8ee44e1d.js";import"./rc-table.621080da.js";import"./@rc-component_context.841e506c.js";import"./throttle-debounce.ba017292.js";import"./rc-checkbox.73b8521d.js";import"./rc-tree.ae71b273.js";import"./rc-pagination.54fb8829.js";import"./rc-textarea.6625024f.js";import"./rc-tree-select.56847ad5.js";import"./rc-upload.0d2a507c.js";import"./rc-progress.92904c9d.js";import"./rc-tooltip.3da92da3.js";import"./components_Buttons.9ccf0743.js";import"./components_Content.22208330.js";import"./components_Search.6afcd9e0.js";import"./components_Table.e3671259.js";import"./react-resizable.98b97b0f.js";import"./components_Pagination.2e6acdd5.js";import"./components_Count.a83ac5a4.js";import"./components_Bottom.92b8a977.js";function I(){const{t:I}=f();d(I,I("login.login"));const S=b(),z=r(),[B,C]=c(),[E,P]=s.useState(!1),[T,L]=y.useMessage(),{permissions:q,menuList:D}=u(),G=localStorage.getItem(o)||"light";s.useEffect((()=>{G||localStorage.setItem(o,"light"),"dark"===G&&(document.body.className="theme-dark"),z(g("dark"===G?"dark":"light"))}),[G]),s.useEffect((()=>{B()&&(q.length?O(q):M())}),[]);const M=async()=>{try{P(!0);const{code:s,data:t}=await i({refresh_cache:!1});if(200!==Number(s))return;const{user:r,permissions:o}=t,e=n(o);z(m(r)),z(a(e)),O(e)}finally{P(!1)}},O=async s=>{let t=D;(null==t?void 0:t.length)||(t=await(async()=>{if(null==D?void 0:D.length)return D;let s=[];try{P(!0);const{code:t,data:r}=await l();if(200!==Number(t))return;z(x(r||[])),s=r}finally{P(!1)}return s})());const r=h(t,s);if(!r)return T.error({content:I("login.notPermissions"),key:"permissions"});S(r)};return t.jsxs(t.Fragment,{children:[L,t.jsxs("div",{className:`\n        ${"dark"===G?"bg-black text-white":"bg-light-400"}\n        w-screen\n        h-screen\n        relative\n      `,children:[t.jsx("div",{className:"absolute top-5 right-5",children:t.jsx(_,{})}),t.jsxs("div",{className:`\n          w-300px\n          h-290px\n          p-30px\n          rounded-5px\n          ${"dark"===G?"bg-black bg-dark-200":"bg-white"}\n          box-border\n          absolute\n          left-1/2\n          top-1/2\n          -translate-x-1/2\n          -translate-y-1/2\n        `,children:[t.jsxs("div",{className:"pb-30px pt-10px flex items-center justify-center",children:[t.jsx("img",{className:"mr-2 object-contain",width:"30",height:"30",src:p,alt:"LOGO"}),t.jsx("span",{className:"text-xl font-bold tracking-2px",children:I("login.systemLogin")})]}),t.jsxs(w,{name:"horizontal_login",autoComplete:"on",onFinish:async s=>{try{P(!0);const{code:t,data:r}=await j(s);if(200!==Number(t))return;const{token:o,user:e,permissions:i}=r;if(!(null==i?void 0:i.length)||!o)return T.error({content:I("login.notPermissions"),key:"permissions"});const p=n(i);C(o),z(m(e)),z(a(p)),O(p)}finally{P(!1)}},onFinishFailed:s=>{},initialValues:{username:"admin",password:"admin123456"},children:[t.jsx(w.Item,{name:"username",rules:[{required:!0,message:I("public.pleaseEnter",{name:I("login.username")})}],children:t.jsx(k,{"allow-clear":"true",placeholder:I("login.username"),"data-test":"username",autoComplete:"username",addonBefore:t.jsx(N,{className:"change"})})}),t.jsx(w.Item,{name:"password",rules:[{required:!0,message:I("public.pleaseEnter",{name:I("login.password")})},e(I)],children:t.jsx(k.Password,{placeholder:I("login.password"),autoComplete:"current-password",addonBefore:t.jsx(F,{className:"change"})})}),t.jsx(w.Item,{children:t.jsx(v,{type:"primary",htmlType:"submit",className:"w-full mt-5px rounded-5px tracking-2px",loading:E,children:I("login.login")})})]})]})]})]})}export{I as default};
