import{r as h,R as r}from"./react.e58b2294.js";import{c as _}from"./classnames.2e4736b8.js";import{d as Q,b as x,g as p,c as ne,f as U,h as X,e as ae}from"./@babel_runtime.e25cf7a0.js";import{j as te,o as le}from"./rc-util.32467b8b.js";function P(e){return!!(e.addonBefore||e.addonAfter)}function ee(e){return!!(e.prefix||e.suffix||e.allowClear)}function Y(e,n,c,o){if(c){var t=n;if(n.type==="click"){var s=e.cloneNode(!0);t=Object.create(n,{target:{value:s},currentTarget:{value:s}}),s.value="",c(t);return}if(o!==void 0){t=Object.create(n,{target:{value:e},currentTarget:{value:e}}),e.value=o,c(t);return}c(t)}}function ue(e,n){if(e){e.focus(n);var c=n||{},o=c.cursor;if(o){var t=e.value.length;switch(o){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(t,t);break;default:e.setSelectionRange(0,t)}}}}function Z(e){return typeof e>"u"||e===null?"":String(e)}var re=function(n){var c,o=n.inputElement,t=n.prefixCls,s=n.prefix,y=n.suffix,b=n.addonBefore,I=n.addonAfter,g=n.className,N=n.style,V=n.affixWrapperClassName,K=n.groupClassName,B=n.wrapperClassName,S=n.disabled,E=n.readOnly,M=n.focused,F=n.triggerFocus,f=n.allowClear,m=n.value,H=n.handleReset,D=n.hidden,d=n.inputStyle,i=n.classes,k=h.useRef(null),T=function(C){var l;(l=k.current)!==null&&l!==void 0&&l.contains(C.target)&&(F==null||F())},z=function(){var C;if(!f)return null;var l=!S&&!E&&m,a="".concat(t,"-clear-icon"),R=p(f)==="object"&&f!==null&&f!==void 0&&f.clearIcon?f.clearIcon:"âœ–";return r.createElement("span",{onClick:H,onMouseDown:function(w){return w.preventDefault()},className:_(a,(C={},x(C,"".concat(a,"-hidden"),!l),x(C,"".concat(a,"-has-suffix"),!!y),C)),role:"button",tabIndex:-1},R)},j=h.cloneElement(o,{value:m,hidden:D,style:Q(Q({},(c=o.props)===null||c===void 0?void 0:c.style),d)});if(ee(n)){var v,u="".concat(t,"-affix-wrapper"),A=_(u,(v={},x(v,"".concat(u,"-disabled"),S),x(v,"".concat(u,"-focused"),M),x(v,"".concat(u,"-readonly"),E),x(v,"".concat(u,"-input-with-clear-btn"),y&&f&&m),v),!P(n)&&g,V,i==null?void 0:i.affixWrapper),W=(y||f)&&r.createElement("span",{className:"".concat(t,"-suffix")},z(),y);j=r.createElement("span",{className:A,style:N,hidden:!P(n)&&D,onClick:T,ref:k},s&&r.createElement("span",{className:"".concat(t,"-prefix")},s),h.cloneElement(o,{style:d??null,value:m,hidden:null}),W)}if(P(n)){var O="".concat(t,"-group"),L="".concat(O,"-addon"),q=_("".concat(t,"-wrapper"),O,B,i==null?void 0:i.wrapper),G=_("".concat(t,"-group-wrapper"),g,K,i==null?void 0:i.group);return r.createElement("span",{className:G,style:N,hidden:D},r.createElement("span",{className:q},b&&r.createElement("span",{className:L},b),h.cloneElement(j,{style:d??null,hidden:null}),I&&r.createElement("span",{className:L},I)))}return j},ce=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName","classes"],de=h.forwardRef(function(e,n){var c=e.autoComplete,o=e.onChange,t=e.onFocus,s=e.onBlur,y=e.onPressEnter,b=e.onKeyDown,I=e.prefixCls,g=I===void 0?"rc-input":I,N=e.disabled,V=e.htmlSize,K=e.className,B=e.maxLength,S=e.suffix,E=e.showCount,M=e.type,F=M===void 0?"text":M,f=e.inputClassName,m=e.classes,H=ne(e,ce),D=te(e.defaultValue,{value:e.value}),d=U(D,2),i=d[0],k=d[1],T=h.useState(!1),z=U(T,2),j=z[0],v=z[1],u=h.useRef(null),A=function(a){u.current&&ue(u.current,a)};h.useImperativeHandle(n,function(){return{focus:A,blur:function(){var a;(a=u.current)===null||a===void 0||a.blur()},setSelectionRange:function(a,R,$){var w;(w=u.current)===null||w===void 0||w.setSelectionRange(a,R,$)},select:function(){var a;(a=u.current)===null||a===void 0||a.select()},input:u.current}}),h.useEffect(function(){v(function(l){return l&&N?!1:l})},[N]);var W=function(a){e.value===void 0&&k(a.target.value),u.current&&Y(u.current,a,o)},O=function(a){y&&a.key==="Enter"&&y(a),b==null||b(a)},L=function(a){v(!0),t==null||t(a)},q=function(a){v(!1),s==null||s(a)},G=function(a){k(""),A(),u.current&&Y(u.current,a,o)},J=function(){var a=le(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","classes","wrapperClassName","htmlSize"]);return r.createElement("input",X({autoComplete:c},a,{onChange:W,onFocus:L,onBlur:q,onKeyDown:O,className:_(g,x({},"".concat(g,"-disabled"),N),f,m==null?void 0:m.input,!P(e)&&!ee(e)&&K),ref:u,size:V,type:F}))},C=function(){var a=Number(B)>0;if(S||E){var R=Z(i),$=ae(R).length,w=p(E)==="object"?E.formatter({value:R,count:$,maxLength:B}):"".concat($).concat(a?" / ".concat(B):"");return r.createElement(r.Fragment,null,!!E&&r.createElement("span",{className:_("".concat(g,"-show-count-suffix"),x({},"".concat(g,"-show-count-has-suffix"),!!S))},w),S)}return null};return r.createElement(re,X({},H,{prefixCls:g,className:K,inputElement:J(),handleReset:G,value:Z(i),focused:j,triggerFocus:A,suffix:C(),disabled:N,classes:m}))});export{re as B,de as I,Z as f,Y as r};
