import{l as e,j as n,b as t,h as r,g as a,i as u,f as o}from"./@babel_runtime@7.24.7.uphKh7BM.js";import{c as l}from"./classnames@2.5.1.Xo58IrnT.js";import{K as c,b as i,A as s,E as f,i as d}from"./rc-util@5.43.0_react-dom@18.3.1_react@18.3.1.bvtOFkwB.js";import{r as v}from"./react@18.3.1.zIIbIvjs.js";function m(e,n,t){return(e-n)/(t-n)}function h(e,n,t,r){var a=m(n,t,r),u={};switch(e){case"rtl":u.right="".concat(100*a,"%"),u.transform="translateX(50%)";break;case"btt":u.bottom="".concat(100*a,"%"),u.transform="translateY(50%)";break;case"ttb":u.top="".concat(100*a,"%"),u.transform="translateY(-50%)";break;default:u.left="".concat(100*a,"%"),u.transform="translateX(-50%)"}return u}function g(e,n){return Array.isArray(e)?e[n]:e}var b=v.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),p=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],y=v.forwardRef((function(a,u){var o,i=a.prefixCls,s=a.value,f=a.valueIndex,d=a.onStartMove,m=a.style,y=a.render,x=a.dragging,E=a.onOffsetChange,C=a.onChangeComplete,k=a.onFocus,M=a.onMouseEnter,S=e(a,p),F=v.useContext(b),w=F.min,N=F.max,L=F.direction,R=F.disabled,H=F.keyboard,I=F.range,D=F.tabIndex,O=F.ariaLabelForHandle,P=F.ariaLabelledByForHandle,A=F.ariaValueTextFormatterForHandle,T=F.styles,B=F.classNames,j="".concat(i,"-handle"),X=function(e){R||d(e,f)},Y=h(L,s,w,N),_={};null!==f&&(_={tabIndex:R?null:g(D,f),role:"slider","aria-valuemin":w,"aria-valuemax":N,"aria-valuenow":s,"aria-disabled":R,"aria-label":g(O,f),"aria-labelledby":g(P,f),"aria-valuetext":null===(o=g(A,f))||void 0===o?void 0:o(s),"aria-orientation":"ltr"===L||"rtl"===L?"horizontal":"vertical",onMouseDown:X,onTouchStart:X,onFocus:function(e){null==k||k(e,f)},onMouseEnter:function(e){M(e,f)},onKeyDown:function(e){if(!R&&H){var n=null;switch(e.which||e.keyCode){case c.LEFT:n="ltr"===L||"btt"===L?-1:1;break;case c.RIGHT:n="ltr"===L||"btt"===L?1:-1;break;case c.UP:n="ttb"!==L?1:-1;break;case c.DOWN:n="ttb"!==L?-1:1;break;case c.HOME:n="min";break;case c.END:n="max";break;case c.PAGE_UP:n=2;break;case c.PAGE_DOWN:n=-2}null!==n&&(e.preventDefault(),E(n,f))}},onKeyUp:function(e){switch(e.which||e.keyCode){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:case c.HOME:case c.END:case c.PAGE_UP:case c.PAGE_DOWN:null==C||C()}}});var G=v.createElement("div",n({ref:u,className:l(j,t(t({},"".concat(j,"-").concat(f+1),null!==f&&I),"".concat(j,"-dragging"),x),B.handle),style:r(r(r({},Y),m),T.handle)},_,S));return y&&(G=y(G,{index:f,prefixCls:i,value:s,dragging:x})),G})),x=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","onFocus"],E=v.forwardRef((function(t,u){var o=t.prefixCls,l=t.style,c=t.onStartMove,i=t.onOffsetChange,s=t.values,f=t.handleRender,d=t.activeHandleRender,m=t.draggingIndex,h=t.onFocus,b=e(t,x),p=v.useRef({});v.useImperativeHandle(u,(function(){return{focus:function(e){var n;null===(n=p.current[e])||void 0===n||n.focus()}}}));var E=v.useState(-1),C=a(E,2),k=C[0],M=C[1],S=r({prefixCls:o,onStartMove:c,onOffsetChange:i,render:f,onFocus:function(e,n){M(n),null==h||h(e)},onMouseEnter:function(e,n){M(n)}},b);return v.createElement(v.Fragment,null,s.map((function(e,t){return v.createElement(y,n({ref:function(e){e?p.current[t]=e:delete p.current[t]},dragging:m===t,style:g(l,t),key:t,value:e,valueIndex:t},S))})),d&&v.createElement(y,n({key:"a11y"},S,{value:s[k],valueIndex:null,dragging:-1!==m,render:d,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))})),C=function(e){var n=e.prefixCls,a=e.style,u=e.children,o=e.value,c=e.onClick,i=v.useContext(b),s=i.min,f=i.max,d=i.direction,m=i.includedStart,g=i.includedEnd,p=i.included,y="".concat(n,"-text"),x=h(d,o,s,f);return v.createElement("span",{className:l(y,t({},"".concat(y,"-active"),p&&m<=o&&o<=g)),style:r(r({},x),a),onMouseDown:function(e){e.stopPropagation()},onClick:function(){c(o)}},u)},k=function(e){var n=e.prefixCls,t=e.marks,r=e.onClick,a="".concat(n,"-mark");return t.length?v.createElement("div",{className:a},t.map((function(e){var n=e.value,t=e.style,u=e.label;return v.createElement(C,{key:n,prefixCls:a,style:t,value:n,onClick:r},u)}))):null},M=function(e){var n=e.prefixCls,a=e.value,u=e.style,o=e.activeStyle,c=v.useContext(b),i=c.min,s=c.max,f=c.direction,d=c.included,m=c.includedStart,g=c.includedEnd,p="".concat(n,"-dot"),y=d&&m<=a&&a<=g,x=r(r({},h(f,a,i,s)),"function"==typeof u?u(a):u);return y&&(x=r(r({},x),"function"==typeof o?o(a):o)),v.createElement("span",{className:l(p,t({},"".concat(p,"-active"),y)),style:x})},S=function(e){var n=e.prefixCls,t=e.marks,r=e.dots,a=e.style,u=e.activeStyle,o=v.useContext(b),l=o.min,c=o.max,i=o.step,s=v.useMemo((function(){var e=new Set;if(t.forEach((function(n){e.add(n.value)})),r&&null!==i)for(var n=l;n<=c;)e.add(n),n+=i;return Array.from(e)}),[l,c,i,r,t]);return v.createElement("div",{className:"".concat(n,"-step")},s.map((function(e){return v.createElement(M,{prefixCls:n,key:e,value:e,style:a,activeStyle:u})})))},F=function(e){var n=e.prefixCls,a=e.style,u=e.start,o=e.end,c=e.index,i=e.onStartMove,s=e.replaceCls,f=v.useContext(b),d=f.direction,h=f.min,g=f.max,p=f.disabled,y=f.range,x=f.classNames,E="".concat(n,"-track"),C=m(u,h,g),k=m(o,h,g),M=function(e){!p&&i&&i(e,-1)},S={};switch(d){case"rtl":S.right="".concat(100*C,"%"),S.width="".concat(100*k-100*C,"%");break;case"btt":S.bottom="".concat(100*C,"%"),S.height="".concat(100*k-100*C,"%");break;case"ttb":S.top="".concat(100*C,"%"),S.height="".concat(100*k-100*C,"%");break;default:S.left="".concat(100*C,"%"),S.width="".concat(100*k-100*C,"%")}var F=s||l(E,t(t({},"".concat(E,"-").concat(c+1),null!==c&&y),"".concat(n,"-track-draggable"),i),x.track);return v.createElement("div",{className:F,style:r(r({},S),a),onMouseDown:M,onTouchStart:M})},w=function(e){var n=e.prefixCls,t=e.style,a=e.values,u=e.startPoint,o=e.onStartMove,c=v.useContext(b),i=c.included,s=c.range,f=c.min,d=c.styles,m=c.classNames,h=v.useMemo((function(){if(!s){if(0===a.length)return[];var e=null!=u?u:f,n=a[0];return[{start:Math.min(e,n),end:Math.max(e,n)}]}for(var t=[],r=0;r<a.length-1;r+=1)t.push({start:a[r],end:a[r+1]});return t}),[a,s,u,f]);if(!i)return null;var p=m.tracks||d.tracks?v.createElement(F,{index:null,prefixCls:n,start:h[0].start,end:h[h.length-1].end,replaceCls:l(m.tracks,"".concat(n,"-tracks")),style:d.tracks}):null;return v.createElement(v.Fragment,null,p,h.map((function(e,a){var u=e.start,l=e.end;return v.createElement(F,{index:a,prefixCls:n,style:r(r({},g(t,a)),d.track),start:u,end:l,key:a,onStartMove:o})})))};function N(e){var n="touches"in e?e.touches[0]:e;return{pageX:n.pageX,pageY:n.pageY}}var L=v.forwardRef((function(e,n){var c=e.prefixCls,m=void 0===c?"rc-slider":c,h=e.className,g=e.style,p=e.classNames,y=e.styles,x=e.disabled,C=void 0!==x&&x,M=e.keyboard,F=void 0===M||M,L=e.autoFocus,R=e.onFocus,H=e.onBlur,I=e.min,D=void 0===I?0:I,O=e.max,P=void 0===O?100:O,A=e.step,T=void 0===A?1:A,B=e.value,j=e.defaultValue,X=e.range,Y=e.count,_=e.onChange,G=e.onBeforeChange,U=e.onAfterChange,V=e.onChangeComplete,W=e.allowCross,K=void 0===W||W,z=e.pushable,q=void 0!==z&&z,J=e.draggableTrack,Q=e.reverse,Z=e.vertical,$=e.included,ee=void 0===$||$,ne=e.startPoint,te=e.trackStyle,re=e.handleStyle,ae=e.railStyle,ue=e.dotStyle,oe=e.activeDotStyle,le=e.marks,ce=e.dots,ie=e.handleRender,se=e.activeHandleRender,fe=e.tabIndex,de=void 0===fe?0:fe,ve=e.ariaLabelForHandle,me=e.ariaLabelledByForHandle,he=e.ariaValueTextFormatterForHandle,ge=v.useRef(null),be=v.useRef(null),pe=v.useMemo((function(){return Z?Q?"ttb":"btt":Q?"rtl":"ltr"}),[Q,Z]),ye=v.useMemo((function(){return isFinite(D)?D:0}),[D]),xe=v.useMemo((function(){return isFinite(P)?P:100}),[P]),Ee=v.useMemo((function(){return null!==T&&T<=0?1:T}),[T]),Ce=v.useMemo((function(){return"boolean"==typeof q?!!q&&Ee:q>=0&&q}),[q,Ee]),ke=v.useMemo((function(){return Object.keys(le||{}).map((function(e){var n=le[e],t={value:Number(e)};return n&&"object"===o(n)&&!v.isValidElement(n)&&("label"in n||"style"in n)?(t.style=n.style,t.label=n.label):t.label=n,t})).filter((function(e){var n=e.label;return n||"number"==typeof n})).sort((function(e,n){return e.value-n.value}))}),[le]),Me=function(e,n,t,r,a,o){var l=v.useCallback((function(t){return Math.max(e,Math.min(n,t))}),[e,n]),c=v.useCallback((function(r){if(null!==t){var a=e+Math.round((l(r)-e)/t)*t,u=function(e){return(String(e).split(".")[1]||"").length},o=Math.max(u(t),u(n),u(e)),c=Number(a.toFixed(o));return e<=c&&c<=n?c:null}return null}),[t,e,n,l]),i=v.useCallback((function(a){var u=l(a),o=r.map((function(e){return e.value}));null!==t&&o.push(c(a)),o.push(e,n);var i=o[0],s=n-e;return o.forEach((function(e){var n=Math.abs(u-e);n<=s&&(i=e,s=n)})),i}),[e,n,r,t,l,c]),s=function a(o,l,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof l){var f,d=o[i],v=d+l,m=[];r.forEach((function(e){m.push(e.value)})),m.push(e,n),m.push(c(d));var h=l>0?1:-1;"unit"===s?m.push(c(d+h*t)):m.push(c(v)),m=m.filter((function(e){return null!==e})).filter((function(e){return l<0?e<=d:e>=d})),"unit"===s&&(m=m.filter((function(e){return e!==d})));var g="unit"===s?d:v;f=m[0];var b=Math.abs(f-g);if(m.forEach((function(e){var n=Math.abs(e-g);n<b&&(f=e,b=n)})),void 0===f)return l<0?e:n;if("dist"===s)return f;if(Math.abs(l)>1){var p=u(o);return p[i]=f,a(p,l-h,i,s)}return f}return"min"===l?e:"max"===l?n:void 0},f=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",a=e[t],u=s(e,n,t,r);return{value:u,changed:u!==a}},d=function(e){return null===o&&0===e||"number"==typeof o&&e<o};return[i,function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",u=e.map(i),l=u[t],c=s(u,n,t,r);if(u[t]=c,!1===a){var v=o||0;t>0&&u[t-1]!==l&&(u[t]=Math.max(u[t],u[t-1]+v)),t<u.length-1&&u[t+1]!==l&&(u[t]=Math.min(u[t],u[t+1]-v))}else if("number"==typeof o||null===o){for(var m=t+1;m<u.length;m+=1)for(var h=!0;d(u[m]-u[m-1])&&h;){var g=f(u,1,m);u[m]=g.value,h=g.changed}for(var b=t;b>0;b-=1)for(var p=!0;d(u[b]-u[b-1])&&p;){var y=f(u,-1,b-1);u[b-1]=y.value,p=y.changed}for(var x=u.length-1;x>0;x-=1)for(var E=!0;d(u[x]-u[x-1])&&E;){var C=f(u,-1,x-1);u[x-1]=C.value,E=C.changed}for(var k=0;k<u.length-1;k+=1)for(var M=!0;d(u[k+1]-u[k])&&M;){var S=f(u,1,k+1);u[k+1]=S.value,M=S.changed}}return{value:u[t],values:u}}]}(ye,xe,Ee,ke,K,Ce),Se=a(Me,2),Fe=Se[0],we=Se[1],Ne=s(j,{value:B}),Le=a(Ne,2),Re=Le[0],He=Le[1],Ie=v.useMemo((function(){var e=null==Re?[]:Array.isArray(Re)?Re:[Re],n=a(e,1)[0],t=null===Re?[]:[void 0===n?ye:n];if(X){if(t=u(e),Y||void 0===Re){var r=Y>=0?Y+1:2;for(t=t.slice(0,r);t.length<r;){var o;t.push(null!==(o=t[t.length-1])&&void 0!==o?o:ye)}}t.sort((function(e,n){return e-n}))}return t.forEach((function(e,n){t[n]=Fe(e)})),t}),[Re,X,ye,Y,Fe]),De=v.useRef(Ie);De.current=Ie;var Oe=function(e){return X?e:e[0]},Pe=function(e){var n=u(e).sort((function(e,n){return e-n}));_&&!d(n,De.current,!0)&&_(Oe(n)),He(n)},Ae=function(){var e=Oe(De.current);null==U||U(e),f(!U,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==V||V(e)},Te=function(e,n,t,r,o,l,c,s,f){var d=v.useState(null),m=a(d,2),h=m[0],g=m[1],b=v.useState(-1),p=a(b,2),y=p[0],x=p[1],E=v.useState(t),C=a(E,2),k=C[0],M=C[1],S=v.useState(t),F=a(S,2),w=F[0],L=F[1],R=v.useRef(null),H=v.useRef(null);v.useLayoutEffect((function(){-1===y&&M(t)}),[t,y]),v.useEffect((function(){return function(){document.removeEventListener("mousemove",R.current),document.removeEventListener("mouseup",H.current),document.removeEventListener("touchmove",R.current),document.removeEventListener("touchend",H.current)}}),[]);var I=function(e,n){k.some((function(n,t){return n!==e[t]}))&&(void 0!==n&&g(n),M(e),c(e))},D=i((function(e,n){if(-1===e){var t=w[0],a=w[w.length-1],c=r-t,i=o-a,s=n*(o-r);s=Math.max(s,c),s=Math.min(s,i);var d=l(t+s);s=d-t;var v=w.map((function(e){return e+s}));I(v)}else{var m=(o-r)*n,h=u(k);h[e]=w[e];var g=f(h,m,e,"dist");I(g.values,g.value)}})),O=v.useMemo((function(){var e=u(t).sort((function(e,n){return e-n})),n=u(k).sort((function(e,n){return e-n}));return e.every((function(e,t){return e===n[t]}))?k:t}),[t,k]);return[y,h,O,function(r,a,u){r.stopPropagation();var o=u||t,l=o[a];x(a),g(l),L(o);var c=N(r),i=c.pageX,f=c.pageY,d=function(t){t.preventDefault();var r,u=N(t),o=u.pageX,l=u.pageY,c=o-i,s=l-f,d=e.current.getBoundingClientRect(),v=d.width,m=d.height;switch(n){case"btt":r=-s/m;break;case"ttb":r=s/m;break;case"rtl":r=-c/v;break;default:r=c/v}D(a,r)},v=function e(n){n.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",d),document.removeEventListener("touchend",e),document.removeEventListener("touchmove",d),R.current=null,H.current=null,x(-1),s()};document.addEventListener("mouseup",v),document.addEventListener("mousemove",d),document.addEventListener("touchend",v),document.addEventListener("touchmove",d),R.current=d,H.current=v}]}(be,pe,Ie,ye,xe,Fe,Pe,Ae,we),Be=a(Te,4),je=Be[0],Xe=Be[1],Ye=Be[2],_e=Be[3],Ge=function(e,n){if(!C){var t=0,r=xe-ye;Ie.forEach((function(n,a){var u=Math.abs(e-n);u<=r&&(r=u,t=a)}));var a,o,l=u(Ie);if(l[t]=e,X&&!Ie.length&&void 0===Y&&l.push(e),null==G||G(Oe(l)),Pe(l),n)null===(a=document.activeElement)||void 0===a||null===(o=a.blur)||void 0===o||o.call(a),ge.current.focus(t),_e(n,t,l)}},Ue=v.useState(null),Ve=a(Ue,2),We=Ve[0],Ke=Ve[1];v.useEffect((function(){if(null!==We){var e=Ie.indexOf(We);e>=0&&ge.current.focus(e)}Ke(null)}),[We]);var ze=v.useMemo((function(){return(!J||null!==Ee)&&J}),[J,Ee]),qe=function(e,n){_e(e,n),null==G||G(Oe(De.current))},Je=-1!==je;v.useEffect((function(){if(!Je){var e=Ie.lastIndexOf(Xe);ge.current.focus(e)}}),[Je]);var Qe=v.useMemo((function(){return u(Ye).sort((function(e,n){return e-n}))}),[Ye]),Ze=v.useMemo((function(){return X?[Qe[0],Qe[Qe.length-1]]:[ye,Qe[0]]}),[Qe,X,ye]),$e=a(Ze,2),en=$e[0],nn=$e[1];v.useImperativeHandle(n,(function(){return{focus:function(){ge.current.focus(0)},blur:function(){var e,n=document.activeElement;null!==(e=be.current)&&void 0!==e&&e.contains(n)&&(null==n||n.blur())}}})),v.useEffect((function(){L&&ge.current.focus(0)}),[]);var tn=v.useMemo((function(){return{min:ye,max:xe,direction:pe,disabled:C,keyboard:F,step:Ee,included:ee,includedStart:en,includedEnd:nn,range:X,tabIndex:de,ariaLabelForHandle:ve,ariaLabelledByForHandle:me,ariaValueTextFormatterForHandle:he,styles:y||{},classNames:p||{}}}),[ye,xe,pe,C,F,Ee,ee,en,nn,X,de,ve,me,he,y,p]);return v.createElement(b.Provider,{value:tn},v.createElement("div",{ref:be,className:l(m,h,t(t(t(t({},"".concat(m,"-disabled"),C),"".concat(m,"-vertical"),Z),"".concat(m,"-horizontal"),!Z),"".concat(m,"-with-marks"),ke.length)),style:g,onMouseDown:function(e){e.preventDefault();var n,t=be.current.getBoundingClientRect(),r=t.width,a=t.height,u=t.left,o=t.top,l=t.bottom,c=t.right,i=e.clientX,s=e.clientY;switch(pe){case"btt":n=(l-s)/a;break;case"ttb":n=(s-o)/a;break;case"rtl":n=(c-i)/r;break;default:n=(i-u)/r}Ge(Fe(ye+n*(xe-ye)),e)}},v.createElement("div",{className:l("".concat(m,"-rail"),null==p?void 0:p.rail),style:r(r({},ae),null==y?void 0:y.rail)}),v.createElement(w,{prefixCls:m,style:te,values:Qe,startPoint:ne,onStartMove:ze?qe:void 0}),v.createElement(S,{prefixCls:m,marks:ke,dots:ce,style:ue,activeStyle:oe}),v.createElement(E,{ref:ge,prefixCls:m,style:re,values:Ye,draggingIndex:je,onStartMove:qe,onOffsetChange:function(e,n){if(!C){var t=we(Ie,e,n);null==G||G(Oe(Ie)),Pe(t.values),Ke(t.value)}},onFocus:R,onBlur:H,handleRender:ie,activeHandleRender:se,onChangeComplete:Ae}),v.createElement(k,{prefixCls:m,marks:ke,onClick:Ge})))}));export{L as S};
