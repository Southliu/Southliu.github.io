import{m as t,k as e}from"./@babel_runtime@7.24.5.Ca03HZ34.js";import{c as n}from"./crypto-js@4.2.0.BceBo9fw.js";import{r as o}from"./cross-fetch@4.0.0.D-cYuY0D.js";function r(t,e){for(var n=0;n<e.length;n++){const o=e[n];if("string"!=typeof o&&!Array.isArray(o))for(const e in o)if("default"!==e&&!(e in t)){const n=Object.getOwnPropertyDescriptor(o,e);n&&Object.defineProperty(t,e,n.get?n:{enumerable:!0,get:()=>o[e]})}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":i(XMLHttpRequest))}var s={exports:{}};!function(e,r){var i;if("function"==typeof fetch&&(i=void 0!==t&&t.fetch?t.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),void 0!==n&&"undefined"==typeof window){var a=i||o();a.default&&(a=a.default),r.default=a,e.exports=r.default}}(s,s.exports);var c=s.exports;const f=e(c),u=r({__proto__:null,default:f},[c]);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){var o;return o=function(t,e){if("object"!=y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=y(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==y(o)?o:String(o))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h,b,v;"function"==typeof fetch&&(h="undefined"!=typeof global&&global.fetch?global.fetch:"undefined"!=typeof window&&window.fetch?window.fetch:fetch),a()&&("undefined"!=typeof global&&global.XMLHttpRequest?b=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(b=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?v=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(v=window.ActiveXObject)),h||!u||b||v||(h=f||u),"function"!=typeof h&&(h=void 0);var g=function(t,e){if(e&&"object"===y(e)){var n="";for(var o in e)n+="&"+encodeURIComponent(o)+"="+encodeURIComponent(e[o]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t},m=function(t,e,n,o){var r=function(t){if(!t.ok)return n(t.statusText||"Error",{status:t.status});t.text().then((function(e){n(null,{status:t.status,data:e})})).catch(n)};if(o){var i=o(t,e);if(i instanceof Promise)return void i.then(r).catch(n)}"function"==typeof fetch?fetch(t,e).then(r).catch(n):h(t,e).then(r).catch(n)},O=!1,w=function(t,e,n,o){return"function"==typeof n&&(o=n,n=void 0),o=o||function(){},h&&0!==e.indexOf("file:")?function(t,e,n,o){t.queryStringParams&&(e=g(e,t.queryStringParams));var r=p({},"function"==typeof t.customHeaders?t.customHeaders():t.customHeaders);"undefined"==typeof window&&"undefined"!=typeof global&&void 0!==global.process&&global.process.versions&&global.process.versions.node&&(r["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(r["Content-Type"]="application/json");var i="function"==typeof t.requestOptions?t.requestOptions(n):t.requestOptions,a=p({method:n?"POST":"GET",body:n?t.stringify(n):void 0,headers:r},O?{}:i),s="function"==typeof t.alternateFetch&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{m(e,a,o,s)}catch(c){if(!i||0===Object.keys(i).length||!c.message||c.message.indexOf("not implemented")<0)return o(c);try{Object.keys(i).forEach((function(t){delete a[t]})),m(e,a,o,s),O=!0}catch(f){o(f)}}}(t,e,n,o):a()||"function"==typeof ActiveXObject?function(t,e,n,o){n&&"object"===y(n)&&(n=g("",n).slice(1)),t.queryStringParams&&(e=g(e,t.queryStringParams));try{var r;(r=b?new b:new v("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",e,1),t.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.withCredentials=!!t.withCredentials,n&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.overrideMimeType&&r.overrideMimeType("application/json");var i=t.customHeaders;if(i="function"==typeof i?i():i)for(var a in i)r.setRequestHeader(a,i[a]);r.onreadystatechange=function(){r.readyState>3&&o(r.status>=400?r.statusText:null,{status:r.status,data:r.responseText})},r.send(n)}catch(s){console}}(t,e,n,o):void o(new Error("No fetch and no xhr implementation found!"))};function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function q(t,e,n){return e&&function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,H(o.key),o)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t,e,n){return(e=H(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H(t){var e=function(t,e){if("object"!=j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=j(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j(e)?e:String(e)}var T=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.services=e,this.options=n,this.allOptions=o,this.type="backend",this.init(e,n,o)}return q(t,[{key:"init",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=t,this.options=S(S(S({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,e,n){return k({},e,n||"")},parseLoadPayload:function(t,e){},request:w,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),n),this.allOptions=o,this.services&&this.options.reloadInterval&&setInterval((function(){return e.reload()}),this.options.reloadInterval)}},{key:"readMulti",value:function(t,e,n){this._readAny(t,t,e,e,n)}},{key:"read",value:function(t,e,n){this._readAny([t],t,[e],e,n)}},{key:"_readAny",value:function(t,e,n,o,r){var i,a=this,s=this.options.loadPath;"function"==typeof this.options.loadPath&&(s=this.options.loadPath(t,n)),(s=function(t){return!!t&&"function"==typeof t.then}(i=s)?i:Promise.resolve(i)).then((function(i){if(!i)return r(null,{});var s=a.services.interpolator.interpolate(i,{lng:t.join("+"),ns:n.join("+")});a.loadUrl(s,r,e,o)}))}},{key:"loadUrl",value:function(t,e,n,o){var r=this,i="string"==typeof n?[n]:n,a="string"==typeof o?[o]:o,s=this.options.parseLoadPayload(i,a);this.options.request(this.options,t,s,(function(i,a){if(a&&(a.status>=500&&a.status<600||!a.status))return e("failed loading "+t+"; status code: "+a.status,!0);if(a&&a.status>=400&&a.status<500)return e("failed loading "+t+"; status code: "+a.status,!1);if(!a&&i&&i.message&&i.message.indexOf("Failed to fetch")>-1)return e("failed loading "+t+": "+i.message,!0);if(i)return e(i,!1);var s,c;try{s="string"==typeof a.data?r.options.parse(a.data,n,o):a.data}catch(f){c="failed parsing "+t+" to json"}if(c)return e(c,!1);e(null,s)}))}},{key:"create",value:function(t,e,n,o,r){var i=this;if(this.options.addPath){"string"==typeof t&&(t=[t]);var a=this.options.parsePayload(e,n,o),s=0,c=[],f=[];t.forEach((function(n){var o=i.options.addPath;"function"==typeof i.options.addPath&&(o=i.options.addPath(n,e));var u=i.services.interpolator.interpolate(o,{lng:n,ns:e});i.options.request(i.options,u,a,(function(e,n){s+=1,c.push(e),f.push(n),s===t.length&&"function"==typeof r&&r(c,f)}))}))}}},{key:"reload",value:function(){var t=this,e=this.services,n=e.backendConnector,o=e.languageUtils,r=e.logger,i=n.language;if(!i||"cimode"!==i.toLowerCase()){var a=[],s=function(t){o.toResolveHierarchy(t).forEach((function(t){a.indexOf(t)<0&&a.push(t)}))};s(i),this.allOptions.preload&&this.allOptions.preload.forEach((function(t){return s(t)})),a.forEach((function(e){t.allOptions.ns.forEach((function(t){n.read(e,t,"read",null,null,(function(o,i){o&&r.warn("loading namespace ".concat(t," for language ").concat(e," failed"),o),!o&&i&&r.log("loaded namespace ".concat(t," for language ").concat(e),i),n.loaded("".concat(e,"|").concat(t),o,i)}))}))}))}}}]),t}();T.type="backend";export{T as B};
