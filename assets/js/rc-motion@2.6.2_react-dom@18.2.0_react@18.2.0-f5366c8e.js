import{_ as ce,c as N,d as k,a as l,f as Re,g as Le,h as Me,i as Pe,b as Se}from"./@babel_runtime@7.19.0-16d3a89d.js";import{r as u}from"./react@18.2.0-9cdefec6.js";import{c as ve,b as ye,h as Z,z as ze,s as qe,A as Be}from"./rc-util@5.24.4_react-dom@18.2.0_react@18.2.0-c033d194.js";import{c as Ge}from"./classnames@2.3.2-d75d9a59.js";import{j as _e}from"./@ant-design_icons@4.7.0_react-dom@18.2.0_react@18.2.0-0d73ff6d.js";function he(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(n)]="webkit".concat(e),t["Moz".concat(n)]="moz".concat(e),t["ms".concat(n)]="MS".concat(e),t["O".concat(n)]="o".concat(e.toLowerCase()),t}function He(n,e){var t={animationend:he("Animation","AnimationEnd"),transitionend:he("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var Je=He(ve(),typeof window<"u"?window:{}),be={};if(ve()){var Xe=document.createElement("div");be=Xe.style}var H={};function xe(n){if(H[n])return H[n];var e=Je[n];if(e)for(var t=Object.keys(e),r=t.length,a=0;a<r;a+=1){var s=t[a];if(Object.prototype.hasOwnProperty.call(e,s)&&s in be)return H[n]=e[s],H[n]}return""}var Oe=xe("animationend"),Ne=xe("transitionend"),De=!!(Oe&&Ne),Ae=Oe||"animationend",ge=Ne||"transitionend";function Te(n,e){if(!n)return null;if(ce(n)==="object"){var t=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return n[t]}return"".concat(n,"-").concat(e)}var U="none",J="appear",X="enter",Y="leave",ke="none",M="prepare",I="start",Q="active",fe="end";const Ye=function(){var n=u.useRef(null);function e(){ye.cancel(n.current)}function t(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=ye(function(){a<=1?r({isCanceled:function(){return s!==n.current}}):t(r,a-1)});n.current=s}return u.useEffect(function(){return function(){e()}},[]),[t,e]};var Ve=ve()?u.useLayoutEffect:u.useEffect,Ce=[M,I,Q,fe],we=!1,Ze=!0;function je(n){return n===Q||n===fe}const en=function(n,e){var t=Z(ke),r=N(t,2),a=r[0],s=r[1],i=Ye(),d=N(i,2),y=d[0],o=d[1];function c(){s(M,!0)}return Ve(function(){if(a!==ke&&a!==fe){var v=Ce.indexOf(a),f=Ce[v+1],m=e(a);m===we?s(f,!0):y(function(h){function C(){h.isCanceled()||s(f,!0)}m===!0?C():Promise.resolve(m).then(C)})}},[n,a]),u.useEffect(function(){return function(){o()}},[]),[c,a]},nn=function(n){var e=u.useRef(),t=u.useRef(n);t.current=n;var r=u.useCallback(function(i){t.current(i)},[]);function a(i){i&&(i.removeEventListener(ge,r),i.removeEventListener(Ae,r))}function s(i){e.current&&e.current!==i&&a(e.current),i&&i!==e.current&&(i.addEventListener(ge,r),i.addEventListener(Ae,r),e.current=i)}return u.useEffect(function(){return function(){a(e.current)}},[]),[s,a]};function tn(n,e,t,r){var a=r.motionEnter,s=a===void 0?!0:a,i=r.motionAppear,d=i===void 0?!0:i,y=r.motionLeave,o=y===void 0?!0:y,c=r.motionDeadline,v=r.motionLeaveImmediately,f=r.onAppearPrepare,m=r.onEnterPrepare,h=r.onLeavePrepare,C=r.onAppearStart,R=r.onEnterStart,T=r.onLeaveStart,w=r.onAppearActive,P=r.onEnterActive,_=r.onLeaveActive,b=r.onAppearEnd,L=r.onEnterEnd,D=r.onLeaveEnd,V=r.onVisibleChanged,q=Z(),x=N(q,2),p=x[0],j=x[1],F=Z(U),O=N(F,2),A=O[0],$=O[1],W=Z(null),le=N(W,2),Fe=le[0],de=le[1],ee=u.useRef(!1),ne=u.useRef(null);function B(){return t()}var me=u.useRef(!1);function pe(E){var S=B();if(!(E&&!E.deadline&&E.target!==S)){var g=me.current,G;A===J&&g?G=b==null?void 0:b(S,E):A===X&&g?G=L==null?void 0:L(S,E):A===Y&&g&&(G=D==null?void 0:D(S,E)),A!==U&&g&&G!==!1&&($(U,!0),de(null,!0))}}var Ke=nn(pe),Ue=N(Ke,1),Ie=Ue[0],z=u.useMemo(function(){var E,S,g;switch(A){case J:return E={},k(E,M,f),k(E,I,C),k(E,Q,w),E;case X:return S={},k(S,M,m),k(S,I,R),k(S,Q,P),S;case Y:return g={},k(g,M,h),k(g,I,T),k(g,Q,_),g;default:return{}}},[A]),Qe=en(A,function(E){if(E===M){var S=z[M];return S?S(B()):we}if(K in z){var g;de(((g=z[K])===null||g===void 0?void 0:g.call(z,B(),null))||null)}return K===Q&&(Ie(B()),c>0&&(clearTimeout(ne.current),ne.current=setTimeout(function(){pe({deadline:!0})},c))),Ze}),Ee=N(Qe,2),$e=Ee[0],K=Ee[1],We=je(K);me.current=We,Ve(function(){j(e);var E=ee.current;if(ee.current=!0,!!n){var S;!E&&e&&d&&(S=J),E&&e&&s&&(S=X),(E&&!e&&o||!E&&v&&!e&&o)&&(S=Y),S&&($(S),$e())}},[e]),u.useEffect(function(){(A===J&&!d||A===X&&!s||A===Y&&!o)&&$(U)},[d,s,o]),u.useEffect(function(){return function(){ee.current=!1,clearTimeout(ne.current)}},[]);var te=u.useRef(!1);u.useEffect(function(){p&&(te.current=!0),p!==void 0&&A===U&&((te.current||p)&&(V==null||V(p)),te.current=!0)},[p,A]);var re=Fe;return z[M]&&K===I&&(re=l({transition:"none"},re)),[A,K,re,p!=null?p:e]}var rn=function(n){Re(t,n);var e=Le(t);function t(){return Me(this,t),e.apply(this,arguments)}return Pe(t,[{key:"render",value:function(){return this.props.children}}]),t}(u.Component);function an(n){var e=n;ce(n)==="object"&&(e=n.transitionSupport);function t(a){return!!(a.motionName&&e)}var r=u.forwardRef(function(a,s){var i=a.visible,d=i===void 0?!0:i,y=a.removeOnLeave,o=y===void 0?!0:y,c=a.forceRender,v=a.children,f=a.motionName,m=a.leavedClassName,h=a.eventProps,C=t(a),R=u.useRef(),T=u.useRef();function w(){try{return R.current instanceof HTMLElement?R.current:Be(T.current)}catch{return null}}var P=tn(C,d,w,a),_=N(P,4),b=_[0],L=_[1],D=_[2],V=_[3],q=u.useRef(V);V&&(q.current=!0);var x=u.useCallback(function(W){R.current=W,ze(s,W)},[s]),p,j=l(l({},h),{},{visible:d});if(!v)p=null;else if(b===U||!t(a))V?p=v(l({},j),x):!o&&q.current?p=v(l(l({},j),{},{className:m}),x):c?p=v(l(l({},j),{},{style:{display:"none"}}),x):p=null;else{var F,O;L===M?O="prepare":je(L)?O="active":L===I&&(O="start"),p=v(l(l({},j),{},{className:Ge(Te(f,b),(F={},k(F,Te(f,"".concat(b,"-").concat(O)),O),k(F,f,typeof f=="string"),F)),style:D}),x)}if(u.isValidElement(p)&&qe(p)){var A=p,$=A.ref;$||(p=u.cloneElement(p,{ref:x}))}return _e(rn,{ref:T,children:p})});return r.displayName="CSSMotion",r}const on=an(De);var ie="add",oe="keep",ue="remove",ae="removed";function un(n){var e;return n&&ce(n)==="object"&&"key"in n?e=n:e={key:n},l(l({},e),{},{key:String(e.key)})}function se(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(un)}function sn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],r=0,a=e.length,s=se(n),i=se(e);s.forEach(function(o){for(var c=!1,v=r;v<a;v+=1){var f=i[v];if(f.key===o.key){r<v&&(t=t.concat(i.slice(r,v).map(function(m){return l(l({},m),{},{status:ie})})),r=v),t.push(l(l({},f),{},{status:oe})),r+=1,c=!0;break}}c||t.push(l(l({},o),{},{status:ue}))}),r<a&&(t=t.concat(i.slice(r).map(function(o){return l(l({},o),{},{status:ie})})));var d={};t.forEach(function(o){var c=o.key;d[c]=(d[c]||0)+1});var y=Object.keys(d).filter(function(o){return d[o]>1});return y.forEach(function(o){t=t.filter(function(c){var v=c.key,f=c.status;return v!==o||f!==ue}),t.forEach(function(c){c.key===o&&(c.status=oe)})}),t}var cn=["component","children","onVisibleChanged","onAllRemoved"],vn=["status"],fn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ln(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:on,t=function(r){Re(s,r);var a=Le(s);function s(){var i;Me(this,s);for(var d=arguments.length,y=new Array(d),o=0;o<d;o++)y[o]=arguments[o];return i=a.call.apply(a,[this].concat(y)),i.state={keyEntities:[]},i.removeKey=function(c){var v=i.state.keyEntities,f=v.map(function(m){return m.key!==c?m:l(l({},m),{},{status:ae})});return i.setState({keyEntities:f}),f.filter(function(m){var h=m.status;return h!==ae}).length},i}return Pe(s,[{key:"render",value:function(){var d=this,y=this.state.keyEntities,o=this.props,c=o.component,v=o.children,f=o.onVisibleChanged,m=o.onAllRemoved,h=Se(o,cn),C=c||u.Fragment,R={};return fn.forEach(function(T){R[T]=h[T],delete h[T]}),delete h.keys,_e(C,{...h,children:y.map(function(T){var w=T.status,P=Se(T,vn),_=w===ie||w===oe;return u.createElement(e,{...R,key:P.key,visible:_,eventProps:P,onVisibleChanged:function(L){if(f==null||f(L,{key:P.key}),!L){var D=d.removeKey(P.key);D===0&&m&&m()}}},v)})})}}],[{key:"getDerivedStateFromProps",value:function(d,y){var o=d.keys,c=y.keyEntities,v=se(o),f=sn(c,v);return{keyEntities:f.filter(function(m){var h=c.find(function(C){var R=C.key;return m.key===R});return!(h&&h.status===ae&&m.status===ue)})}}}]),s}(u.Component);return t.defaultProps={component:"div"},t}const yn=ln(De);export{on as C,yn as a};
