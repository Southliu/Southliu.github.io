import{f as U,g as He,b as V,y as ze,z as Oe,a as ye,_ as we,e as C,c as xe,n as We}from"./@babel_runtime.e68bd868.js";import{r as o}from"./react.ab566f72.js";import{c as q}from"./classnames.8cb16634.js";import{a as Ke}from"./rc-resize-observer.5ea131d0.js";import{q as w,$ as Ve,h as ce}from"./rc-util.3445d029.js";var je=o.forwardRef(function(r,v){var u=r.height,e=r.offset,c=r.children,a=r.prefixCls,l=r.onInnerResize,t=r.innerProps,n={},i={display:"flex",flexDirection:"column"};return e!==void 0&&(n={height:u,position:"relative",overflow:"hidden"},i=U(U({},i),{},{transform:"translateY(".concat(e,"px)"),position:"absolute",left:0,right:0,top:0})),o.createElement("div",{style:n},o.createElement(Ke,{onResize:function(s){var h=s.offsetHeight;h&&l&&l()}},o.createElement("div",He({style:i,className:q(V({},"".concat(a,"-holder-inner"),a)),ref:v},t),c)))});je.displayName="Filler";var qe=20;function Ue(r){return"touches"in r?r.touches[0].pageY:r.pageY}var Be=function(r){ze(u,r);var v=Oe(u);function u(){var e;ye(this,u);for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];return e=v.call.apply(v,[this].concat(a)),e.moveRaf=null,e.scrollbarRef=o.createRef(),e.thumbRef=o.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout(function(){e.setState({visible:!1})},2e3)},e.onScrollbarTouchStart=function(t){t.preventDefault()},e.onContainerMouseDown=function(t){t.stopPropagation(),t.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),(t=e.scrollbarRef.current)===null||t===void 0||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),w.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:Ue(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,i=n.dragging,f=n.pageY,s=n.startTop,h=e.props.onScroll;if(w.cancel(e.moveRaf),i){var g=Ue(t)-f,p=s+g,S=e.getEnableScrollRange(),b=e.getEnableHeightRange(),x=b?p/b:0,_=Math.ceil(x*S);e.moveRaf=w(function(){h(_)})}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,i=t.count,f=n/i*10;return f=Math.max(f,qe),f=Math.min(f,n/2),Math.floor(f)},e.getEnableScrollRange=function(){var t=e.props,n=t.scrollHeight,i=t.height;return n-i||0},e.getEnableHeightRange=function(){var t=e.props.height,n=e.getSpinHeight();return t-n||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),i=e.getEnableHeightRange();if(t===0||n===0)return 0;var f=t/n;return f*i},e.showScroll=function(){var t=e.props,n=t.height,i=t.scrollHeight;return i>n},e}return we(u,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(c){c.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var c=this.state,a=c.dragging,l=c.visible,t=this.props,n=t.prefixCls,i=t.direction,f=this.getSpinHeight(),s=this.getTop(),h=this.showScroll(),g=h&&l,p=i==="rtl"?{left:0}:{right:0};return o.createElement("div",{ref:this.scrollbarRef,className:q("".concat(n,"-scrollbar"),V({},"".concat(n,"-scrollbar-show"),h)),style:U(U({width:8,top:0,bottom:0},p),{},{position:"absolute",display:g?null:"none"}),onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},o.createElement("div",{ref:this.thumbRef,className:q("".concat(n,"-scrollbar-thumb"),V({},"".concat(n,"-scrollbar-thumb-moving"),a)),style:{width:"100%",height:f,top:s,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),u}(o.Component);function Je(r){var v=r.children,u=r.setRef,e=o.useCallback(function(c){u(c)},[]);return o.cloneElement(v,{ref:e})}function Qe(r,v,u,e,c,a){var l=a.getKey;return r.slice(v,u+1).map(function(t,n){var i=v+n,f=c(t,i,{}),s=l(t);return o.createElement(Je,{key:s,setRef:function(g){return e(t,g)}},f)})}var Xe=function(){function r(){ye(this,r),this.maps=void 0,this.maps=Object.create(null)}return we(r,[{key:"set",value:function(u,e){this.maps[u]=e}},{key:"get",value:function(u){return this.maps[u]}}]),r}();function et(r,v,u){var e=o.useState(0),c=C(e,2),a=c[0],l=c[1],t=o.useRef(new Map),n=o.useRef(new Xe),i=o.useRef();function f(){w.cancel(i.current)}function s(){f(),i.current=w(function(){t.current.forEach(function(g,p){if(g&&g.offsetParent){var S=Ve(g),b=S.offsetHeight;n.current.get(p)!==b&&n.current.set(p,S.offsetHeight)}}),l(function(g){return g+1})})}function h(g,p){var S=r(g),b=t.current.get(S);p?(t.current.set(S,p),s()):t.current.delete(S),!b!=!p&&(p?v==null||v(g):u==null||u(g))}return o.useEffect(function(){return f},[]),[h,s,n.current,a]}function tt(r,v,u,e,c,a,l,t){var n=o.useRef();return function(i){if(i==null){t();return}if(w.cancel(n.current),typeof i=="number")l(i);else if(i&&xe(i)==="object"){var f,s=i.align;"index"in i?f=i.index:f=v.findIndex(function(S){return c(S)===i.key});var h=i.offset,g=h===void 0?0:h,p=function S(b,x){if(!(b<0||!r.current)){var _=r.current.clientHeight,W=!1,H=x;if(_){for(var D=x||s,Y=0,I=0,T=0,k=Math.min(v.length,f),N=0;N<=k;N+=1){var j=c(v[N]);I=Y;var F=u.get(j);T=I+(F===void 0?e:F),Y=T,N===f&&F===void 0&&(W=!0)}var L=null;switch(D){case"top":L=I-g;break;case"bottom":L=T-_+g;break;default:{var z=r.current.scrollTop,E=z+_;I<z?H="top":T>E&&(H="bottom")}}L!==null&&L!==r.current.scrollTop&&l(L)}n.current=w(function(){W&&a(),S(b-1,H)},2)}};p(3)}}}function rt(r,v,u){var e=r.length,c=v.length,a,l;if(e===0&&c===0)return null;e<c?(a=r,l=v):(a=v,l=r);var t={__EMPTY_ITEM__:!0};function n(p){return p!==void 0?u(p):t}for(var i=null,f=Math.abs(e-c)!==1,s=0;s<l.length;s+=1){var h=n(a[s]),g=n(l[s]);if(h!==g){i=s,f=f||h!==n(l[s+1]);break}}return i===null?null:{index:i,multiple:f}}function nt(r,v,u){var e=o.useState(r),c=C(e,2),a=c[0],l=c[1],t=o.useState(null),n=C(t,2),i=n[0],f=n[1];return o.useEffect(function(){var s=rt(a||[],r||[],v);(s==null?void 0:s.index)!==void 0&&(u==null||u(s.index),f(r[s.index])),l(r)},[r]),[i]}var ot=(typeof navigator>"u"?"undefined":xe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Ae=function(r,v){var u=o.useRef(!1),e=o.useRef(null);function c(){clearTimeout(e.current),u.current=!0,e.current=setTimeout(function(){u.current=!1},50)}var a=o.useRef({top:r,bottom:v});return a.current.top=r,a.current.bottom=v,function(l){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=l<0&&a.current.top||l>0&&a.current.bottom;return t&&n?(clearTimeout(e.current),u.current=!1):(!n||u.current)&&c(),!u.current&&n}};function it(r,v,u,e){var c=o.useRef(0),a=o.useRef(null),l=o.useRef(null),t=o.useRef(!1),n=Ae(v,u);function i(s){if(r){w.cancel(a.current);var h=s.deltaY;c.current+=h,l.current=h,!n(h)&&(ot||s.preventDefault(),a.current=w(function(){var g=t.current?10:1;e(c.current*g),c.current=0}))}}function f(s){r&&(t.current=s.detail===l.current)}return[i,f]}var at=14/15;function ut(r,v,u){var e=o.useRef(!1),c=o.useRef(0),a=o.useRef(null),l=o.useRef(null),t,n=function(h){if(e.current){var g=Math.ceil(h.touches[0].pageY),p=c.current-g;c.current=g,u(p)&&h.preventDefault(),clearInterval(l.current),l.current=setInterval(function(){p*=at,(!u(p,!0)||Math.abs(p)<=.1)&&clearInterval(l.current)},16)}},i=function(){e.current=!1,t()},f=function(h){t(),h.touches.length===1&&!e.current&&(e.current=!0,c.current=Math.ceil(h.touches[0].pageY),a.current=h.target,a.current.addEventListener("touchmove",n),a.current.addEventListener("touchend",i))};t=function(){a.current&&(a.current.removeEventListener("touchmove",n),a.current.removeEventListener("touchend",i))},ce(function(){return r&&v.current.addEventListener("touchstart",f),function(){var s;(s=v.current)===null||s===void 0||s.removeEventListener("touchstart",f),t(),clearInterval(l.current)}},[r])}var lt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","component","onScroll","onVisibleChange","innerProps"],st=[],ct={overflowY:"auto",overflowAnchor:"none"};function ft(r,v){var u=r.prefixCls,e=u===void 0?"rc-virtual-list":u,c=r.className,a=r.height,l=r.itemHeight,t=r.fullHeight,n=t===void 0?!0:t,i=r.style,f=r.data,s=r.children,h=r.itemKey,g=r.virtual,p=r.direction,S=r.component,b=S===void 0?"div":S,x=r.onScroll,_=r.onVisibleChange,W=r.innerProps,H=We(r,lt),D=!!(g!==!1&&a&&l),Y=D&&f&&l*f.length>a,I=o.useState(0),T=C(I,2),k=T[0],N=T[1],j=o.useState(!1),F=C(j,2),L=F[0],z=F[1],E=q(e,V({},"".concat(e,"-rtl"),p==="rtl"),c),M=f||st,P=o.useRef(),fe=o.useRef(),A=o.useRef(),B=o.useCallback(function(d){return typeof h=="function"?h(d):d==null?void 0:d[h]},[h]),te={getKey:B};function J(d){N(function(R){var y;typeof d=="function"?y=d(R):y=d;var $=Se(y);return P.current.scrollTop=$,$})}var pe=o.useRef({start:0,end:M.length}),_e=o.useRef(),De=nt(M,B),Le=C(De,1),Ce=Le[0];_e.current=Ce;var re=et(B,null,null),ne=C(re,4),me=ne[0],ve=ne[1],Re=ne[2],oe=ne[3],G=o.useMemo(function(){if(!D)return{scrollHeight:void 0,start:0,end:M.length-1,offset:void 0};if(!Y){var d;return{scrollHeight:((d=fe.current)===null||d===void 0?void 0:d.offsetHeight)||0,start:0,end:M.length-1,offset:void 0}}for(var R=0,y,$,O,X=M.length,ee=0;ee<X;ee+=1){var Ne=M[ee],Te=B(Ne),se=Re.get(Te),Fe=R+(se===void 0?l:se);Fe>=k&&y===void 0&&(y=ee,$=R),Fe>k+a&&O===void 0&&(O=ee),R=Fe}return y===void 0&&(y=0,$=0,O=Math.ceil(a/l)),O===void 0&&(O=M.length-1),O=Math.min(O+1,M.length),{scrollHeight:R,start:y,end:O,offset:$}},[Y,D,k,M,oe,a]),Z=G.scrollHeight,K=G.start,ie=G.end,he=G.offset;pe.current.start=K,pe.current.end=ie;var Q=Z-a,de=o.useRef(Q);de.current=Q;function Se(d){var R=d;return Number.isNaN(de.current)||(R=Math.min(R,de.current)),R=Math.max(R,0),R}var ge=k<=0,Me=k>=Q,$e=Ae(ge,Me);function Ie(d){var R=d;J(R)}function Pe(d){var R=d.currentTarget.scrollTop;R!==k&&J(R),x==null||x(d)}var be=it(D,ge,Me,function(d){J(function(R){var y=R+d;return y})}),ae=C(be,2),ue=ae[0],Ee=ae[1];ut(D,P,function(d,R){return $e(d,R)?!1:(ue({preventDefault:function(){},deltaY:d}),!0)}),ce(function(){function d(R){D&&R.preventDefault()}return P.current.addEventListener("wheel",ue),P.current.addEventListener("DOMMouseScroll",Ee),P.current.addEventListener("MozMousePixelScroll",d),function(){P.current&&(P.current.removeEventListener("wheel",ue),P.current.removeEventListener("DOMMouseScroll",Ee),P.current.removeEventListener("MozMousePixelScroll",d))}},[D]);var ke=tt(P,M,Re,l,B,ve,J,function(){var d;(d=A.current)===null||d===void 0||d.delayHidden()});o.useImperativeHandle(v,function(){return{scrollTo:ke}}),ce(function(){if(_){var d=M.slice(K,ie+1);_(d,M)}},[K,ie,M]);var le=Qe(M,K,ie,me,s,te),m=null;return a&&(m=U(V({},n?"height":"maxHeight",a),ct),D&&(m.overflowY="hidden",L&&(m.pointerEvents="none"))),o.createElement("div",He({style:U(U({},i),{},{position:"relative"}),className:E},H),o.createElement(b,{className:"".concat(e,"-holder"),style:m,ref:P,onScroll:Pe},o.createElement(je,{prefixCls:e,height:Z,offset:he,onInnerResize:ve,ref:fe,innerProps:W},le)),D&&o.createElement(Be,{ref:A,prefixCls:e,scrollTop:k,height:a,scrollHeight:Z,count:M.length,direction:p,onScroll:Ie,onStartMove:function(){z(!0)},onStopMove:function(){z(!1)}}))}var vt=o.forwardRef(ft);vt.displayName="List";var Ge=o.forwardRef(function(r,v){var u=r.height,e=r.offset,c=r.children,a=r.prefixCls,l=r.onInnerResize,t=r.innerProps,n={},i={display:"flex",flexDirection:"column"};return e!==void 0&&(n={height:u,position:"relative",overflow:"hidden"},i=U(U({},i),{},{transform:"translateY(".concat(e,"px)"),position:"absolute",left:0,right:0,top:0})),o.createElement("div",{style:n},o.createElement(Ke,{onResize:function(s){var h=s.offsetHeight;h&&l&&l()}},o.createElement("div",He({style:i,className:q(V({},"".concat(a,"-holder-inner"),a)),ref:v},t),c)))});Ge.displayName="Filler";var ht=20;function Ye(r){return"touches"in r?r.touches[0].pageY:r.pageY}var dt=function(r){ze(u,r);var v=Oe(u);function u(){var e;ye(this,u);for(var c=arguments.length,a=new Array(c),l=0;l<c;l++)a[l]=arguments[l];return e=v.call.apply(v,[this].concat(a)),e.moveRaf=null,e.scrollbarRef=o.createRef(),e.thumbRef=o.createRef(),e.visibleTimeout=null,e.state={dragging:!1,pageY:null,startTop:null,visible:!1},e.delayHidden=function(){clearTimeout(e.visibleTimeout),e.setState({visible:!0}),e.visibleTimeout=setTimeout(function(){e.setState({visible:!1})},2e3)},e.onScrollbarTouchStart=function(t){t.preventDefault()},e.onContainerMouseDown=function(t){t.stopPropagation(),t.preventDefault()},e.patchEvents=function(){window.addEventListener("mousemove",e.onMouseMove),window.addEventListener("mouseup",e.onMouseUp),e.thumbRef.current.addEventListener("touchmove",e.onMouseMove),e.thumbRef.current.addEventListener("touchend",e.onMouseUp)},e.removeEvents=function(){var t;window.removeEventListener("mousemove",e.onMouseMove),window.removeEventListener("mouseup",e.onMouseUp),(t=e.scrollbarRef.current)===null||t===void 0||t.removeEventListener("touchstart",e.onScrollbarTouchStart),e.thumbRef.current&&(e.thumbRef.current.removeEventListener("touchstart",e.onMouseDown),e.thumbRef.current.removeEventListener("touchmove",e.onMouseMove),e.thumbRef.current.removeEventListener("touchend",e.onMouseUp)),w.cancel(e.moveRaf)},e.onMouseDown=function(t){var n=e.props.onStartMove;e.setState({dragging:!0,pageY:Ye(t),startTop:e.getTop()}),n(),e.patchEvents(),t.stopPropagation(),t.preventDefault()},e.onMouseMove=function(t){var n=e.state,i=n.dragging,f=n.pageY,s=n.startTop,h=e.props.onScroll;if(w.cancel(e.moveRaf),i){var g=Ye(t)-f,p=s+g,S=e.getEnableScrollRange(),b=e.getEnableHeightRange(),x=b?p/b:0,_=Math.ceil(x*S);e.moveRaf=w(function(){h(_)})}},e.onMouseUp=function(){var t=e.props.onStopMove;e.setState({dragging:!1}),t(),e.removeEvents()},e.getSpinHeight=function(){var t=e.props,n=t.height,i=t.count,f=n/i*10;return f=Math.max(f,ht),f=Math.min(f,n/2),Math.floor(f)},e.getEnableScrollRange=function(){var t=e.props,n=t.scrollHeight,i=t.height;return n-i||0},e.getEnableHeightRange=function(){var t=e.props.height,n=e.getSpinHeight();return t-n||0},e.getTop=function(){var t=e.props.scrollTop,n=e.getEnableScrollRange(),i=e.getEnableHeightRange();if(t===0||n===0)return 0;var f=t/n;return f*i},e.showScroll=function(){var t=e.props,n=t.height,i=t.scrollHeight;return i>n},e}return we(u,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(c){c.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var c=this.state,a=c.dragging,l=c.visible,t=this.props.prefixCls,n=this.getSpinHeight(),i=this.getTop(),f=this.showScroll(),s=f&&l;return o.createElement("div",{ref:this.scrollbarRef,className:q("".concat(t,"-scrollbar"),V({},"".concat(t,"-scrollbar-show"),f)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:s?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},o.createElement("div",{ref:this.thumbRef,className:q("".concat(t,"-scrollbar-thumb"),V({},"".concat(t,"-scrollbar-thumb-moving"),a)),style:{width:"100%",height:n,top:i,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),u}(o.Component);function gt(r){var v=r.children,u=r.setRef,e=o.useCallback(function(c){u(c)},[]);return o.cloneElement(v,{ref:e})}function pt(r,v,u,e,c,a){var l=a.getKey;return r.slice(v,u+1).map(function(t,n){var i=v+n,f=c(t,i,{}),s=l(t);return o.createElement(gt,{key:s,setRef:function(g){return e(t,g)}},f)})}var mt=function(){function r(){ye(this,r),this.maps=void 0,this.maps=Object.create(null)}return we(r,[{key:"set",value:function(u,e){this.maps[u]=e}},{key:"get",value:function(u){return this.maps[u]}}]),r}();function Rt(r,v,u){var e=o.useState(0),c=C(e,2),a=c[0],l=c[1],t=o.useRef(new Map),n=o.useRef(new mt),i=o.useRef();function f(){w.cancel(i.current)}function s(){f(),i.current=w(function(){t.current.forEach(function(g,p){if(g&&g.offsetParent){var S=Ve(g),b=S.offsetHeight;n.current.get(p)!==b&&n.current.set(p,S.offsetHeight)}}),l(function(g){return g+1})})}function h(g,p){var S=r(g),b=t.current.get(S);p?(t.current.set(S,p),s()):t.current.delete(S),!b!=!p&&(p?v==null||v(g):u==null||u(g))}return o.useEffect(function(){return f},[]),[h,s,n.current,a]}function St(r,v,u,e,c,a,l,t){var n=o.useRef();return function(i){if(i==null){t();return}if(w.cancel(n.current),typeof i=="number")l(i);else if(i&&xe(i)==="object"){var f,s=i.align;"index"in i?f=i.index:f=v.findIndex(function(S){return c(S)===i.key});var h=i.offset,g=h===void 0?0:h,p=function S(b,x){if(!(b<0||!r.current)){var _=r.current.clientHeight,W=!1,H=x;if(_){for(var D=x||s,Y=0,I=0,T=0,k=Math.min(v.length,f),N=0;N<=k;N+=1){var j=c(v[N]);I=Y;var F=u.get(j);T=I+(F===void 0?e:F),Y=T,N===f&&F===void 0&&(W=!0)}var L=null;switch(D){case"top":L=I-g;break;case"bottom":L=T-_+g;break;default:{var z=r.current.scrollTop,E=z+_;I<z?H="top":T>E&&(H="bottom")}}L!==null&&L!==r.current.scrollTop&&l(L)}n.current=w(function(){W&&a(),S(b-1,H)},2)}};p(3)}}}function Mt(r,v,u){var e=r.length,c=v.length,a,l;if(e===0&&c===0)return null;e<c?(a=r,l=v):(a=v,l=r);var t={__EMPTY_ITEM__:!0};function n(p){return p!==void 0?u(p):t}for(var i=null,f=Math.abs(e-c)!==1,s=0;s<l.length;s+=1){var h=n(a[s]),g=n(l[s]);if(h!==g){i=s,f=f||h!==n(l[s+1]);break}}return i===null?null:{index:i,multiple:f}}function bt(r,v,u){var e=o.useState(r),c=C(e,2),a=c[0],l=c[1],t=o.useState(null),n=C(t,2),i=n[0],f=n[1];return o.useEffect(function(){var s=Mt(a||[],r||[],v);(s==null?void 0:s.index)!==void 0&&(u==null||u(s.index),f(r[s.index])),l(r)},[r]),[i]}var Et=(typeof navigator>"u"?"undefined":xe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Ze=function(r,v){var u=o.useRef(!1),e=o.useRef(null);function c(){clearTimeout(e.current),u.current=!0,e.current=setTimeout(function(){u.current=!1},50)}var a=o.useRef({top:r,bottom:v});return a.current.top=r,a.current.bottom=v,function(l){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=l<0&&a.current.top||l>0&&a.current.bottom;return t&&n?(clearTimeout(e.current),u.current=!1):(!n||u.current)&&c(),!u.current&&n}};function Tt(r,v,u,e){var c=o.useRef(0),a=o.useRef(null),l=o.useRef(null),t=o.useRef(!1),n=Ze(v,u);function i(s){if(r){w.cancel(a.current);var h=s.deltaY;c.current+=h,l.current=h,!n(h)&&(Et||s.preventDefault(),a.current=w(function(){var g=t.current?10:1;e(c.current*g),c.current=0}))}}function f(s){r&&(t.current=s.detail===l.current)}return[i,f]}var Ht=14/15;function yt(r,v,u){var e=o.useRef(!1),c=o.useRef(0),a=o.useRef(null),l=o.useRef(null),t,n=function(h){if(e.current){var g=Math.ceil(h.touches[0].pageY),p=c.current-g;c.current=g,u(p)&&h.preventDefault(),clearInterval(l.current),l.current=setInterval(function(){p*=Ht,(!u(p,!0)||Math.abs(p)<=.1)&&clearInterval(l.current)},16)}},i=function(){e.current=!1,t()},f=function(h){t(),h.touches.length===1&&!e.current&&(e.current=!0,c.current=Math.ceil(h.touches[0].pageY),a.current=h.target,a.current.addEventListener("touchmove",n),a.current.addEventListener("touchend",i))};t=function(){a.current&&(a.current.removeEventListener("touchmove",n),a.current.removeEventListener("touchend",i))},ce(function(){return r&&v.current.addEventListener("touchstart",f),function(){var s;(s=v.current)===null||s===void 0||s.removeEventListener("touchstart",f),t(),clearInterval(l.current)}},[r])}var wt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],xt=[],_t={overflowY:"auto",overflowAnchor:"none"};function Dt(r,v){var u=r.prefixCls,e=u===void 0?"rc-virtual-list":u,c=r.className,a=r.height,l=r.itemHeight,t=r.fullHeight,n=t===void 0?!0:t,i=r.style,f=r.data,s=r.children,h=r.itemKey,g=r.virtual,p=r.component,S=p===void 0?"div":p,b=r.onScroll,x=r.onVisibleChange,_=r.innerProps,W=We(r,wt),H=!!(g!==!1&&a&&l),D=H&&f&&l*f.length>a,Y=o.useState(0),I=C(Y,2),T=I[0],k=I[1],N=o.useState(!1),j=C(N,2),F=j[0],L=j[1],z=q(e,c),E=f||xt,M=o.useRef(),P=o.useRef(),fe=o.useRef(),A=o.useCallback(function(m){return typeof h=="function"?h(m):m==null?void 0:m[h]},[h]),B={getKey:A};function te(m){k(function(d){var R;typeof m=="function"?R=m(d):R=m;var y=de(R);return M.current.scrollTop=y,y})}var J=o.useRef({start:0,end:E.length}),pe=o.useRef(),_e=bt(E,A),De=C(_e,1),Le=De[0];pe.current=Le;var Ce=Rt(A,null,null),re=C(Ce,4),ne=re[0],me=re[1],ve=re[2],Re=re[3],oe=o.useMemo(function(){if(!H)return{scrollHeight:void 0,start:0,end:E.length-1,offset:void 0};if(!D){var m;return{scrollHeight:((m=P.current)===null||m===void 0?void 0:m.offsetHeight)||0,start:0,end:E.length-1,offset:void 0}}for(var d=0,R,y,$,O=E.length,X=0;X<O;X+=1){var ee=E[X],Ne=A(ee),Te=ve.get(Ne),se=d+(Te===void 0?l:Te);se>=T&&R===void 0&&(R=X,y=d),se>T+a&&$===void 0&&($=X),d=se}return R===void 0&&(R=0,y=0,$=Math.ceil(a/l)),$===void 0&&($=E.length-1),$=Math.min($+1,E.length),{scrollHeight:d,start:R,end:$,offset:y}},[D,H,T,E,Re,a]),G=oe.scrollHeight,Z=oe.start,K=oe.end,ie=oe.offset;J.current.start=Z,J.current.end=K;var he=G-a,Q=o.useRef(he);Q.current=he;function de(m){var d=m;return Number.isNaN(Q.current)||(d=Math.min(d,Q.current)),d=Math.max(d,0),d}var Se=T<=0,ge=T>=he,Me=Ze(Se,ge);function $e(m){var d=m;te(d)}function Ie(m){var d=m.currentTarget.scrollTop;d!==T&&te(d),b==null||b(m)}var Pe=Tt(H,Se,ge,function(m){te(function(d){var R=d+m;return R})}),be=C(Pe,2),ae=be[0],ue=be[1];yt(H,M,function(m,d){return Me(m,d)?!1:(ae({preventDefault:function(){},deltaY:m}),!0)}),ce(function(){function m(d){H&&d.preventDefault()}return M.current.addEventListener("wheel",ae),M.current.addEventListener("DOMMouseScroll",ue),M.current.addEventListener("MozMousePixelScroll",m),function(){M.current&&(M.current.removeEventListener("wheel",ae),M.current.removeEventListener("DOMMouseScroll",ue),M.current.removeEventListener("MozMousePixelScroll",m))}},[H]);var Ee=St(M,E,ve,l,A,me,te,function(){var m;(m=fe.current)===null||m===void 0||m.delayHidden()});o.useImperativeHandle(v,function(){return{scrollTo:Ee}}),ce(function(){if(x){var m=E.slice(Z,K+1);x(m,E)}},[Z,K,E]);var ke=pt(E,Z,K,ne,s,B),le=null;return a&&(le=U(V({},n?"height":"maxHeight",a),_t),H&&(le.overflowY="hidden",F&&(le.pointerEvents="none"))),o.createElement("div",He({style:U(U({},i),{},{position:"relative"}),className:z},W),o.createElement(S,{className:"".concat(e,"-holder"),style:le,ref:M,onScroll:Ie},o.createElement(Ge,{prefixCls:e,height:G,offset:ie,onInnerResize:me,ref:P,innerProps:_},ke)),H&&o.createElement(dt,{ref:fe,prefixCls:e,scrollTop:T,height:a,scrollHeight:G,count:E.length,onScroll:$e,onStartMove:function(){L(!0)},onStopMove:function(){L(!1)}}))}var Lt=o.forwardRef(Dt);Lt.displayName="List";export{vt as L,Lt as a};
