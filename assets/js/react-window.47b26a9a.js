import{s as X,p as N,h as Y}from"./@babel_runtime.8927ffbd.js";import{m as W}from"./memoize-one.52518564.js";import{r as P}from"./react.1c7e6da0.js";var Z=typeof performance=="object"&&typeof performance.now=="function",U=Z?function(){return performance.now()}:function(){return Date.now()};function A(n){cancelAnimationFrame(n.id)}function tt(n,e){var a=U();function u(){U()-a>=e?n.call(null):h.id=requestAnimationFrame(u)}var h={id:requestAnimationFrame(u)};return h}var F=-1;function q(n){if(n===void 0&&(n=!1),F===-1||n){var e=document.createElement("div"),a=e.style;a.width="50px",a.height="50px",a.overflow="scroll",document.body.appendChild(e),F=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return F}var T=null;function $(n){if(n===void 0&&(n=!1),T===null||n){var e=document.createElement("div"),a=e.style;a.width="50px",a.height="50px",a.overflow="scroll",a.direction="rtl";var u=document.createElement("div"),h=u.style;return h.width="100px",h.height="100px",e.appendChild(u),document.body.appendChild(e),e.scrollLeft>0?T="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?T="negative":T="positive-ascending"),document.body.removeChild(e),T}return T}var et=150,rt=function(e,a){return e};function it(n){var e,a=n.getItemOffset,u=n.getEstimatedTotalSize,h=n.getItemSize,x=n.getOffsetForIndexAndAlignment,_=n.getStartIndexForOffset,z=n.getStopIndexForStartIndex,C=n.initInstanceProps,y=n.shouldResetStyleCacheOnItemSizeChange,S=n.validateProps;return e=function(O){X(I,O);function I(f){var t;return t=O.call(this,f)||this,t._instanceProps=C(t.props,N(t)),t._outerRef=void 0,t._resetIsScrollingTimeoutId=null,t.state={instance:N(t),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof t.props.initialScrollOffset=="number"?t.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},t._callOnItemsRendered=void 0,t._callOnItemsRendered=W(function(r,i,o,s){return t.props.onItemsRendered({overscanStartIndex:r,overscanStopIndex:i,visibleStartIndex:o,visibleStopIndex:s})}),t._callOnScroll=void 0,t._callOnScroll=W(function(r,i,o){return t.props.onScroll({scrollDirection:r,scrollOffset:i,scrollUpdateWasRequested:o})}),t._getItemStyle=void 0,t._getItemStyle=function(r){var i=t.props,o=i.direction,s=i.itemSize,d=i.layout,l=t._getItemStyleCache(y&&s,y&&d,y&&o),c;if(l.hasOwnProperty(r))c=l[r];else{var m=a(t.props,r,t._instanceProps),v=h(t.props,r,t._instanceProps),g=o==="horizontal"||d==="horizontal",b=o==="rtl",R=g?m:0;l[r]=c={position:"absolute",left:b?void 0:R,right:b?R:void 0,top:g?0:m,height:g?"100%":v,width:g?v:"100%"}}return c},t._getItemStyleCache=void 0,t._getItemStyleCache=W(function(r,i,o){return{}}),t._onScrollHorizontal=function(r){var i=r.currentTarget,o=i.clientWidth,s=i.scrollLeft,d=i.scrollWidth;t.setState(function(l){if(l.scrollOffset===s)return null;var c=t.props.direction,m=s;if(c==="rtl")switch($()){case"negative":m=-s;break;case"positive-descending":m=d-o-s;break}return m=Math.max(0,Math.min(m,d-o)),{isScrolling:!0,scrollDirection:l.scrollOffset<s?"forward":"backward",scrollOffset:m,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._onScrollVertical=function(r){var i=r.currentTarget,o=i.clientHeight,s=i.scrollHeight,d=i.scrollTop;t.setState(function(l){if(l.scrollOffset===d)return null;var c=Math.max(0,Math.min(d,s-o));return{isScrolling:!0,scrollDirection:l.scrollOffset<c?"forward":"backward",scrollOffset:c,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._outerRefSetter=function(r){var i=t.props.outerRef;t._outerRef=r,typeof i=="function"?i(r):i!=null&&typeof i=="object"&&i.hasOwnProperty("current")&&(i.current=r)},t._resetIsScrollingDebounced=function(){t._resetIsScrollingTimeoutId!==null&&A(t._resetIsScrollingTimeoutId),t._resetIsScrollingTimeoutId=tt(t._resetIsScrolling,et)},t._resetIsScrolling=function(){t._resetIsScrollingTimeoutId=null,t.setState({isScrolling:!1},function(){t._getItemStyleCache(-1,null)})},t}I.getDerivedStateFromProps=function(t,r){return ot(t,r),S(t),null};var p=I.prototype;return p.scrollTo=function(t){t=Math.max(0,t),this.setState(function(r){return r.scrollOffset===t?null:{scrollDirection:r.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},p.scrollToItem=function(t,r){r===void 0&&(r="auto");var i=this.props,o=i.itemCount,s=i.layout,d=this.state.scrollOffset;t=Math.max(0,Math.min(t,o-1));var l=0;if(this._outerRef){var c=this._outerRef;s==="vertical"?l=c.scrollWidth>c.clientWidth?q():0:l=c.scrollHeight>c.clientHeight?q():0}this.scrollTo(x(this.props,t,r,d,this._instanceProps,l))},p.componentDidMount=function(){var t=this.props,r=t.direction,i=t.initialScrollOffset,o=t.layout;if(typeof i=="number"&&this._outerRef!=null){var s=this._outerRef;r==="horizontal"||o==="horizontal"?s.scrollLeft=i:s.scrollTop=i}this._callPropsCallbacks()},p.componentDidUpdate=function(){var t=this.props,r=t.direction,i=t.layout,o=this.state,s=o.scrollOffset,d=o.scrollUpdateWasRequested;if(d&&this._outerRef!=null){var l=this._outerRef;if(r==="horizontal"||i==="horizontal")if(r==="rtl")switch($()){case"negative":l.scrollLeft=-s;break;case"positive-ascending":l.scrollLeft=s;break;default:var c=l.clientWidth,m=l.scrollWidth;l.scrollLeft=m-c-s;break}else l.scrollLeft=s;else l.scrollTop=s}this._callPropsCallbacks()},p.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&A(this._resetIsScrollingTimeoutId)},p.render=function(){var t=this.props,r=t.children,i=t.className,o=t.direction,s=t.height,d=t.innerRef,l=t.innerElementType,c=t.innerTagName,m=t.itemCount,v=t.itemData,g=t.itemKey,b=g===void 0?rt:g,R=t.layout,H=t.outerElementType,K=t.outerTagName,V=t.style,j=t.useIsScrolling,B=t.width,E=this.state.isScrolling,M=o==="horizontal"||R==="horizontal",G=M?this._onScrollHorizontal:this._onScrollVertical,L=this._getRangeToRender(),J=L[0],Q=L[1],k=[];if(m>0)for(var w=J;w<=Q;w++)k.push(P.createElement(r,{data:v,key:b(w,v),index:w,isScrolling:j?E:void 0,style:this._getItemStyle(w)}));var D=u(this.props,this._instanceProps);return P.createElement(H||K||"div",{className:i,onScroll:G,ref:this._outerRefSetter,style:Y({position:"relative",height:s,width:B,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},V)},P.createElement(l||c||"div",{children:k,ref:d,style:{height:M?"100%":D,pointerEvents:E?"none":void 0,width:M?D:"100%"}}))},p._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var t=this.props.itemCount;if(t>0){var r=this._getRangeToRender(),i=r[0],o=r[1],s=r[2],d=r[3];this._callOnItemsRendered(i,o,s,d)}}if(typeof this.props.onScroll=="function"){var l=this.state,c=l.scrollDirection,m=l.scrollOffset,v=l.scrollUpdateWasRequested;this._callOnScroll(c,m,v)}},p._getRangeToRender=function(){var t=this.props,r=t.itemCount,i=t.overscanCount,o=this.state,s=o.isScrolling,d=o.scrollDirection,l=o.scrollOffset;if(r===0)return[0,0,0,0];var c=_(this.props,l,this._instanceProps),m=z(this.props,c,l,this._instanceProps),v=!s||d==="backward"?Math.max(1,i):1,g=!s||d==="forward"?Math.max(1,i):1;return[Math.max(0,c-v),Math.max(0,Math.min(r-1,m+g)),c,m]},I}(P.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var ot=function(e,a){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,a.instance},at=it({getItemOffset:function(e,a){var u=e.itemSize;return a*u},getItemSize:function(e,a){var u=e.itemSize;return u},getEstimatedTotalSize:function(e){var a=e.itemCount,u=e.itemSize;return u*a},getOffsetForIndexAndAlignment:function(e,a,u,h,x,_){var z=e.direction,C=e.height,y=e.itemCount,S=e.itemSize,O=e.layout,I=e.width,p=z==="horizontal"||O==="horizontal",f=p?I:C,t=Math.max(0,y*S-f),r=Math.min(t,a*S),i=Math.max(0,a*S-f+S+_);switch(u==="smart"&&(h>=i-f&&h<=r+f?u="auto":u="center"),u){case"start":return r;case"end":return i;case"center":{var o=Math.round(i+(r-i)/2);return o<Math.ceil(f/2)?0:o>t+Math.floor(f/2)?t:o}case"auto":default:return h>=i&&h<=r?h:h<i?i:r}},getStartIndexForOffset:function(e,a){var u=e.itemCount,h=e.itemSize;return Math.max(0,Math.min(u-1,Math.floor(a/h)))},getStopIndexForStartIndex:function(e,a,u){var h=e.direction,x=e.height,_=e.itemCount,z=e.itemSize,C=e.layout,y=e.width,S=h==="horizontal"||C==="horizontal",O=a*z,I=S?y:x,p=Math.ceil((I+u-O)/z);return Math.max(0,Math.min(_-1,a+p-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});export{at as F};
