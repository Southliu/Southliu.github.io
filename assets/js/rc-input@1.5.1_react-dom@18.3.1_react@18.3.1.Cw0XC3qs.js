import{c as e}from"./classnames@2.5.1.Xo58IrnT.js";import{e as n,r as t}from"./react@18.3.1.zIIbIvjs.js";import{f as a,b as o,j as r,h as l,l as s,g as c,i as u}from"./@babel_runtime@7.24.7.uphKh7BM.js";import{A as i,x as f}from"./rc-util@5.43.0_react-dom@18.3.1_react@18.3.1.bvtOFkwB.js";function d(e,n,t){var a=n.cloneNode(!0),o=Object.create(e,{target:{value:a},currentTarget:{value:a}});return a.value=t,"number"==typeof n.selectionStart&&"number"==typeof n.selectionEnd&&(a.selectionStart=n.selectionStart,a.selectionEnd=n.selectionEnd),a.setSelectionRange=function(){n.setSelectionRange.apply(n,arguments)},o}function p(e,n,t,a){if(t){var o=n;"click"!==n.type?"file"===e.type||void 0===a?t(o):t(o=d(n,e,a)):t(o=d(n,e,""))}}function m(e,n){if(e){e.focus(n);var t=(n||{}).cursor;if(t){var a=e.value.length;switch(t){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a)}}}}var v=n.forwardRef((function(s,c){var u,i,f=s.inputElement,d=s.children,p=s.prefixCls,m=s.prefix,v=s.suffix,x=s.addonBefore,g=s.addonAfter,h=s.className,y=s.style,E=s.disabled,w=s.readOnly,b=s.focused,C=s.triggerFocus,N=s.allowClear,S=s.value,R=s.handleReset,F=s.hidden,j=s.classes,B=s.classNames,W=s.dataAttrs,k=s.styles,A=s.components,I=null!=d?d:f,D=(null==A?void 0:A.affixWrapper)||"span",z=(null==A?void 0:A.groupWrapper)||"span",K=(null==A?void 0:A.wrapper)||"span",L=(null==A?void 0:A.groupAddon)||"span",P=t.useRef(null),_=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(s),H=t.cloneElement(I,{value:S,className:e(I.props.className,!_&&(null==B?void 0:B.variant))||null}),M=t.useRef(null);if(n.useImperativeHandle(c,(function(){return{nativeElement:M.current||P.current}})),_){var O,T=null;if(N){var V,q=!E&&!w&&S,G="".concat(p,"-clear-icon"),J="object"===a(N)&&null!=N&&N.clearIcon?N.clearIcon:"âœ–";T=n.createElement("span",{onClick:R,onMouseDown:function(e){return e.preventDefault()},className:e(G,(V={},o(V,"".concat(G,"-hidden"),!q),o(V,"".concat(G,"-has-suffix"),!!v),V)),role:"button",tabIndex:-1},J)}var Q="".concat(p,"-affix-wrapper"),U=e(Q,(o(O={},"".concat(p,"-disabled"),E),o(O,"".concat(Q,"-disabled"),E),o(O,"".concat(Q,"-focused"),b),o(O,"".concat(Q,"-readonly"),w),o(O,"".concat(Q,"-input-with-clear-btn"),v&&N&&S),O),null==j?void 0:j.affixWrapper,null==B?void 0:B.affixWrapper,null==B?void 0:B.variant),X=(v||N)&&n.createElement("span",{className:e("".concat(p,"-suffix"),null==B?void 0:B.suffix),style:null==k?void 0:k.suffix},T,v);H=n.createElement(D,r({className:U,style:null==k?void 0:k.affixWrapper,onClick:function(e){var n;null!==(n=P.current)&&void 0!==n&&n.contains(e.target)&&(null==C||C())}},null==W?void 0:W.affixWrapper,{ref:P}),m&&n.createElement("span",{className:e("".concat(p,"-prefix"),null==B?void 0:B.prefix),style:null==k?void 0:k.prefix},m),H,X)}if(function(e){return!(!e.addonBefore&&!e.addonAfter)}(s)){var Y="".concat(p,"-group"),Z="".concat(Y,"-addon"),$="".concat(Y,"-wrapper"),ee=e("".concat(p,"-wrapper"),Y,null==j?void 0:j.wrapper,null==B?void 0:B.wrapper),ne=e($,o({},"".concat($,"-disabled"),E),null==j?void 0:j.group,null==B?void 0:B.groupWrapper);H=n.createElement(z,{className:ne,ref:M},n.createElement(K,{className:ee},x&&n.createElement(L,{className:Z},x),H,g&&n.createElement(L,{className:Z},g)))}return n.cloneElement(H,{className:e(null===(u=H.props)||void 0===u?void 0:u.className,h)||null,style:l(l({},null===(i=H.props)||void 0===i?void 0:i.style),y),hidden:F})})),x=["show"];function g(e,n){return t.useMemo((function(){var t={};n&&(t.show="object"===a(n)&&n.formatter?n.formatter:!!n);var o=t=l(l({},t),e),r=o.show,c=s(o,x);return l(l({},c),{},{show:!!r,showFormatter:"function"==typeof r?r:void 0,strategy:c.strategy||function(e){return e.length}})}),[e,n])}var h=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],y=t.forwardRef((function(a,d){var x=a.autoComplete,y=a.onChange,E=a.onFocus,w=a.onBlur,b=a.onPressEnter,C=a.onKeyDown,N=a.prefixCls,S=void 0===N?"rc-input":N,R=a.disabled,F=a.htmlSize,j=a.className,B=a.maxLength,W=a.suffix,k=a.showCount,A=a.count,I=a.type,D=void 0===I?"text":I,z=a.classes,K=a.classNames,L=a.styles,P=a.onCompositionStart,_=a.onCompositionEnd,H=s(a,h),M=t.useState(!1),O=c(M,2),T=O[0],V=O[1],q=t.useRef(!1),G=t.useRef(null),J=t.useRef(null),Q=function(e){G.current&&m(G.current,e)},U=i(a.defaultValue,{value:a.value}),X=c(U,2),Y=X[0],Z=X[1],$=null==Y?"":String(Y),ee=t.useState(null),ne=c(ee,2),te=ne[0],ae=ne[1],oe=g(A,k),re=oe.max||B,le=oe.strategy($),se=!!re&&le>re;t.useImperativeHandle(d,(function(){var e;return{focus:Q,blur:function(){var e;null===(e=G.current)||void 0===e||e.blur()},setSelectionRange:function(e,n,t){var a;null===(a=G.current)||void 0===a||a.setSelectionRange(e,n,t)},select:function(){var e;null===(e=G.current)||void 0===e||e.select()},input:G.current,nativeElement:(null===(e=J.current)||void 0===e?void 0:e.nativeElement)||G.current}})),t.useEffect((function(){V((function(e){return(!e||!R)&&e}))}),[R]);var ce=function(e,n,t){var a,o,r=n;if(!q.current&&oe.exceedFormatter&&oe.max&&oe.strategy(n)>oe.max)n!==(r=oe.exceedFormatter(n,{max:oe.max}))&&ae([(null===(a=G.current)||void 0===a?void 0:a.selectionStart)||0,(null===(o=G.current)||void 0===o?void 0:o.selectionEnd)||0]);else if("compositionEnd"===t.source)return;Z(r),G.current&&p(G.current,e,y,r)};t.useEffect((function(){var e;te&&(null===(e=G.current)||void 0===e||e.setSelectionRange.apply(e,u(te)))}),[te]);var ue,ie=function(e){ce(e,e.target.value,{source:"change"})},fe=function(e){q.current=!1,ce(e,e.currentTarget.value,{source:"compositionEnd"}),null==_||_(e)},de=function(e){b&&"Enter"===e.key&&b(e),null==C||C(e)},pe=function(e){V(!0),null==E||E(e)},me=function(e){V(!1),null==w||w(e)},ve=se&&"".concat(S,"-out-of-range");return n.createElement(v,r({},H,{prefixCls:S,className:e(j,ve),handleReset:function(e){Z(""),Q(),G.current&&p(G.current,e,y)},value:$,focused:T,triggerFocus:Q,suffix:function(){var t=Number(re)>0;if(W||oe.show){var a=oe.showFormatter?oe.showFormatter({value:$,count:le,maxLength:re}):"".concat(le).concat(t?" / ".concat(re):"");return n.createElement(n.Fragment,null,oe.show&&n.createElement("span",{className:e("".concat(S,"-show-count-suffix"),o({},"".concat(S,"-show-count-has-suffix"),!!W),null==K?void 0:K.count),style:l({},null==L?void 0:L.count)},a),W)}return null}(),disabled:R,classes:z,classNames:K,styles:L}),(ue=f(a,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]),n.createElement("input",r({autoComplete:x},ue,{onChange:ie,onFocus:pe,onBlur:me,onKeyDown:de,className:e(S,o({},"".concat(S,"-disabled"),R),null==K?void 0:K.input),style:null==L?void 0:L.input,ref:G,size:F,type:D,onCompositionStart:function(e){q.current=!0,null==P||P(e)},onCompositionEnd:fe}))))}));export{v as B,y as I,p as r,m as t,g as u};
