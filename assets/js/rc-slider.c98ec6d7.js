import{al as qe,f as ze,i as te,h as W,j as G,_ as ae,k as st}from"./inheritsLoose.4207bb94.js";import{r as t}from"./react.8249fdc7.js";import{c as ke}from"./classnames.2e4736b8.js";import{s as vt}from"./shallowequal.6a8ebf1c.js";import{K as ee,h as dt}from"./rc-util.30994db3.js";var se=t.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0});function De(e,c,r){return(e-c)/(r-c)}function Le(e,c,r,f){var i=De(c,r,f),o={};switch(e){case"rtl":o.right="".concat(i*100,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(i*100,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(i*100,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(i*100,"%"),o.transform="translateX(-50%)";break}return o}function ge(e,c){return Array.isArray(e)?e[c]:e}var ft=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],mt=t.forwardRef(function(e,c){var r,f,i=e.prefixCls,o=e.value,s=e.valueIndex,b=e.onStartMove,S=e.style,k=e.render,M=e.dragging,h=e.onOffsetChange,g=qe(e,ft),u=t.useContext(se),n=u.min,v=u.max,l=u.direction,m=u.disabled,a=u.range,y=u.tabIndex,P=u.ariaLabelForHandle,x=u.ariaLabelledByForHandle,T=u.ariaValueTextFormatterForHandle,E="".concat(i,"-handle"),F=function(X){m||b(X,s)},_=function(X){if(!m){var D=null;switch(X.which||X.keyCode){case ee.LEFT:D=l==="ltr"||l==="btt"?-1:1;break;case ee.RIGHT:D=l==="ltr"||l==="btt"?1:-1;break;case ee.UP:D=l!=="ttb"?1:-1;break;case ee.DOWN:D=l!=="ttb"?-1:1;break;case ee.HOME:D="min";break;case ee.END:D="max";break;case ee.PAGE_UP:D=2;break;case ee.PAGE_DOWN:D=-2;break}D!==null&&(X.preventDefault(),h(D,s))}},R=Le(l,o,n,v),A=t.createElement("div",ze({ref:c,className:ke(E,(r={},te(r,"".concat(E,"-").concat(s+1),a),te(r,"".concat(E,"-dragging"),M),r)),style:W(W({},R),S),onMouseDown:F,onTouchStart:F,onKeyDown:_,tabIndex:m?null:ge(y,s),role:"slider","aria-valuemin":n,"aria-valuemax":v,"aria-valuenow":o,"aria-disabled":m,"aria-label":ge(P,s),"aria-labelledby":ge(x,s),"aria-valuetext":(f=ge(T,s))===null||f===void 0?void 0:f(o)},g));return k&&(A=k(A,{index:s,prefixCls:i,value:o,dragging:M})),A}),gt=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],ht=t.forwardRef(function(e,c){var r=e.prefixCls,f=e.style,i=e.onStartMove,o=e.onOffsetChange,s=e.values,b=e.handleRender,S=e.draggingIndex,k=qe(e,gt),M=t.useRef({});return t.useImperativeHandle(c,function(){return{focus:function(g){var u;(u=M.current[g])===null||u===void 0||u.focus()}}}),t.createElement(t.Fragment,null,s.map(function(h,g){return t.createElement(mt,ze({ref:function(n){n?M.current[g]=n:delete M.current[g]},dragging:S===g,prefixCls:r,style:ge(f,g),key:g,value:h,valueIndex:g,onStartMove:i,onOffsetChange:o,render:b},k))}))});function We(e){var c="touches"in e?e.touches[0]:e;return{pageX:c.pageX,pageY:c.pageY}}function bt(e,c,r,f,i,o,s,b,S){var k=t.useState(null),M=G(k,2),h=M[0],g=M[1],u=t.useState(-1),n=G(u,2),v=n[0],l=n[1],m=t.useState(r),a=G(m,2),y=a[0],P=a[1],x=t.useState(r),T=G(x,2),E=T[0],F=T[1],_=t.useRef(null),R=t.useRef(null);t.useEffect(function(){v===-1&&P(r)},[r,v]),t.useEffect(function(){return function(){document.removeEventListener("mousemove",_.current),document.removeEventListener("mouseup",R.current),document.removeEventListener("touchmove",_.current),document.removeEventListener("touchend",R.current)}},[]);var A=function(L,N){y.some(function(Y,z){return Y!==L[z]})&&(N!==void 0&&g(N),P(L),s(L))},B=function(L,N){if(L===-1){var Y=E[0],z=E[E.length-1],he=f-Y,be=i-z,j=N*(i-f);j=Math.max(j,he),j=Math.min(j,be);var q=o(Y+j);j=q-Y;var re=E.map(function(ve){return ve+j});A(re)}else{var J=(i-f)*N,Q=ae(y);Q[L]=E[L];var ne=S(Q,J,L,"dist");A(ne.values,ne.value)}},X=t.useRef(B);X.current=B;var D=function(L,N){L.stopPropagation();var Y=r[N];l(N),g(Y),F(r);var z=We(L),he=z.pageX,be=z.pageY,j=function(J){J.preventDefault();var Q=We(J),ne=Q.pageX,ve=Q.pageY,ye=ne-he,Ce=ve-be,V=e.current.getBoundingClientRect(),ue=V.width,ie=V.height,H;switch(c){case"btt":H=-Ce/ie;break;case"ttb":H=Ce/ie;break;case"rtl":H=-ye/ue;break;default:H=ye/ue}X.current(N,H)},q=function re(J){J.preventDefault(),document.removeEventListener("mouseup",re),document.removeEventListener("mousemove",j),document.removeEventListener("touchend",re),document.removeEventListener("touchmove",j),_.current=null,R.current=null,l(-1),b()};document.addEventListener("mouseup",q),document.addEventListener("mousemove",j),document.addEventListener("touchend",q),document.addEventListener("touchmove",j),_.current=j,R.current=q},K=t.useMemo(function(){var U=ae(r).sort(function(N,Y){return N-Y}),L=ae(y).sort(function(N,Y){return N-Y});return U.every(function(N,Y){return N===L[Y]})?y:r},[r,y]);return[v,h,K,D]}function yt(e){var c=e.prefixCls,r=e.style,f=e.start,i=e.end,o=e.index,s=e.onStartMove,b=t.useContext(se),S=b.direction,k=b.min,M=b.max,h=b.disabled,g=b.range,u="".concat(c,"-track"),n=De(f,k,M),v=De(i,k,M),l=function(y){!h&&s&&s(y,-1)},m={};switch(S){case"rtl":m.right="".concat(n*100,"%"),m.width="".concat(v*100-n*100,"%");break;case"btt":m.bottom="".concat(n*100,"%"),m.height="".concat(v*100-n*100,"%");break;case"ttb":m.top="".concat(n*100,"%"),m.height="".concat(v*100-n*100,"%");break;default:m.left="".concat(n*100,"%"),m.width="".concat(v*100-n*100,"%")}return t.createElement("div",{className:ke(u,g&&"".concat(u,"-").concat(o+1)),style:W(W({},m),r),onMouseDown:l,onTouchStart:l})}function Ct(e){var c=e.prefixCls,r=e.style,f=e.values,i=e.startPoint,o=e.onStartMove,s=t.useContext(se),b=s.included,S=s.range,k=s.min,M=t.useMemo(function(){if(!S){if(f.length===0)return[];var h=i??k,g=f[0];return[{start:Math.min(h,g),end:Math.max(h,g)}]}for(var u=[],n=0;n<f.length-1;n+=1)u.push({start:f[n],end:f[n+1]});return u},[f,S,i,k]);return b?M.map(function(h,g){var u=h.start,n=h.end;return t.createElement(yt,{index:g,prefixCls:c,style:ge(r,g),start:u,end:n,key:g,onStartMove:o})}):null}function St(e){var c=e.prefixCls,r=e.style,f=e.children,i=e.value,o=e.onClick,s=t.useContext(se),b=s.min,S=s.max,k=s.direction,M=s.includedStart,h=s.includedEnd,g=s.included,u="".concat(c,"-text"),n=Le(k,i,b,S);return t.createElement("span",{className:ke(u,te({},"".concat(u,"-active"),g&&M<=i&&i<=h)),style:W(W({},n),r),onMouseDown:function(l){l.stopPropagation()},onClick:function(){o(i)}},f)}function Mt(e){var c=e.prefixCls,r=e.marks,f=e.onClick,i="".concat(c,"-mark");return r.length?t.createElement("div",{className:i},r.map(function(o){var s=o.value,b=o.style,S=o.label;return t.createElement(St,{key:s,prefixCls:i,style:b,value:s,onClick:f},S)})):null}function kt(e){var c=e.prefixCls,r=e.value,f=e.style,i=e.activeStyle,o=t.useContext(se),s=o.min,b=o.max,S=o.direction,k=o.included,M=o.includedStart,h=o.includedEnd,g="".concat(c,"-dot"),u=k&&M<=r&&r<=h,n=W(W({},Le(S,r,s,b)),typeof f=="function"?f(r):f);return u&&(n=W(W({},n),typeof i=="function"?i(r):i)),t.createElement("span",{className:ke(g,te({},"".concat(g,"-active"),u)),style:n})}function Et(e){var c=e.prefixCls,r=e.marks,f=e.dots,i=e.style,o=e.activeStyle,s=t.useContext(se),b=s.min,S=s.max,k=s.step,M=t.useMemo(function(){var h=new Set;if(r.forEach(function(u){h.add(u.value)}),f&&k!==null)for(var g=b;g<=S;)h.add(g),g+=k;return Array.from(h)},[b,S,k,f,r]);return t.createElement("div",{className:"".concat(c,"-step")},M.map(function(h){return t.createElement(kt,{prefixCls:c,key:h,value:h,style:i,activeStyle:o})}))}function xt(e,c,r,f,i,o){var s=t.useCallback(function(u){var n=isFinite(u)?u:e;return n=Math.min(c,u),n=Math.max(e,n),n},[e,c]),b=t.useCallback(function(u){if(r!==null){var n=e+Math.round((s(u)-e)/r)*r,v=function(y){return(String(y).split(".")[1]||"").length},l=Math.max(v(r),v(c),v(e)),m=Number(n.toFixed(l));return e<=m&&m<=c?m:null}return null},[r,e,c,s]),S=t.useCallback(function(u){var n=s(u),v=f.map(function(a){return a.value});r!==null&&v.push(b(u)),v.push(e,c);var l=v[0],m=c-e;return v.forEach(function(a){var y=Math.abs(n-a);y<=m&&(l=a,m=y)}),l},[e,c,f,r,s,b]),k=function u(n,v,l){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof v=="number"){var a,y=n[l],P=y+v,x=[];f.forEach(function(R){x.push(R.value)}),x.push(e,c),x.push(b(y));var T=v>0?1:-1;m==="unit"?x.push(b(y+T*r)):x.push(b(P)),x=x.filter(function(R){return R!==null}).filter(function(R){return v<0?R<=y:R>=y}),m==="unit"&&(x=x.filter(function(R){return R!==y}));var E=m==="unit"?y:P;a=x[0];var F=Math.abs(a-E);if(x.forEach(function(R){var A=Math.abs(R-E);A<F&&(a=R,F=A)}),a===void 0)return v<0?e:c;if(m==="dist")return a;if(Math.abs(v)>1){var _=ae(n);return _[l]=a,u(_,v-T,l,m)}return a}else{if(v==="min")return e;if(v==="max")return c}},M=function(n,v,l){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",a=n[l],y=k(n,v,l,m);return{value:y,changed:y!==a}},h=function(n){return o===null&&n===0||typeof o=="number"&&n<o},g=function(n,v,l){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",a=n.map(S),y=a[l],P=k(a,v,l,m);if(a[l]=P,i===!1){var x=o||0;l>0&&a[l-1]!==y&&(a[l]=Math.max(a[l],a[l-1]+x)),l<a.length-1&&a[l+1]!==y&&(a[l]=Math.min(a[l],a[l+1]-x))}else if(typeof o=="number"||o===null){for(var T=l+1;T<a.length;T+=1)for(var E=!0;h(a[T]-a[T-1])&&E;){var F=M(a,1,T);a[T]=F.value,E=F.changed}for(var _=l;_>0;_-=1)for(var R=!0;h(a[_]-a[_-1])&&R;){var A=M(a,-1,_-1);a[_-1]=A.value,R=A.changed}for(var B=a.length-1;B>0;B-=1)for(var X=!0;h(a[B]-a[B-1])&&X;){var D=M(a,-1,B-1);a[B-1]=D.value,X=D.changed}for(var K=0;K<a.length-1;K+=1)for(var U=!0;h(a[K+1]-a[K])&&U;){var L=M(a,1,K+1);a[K+1]=L.value,U=L.changed}}return{value:a[l],values:a}};return[S,g]}var Dt=t.forwardRef(function(e,c){var r,f=e.prefixCls,i=f===void 0?"rc-slider":f,o=e.className,s=e.style,b=e.disabled,S=b===void 0?!1:b,k=e.autoFocus,M=e.onFocus,h=e.onBlur,g=e.min,u=g===void 0?0:g,n=e.max,v=n===void 0?100:n,l=e.step,m=l===void 0?1:l,a=e.value,y=e.defaultValue,P=e.range,x=e.count,T=e.onChange,E=e.onBeforeChange,F=e.onAfterChange,_=e.allowCross,R=_===void 0?!0:_,A=e.pushable,B=A===void 0?!1:A,X=e.draggableTrack,D=e.reverse,K=e.vertical,U=e.included,L=U===void 0?!0:U,N=e.startPoint,Y=e.trackStyle,z=e.handleStyle,he=e.railStyle,be=e.dotStyle,j=e.activeDotStyle,q=e.marks,re=e.dots,J=e.handleRender,Q=e.tabIndex,ne=Q===void 0?0:Q,ve=e.ariaLabelForHandle,ye=e.ariaLabelledByForHandle,Ce=e.ariaValueTextFormatterForHandle,V=t.useRef(),ue=t.useRef(),ie=t.useMemo(function(){return K?D?"ttb":"btt":D?"rtl":"ltr"},[D,K]),H=t.useMemo(function(){return isFinite(u)?u:0},[u]),de=t.useMemo(function(){return isFinite(v)?v:100},[v]),le=t.useMemo(function(){return m!==null&&m<=0?1:m},[m]),Je=t.useMemo(function(){return B===!0?le:B>=0?B:!1},[B,le]),Ee=t.useMemo(function(){var w=Object.keys(q||{});return w.map(function(C){var d=q[C],O={value:Number(C)};return d&&st(d)==="object"&&!t.isValidElement(d)&&("label"in d||"style"in d)?(O.style=d.style,O.label=d.label):O.label=d,O}).filter(function(C){var d=C.label;return d||typeof d=="number"}).sort(function(C,d){return C.value-d.value})},[q]),Qe=xt(H,de,le,Ee,R,Je),Pe=G(Qe,2),xe=Pe[0],He=Pe[1],Ve=dt(y,{value:a}),Oe=G(Ve,2),Z=Oe[0],Ze=Oe[1],I=t.useMemo(function(){var w=Z==null?[]:Array.isArray(Z)?Z:[Z],C=G(w,1),d=C[0],O=d===void 0?H:d,$=Z===null?[]:[O];if(P){if($=ae(w),x||Z===void 0){var me=x>=0?x+1:2;for($=$.slice(0,me);$.length<me;){var ce;$.push((ce=$[$.length-1])!==null&&ce!==void 0?ce:H)}}$.sort(function(p,Se){return p-Se})}return $.forEach(function(p,Se){$[Se]=xe(p)}),$},[Z,P,H,x,xe]),Re=t.useRef(I);Re.current=I;var oe=function(C){return P?C:C[0]},Fe=function(C){var d=ae(C).sort(function(O,$){return O-$});T&&!vt(d,Re.current)&&T(oe(d)),Ze(d)},Te=function(C){if(!S){var d=0,O=de-H;I.forEach(function(me,ce){var p=Math.abs(C-me);p<=O&&(O=p,d=ce)});var $=ae(I);$[d]=C,P&&!I.length&&x===void 0&&$.push(C),E==null||E(oe($)),Fe($),F==null||F(oe($))}},pe=function(C){C.preventDefault();var d=ue.current.getBoundingClientRect(),O=d.width,$=d.height,me=d.left,ce=d.top,p=d.bottom,Se=d.right,Ie=C.clientX,Ge=C.clientY,Me;switch(ie){case"btt":Me=(p-Ge)/$;break;case"ttb":Me=(Ge-ce)/$;break;case"rtl":Me=(Se-Ie)/O;break;default:Me=(Ie-me)/O}var ct=H+Me*(de-H);Te(xe(ct))},et=t.useState(null),Ne=G(et,2),we=Ne[0],Be=Ne[1],tt=function(C,d){if(!S){var O=He(I,C,d);E==null||E(oe(I)),Fe(O.values),F==null||F(oe(O.values)),Be(O.value)}};t.useEffect(function(){if(we!==null){var w=I.indexOf(we);w>=0&&V.current.focus(w)}Be(null)},[we]);var at=t.useMemo(function(){return X&&le===null?!1:X},[X,le]),rt=function(){F==null||F(oe(Re.current))},nt=bt(ue,ie,I,H,de,xe,Fe,rt,He),$e=G(nt,4),Ae=$e[0],ut=$e[1],_e=$e[2],it=$e[3],Xe=function(C,d){it(C,d),E==null||E(oe(Re.current))},Ye=Ae!==-1;t.useEffect(function(){if(!Ye){var w=I.lastIndexOf(ut);V.current.focus(w)}},[Ye]);var fe=t.useMemo(function(){return ae(_e).sort(function(w,C){return w-C})},[_e]),lt=t.useMemo(function(){return P?[fe[0],fe[fe.length-1]]:[H,fe[0]]},[fe,P,H]),je=G(lt,2),Ke=je[0],Ue=je[1];t.useImperativeHandle(c,function(){return{focus:function(){V.current.focus(0)},blur:function(){var C=document,d=C.activeElement;ue.current.contains(d)&&(d==null||d.blur())}}}),t.useEffect(function(){k&&V.current.focus(0)},[]);var ot=t.useMemo(function(){return{min:H,max:de,direction:ie,disabled:S,step:le,included:L,includedStart:Ke,includedEnd:Ue,range:P,tabIndex:ne,ariaLabelForHandle:ve,ariaLabelledByForHandle:ye,ariaValueTextFormatterForHandle:Ce}},[H,de,ie,S,le,L,Ke,Ue,P,ne,ve,ye,Ce]);return t.createElement(se.Provider,{value:ot},t.createElement("div",{ref:ue,className:ke(i,o,(r={},te(r,"".concat(i,"-disabled"),S),te(r,"".concat(i,"-vertical"),K),te(r,"".concat(i,"-horizontal"),!K),te(r,"".concat(i,"-with-marks"),Ee.length),r)),style:s,onMouseDown:pe},t.createElement("div",{className:"".concat(i,"-rail"),style:he}),t.createElement(Ct,{prefixCls:i,style:Y,values:fe,startPoint:N,onStartMove:at?Xe:null}),t.createElement(Et,{prefixCls:i,marks:Ee,dots:re,style:be,activeStyle:j}),t.createElement(ht,{ref:V,prefixCls:i,style:z,values:_e,draggingIndex:Ae,onStartMove:Xe,onOffsetChange:tt,onFocus:M,onBlur:h,handleRender:J}),t.createElement(Mt,{prefixCls:i,marks:Ee,onClick:Te})))});export{Dt as S};
