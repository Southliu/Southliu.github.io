import{d as b,g as L,b as G,c as P,f as M,r as Q}from"./@babel_runtime.3e487d10.js";import{r as o}from"./react.bfbbfd99.js";import{r as q}from"./react-dom.0301f95b.js";import{a as F}from"./rc-motion.f98b02b6.js";import{c as w}from"./classnames.aa374d53.js";var W=o.forwardRef(function(e,y){var C=e.prefixCls,s=e.style,v=e.className,u=e.duration,l=u===void 0?4.5:u,R=e.eventKey,k=e.content,x=e.closable,_=e.closeIcon,p=_===void 0?"x":_,E=e.props,S=e.onClick,m=e.onNoticeClose,$=o.useState(!1),h=b($,2),f=h[0],g=h[1],N=function(){m(R)};o.useEffect(function(){if(!f&&l>0){var c=setTimeout(function(){N()},l*1e3);return function(){clearTimeout(c)}}},[l,f]);var d="".concat(C,"-notice");return o.createElement("div",L({},E,{ref:y,className:w(d,v,G({},"".concat(d,"-closable"),x)),style:s,onMouseEnter:function(){g(!0)},onMouseLeave:function(){g(!1)},onClick:S}),o.createElement("div",{className:"".concat(d,"-content")},k),x&&o.createElement("a",{tabIndex:0,className:"".concat(d,"-close"),onClick:function(t){t.preventDefault(),t.stopPropagation(),N()}},p))});const z=W;var B=o.forwardRef(function(e,y){var C=e.prefixCls,s=C===void 0?"rc-notification":C,v=e.container,u=e.motion,l=e.maxCount,R=e.className,k=e.style,x=e.onAllRemoved,_=o.useState([]),p=b(_,2),E=p[0],S=p[1],m=function(n){var i,a=E.find(function(r){return r.key===n});a==null||(i=a.onClose)===null||i===void 0||i.call(a),S(function(r){return r.filter(function(A){return A.key!==n})})};o.useImperativeHandle(y,function(){return{open:function(n){S(function(i){var a=P(i),r=a.findIndex(function(A){return A.key===n.key});return r>=0?a[r]=n:a.push(n),l>0&&a.length>l&&(a=a.slice(-l)),a})},close:function(n){m(n)},destroy:function(){S([])}}});var $=o.useState({}),h=b($,2),f=h[0],g=h[1];o.useEffect(function(){var t={};E.forEach(function(n){var i=n.placement,a=i===void 0?"topRight":i;a&&(t[a]=t[a]||[],t[a].push(n))}),Object.keys(f).forEach(function(n){t[n]=t[n]||[]}),g(t)},[E]);var N=function(n){g(function(i){var a=M({},i),r=a[n]||[];return r.length||delete a[n],a})},d=o.useRef(!1);if(o.useEffect(function(){Object.keys(f).length>0?d.current=!0:d.current&&(x==null||x(),d.current=!1)},[f]),!v)return null;var c=Object.keys(f);return q.createPortal(o.createElement(o.Fragment,null,c.map(function(t){var n=f[t],i=n.map(function(r){return{config:r,key:r.key}}),a=typeof u=="function"?u(t):u;return o.createElement(F,L({key:t,className:w(s,"".concat(s,"-").concat(t),R==null?void 0:R(t)),style:k==null?void 0:k(t),keys:i,motionAppear:!0},a,{onAllRemoved:function(){N(t)}}),function(r,A){var I=r.config,T=r.className,j=r.style,K=I.key,H=I.className,D=I.style;return o.createElement(z,L({},I,{ref:A,prefixCls:s,className:w(T,H),style:M(M({},j),D),key:K,eventKey:K,onNoticeClose:m}))})})),v)}),J=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],U=function(){return document.body},O=0;function V(){for(var e={},y=arguments.length,C=new Array(y),s=0;s<y;s++)C[s]=arguments[s];return C.forEach(function(v){v&&Object.keys(v).forEach(function(u){var l=v[u];l!==void 0&&(e[u]=l)})}),e}function ne(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=e.getContainer,C=y===void 0?U:y,s=e.motion,v=e.prefixCls,u=e.maxCount,l=e.className,R=e.style,k=e.onAllRemoved,x=Q(e,J),_=o.useState(),p=b(_,2),E=p[0],S=p[1],m=o.useRef(),$=o.createElement(B,{container:E,ref:m,prefixCls:v,motion:s,maxCount:u,className:l,style:R,onAllRemoved:k}),h=o.useState([]),f=b(h,2),g=f[0],N=f[1],d=o.useMemo(function(){return{open:function(t){var n=V(x,t);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(O),O+=1),N(function(i){return[].concat(P(i),[{type:"open",config:n}])})},close:function(t){N(function(n){return[].concat(P(n),[{type:"close",key:t}])})},destroy:function(){N(function(t){return[].concat(P(t),[{type:"destroy"}])})}}},[]);return o.useEffect(function(){S(C())}),o.useEffect(function(){m.current&&g.length&&(g.forEach(function(c){switch(c.type){case"open":m.current.open(c.config);break;case"close":m.current.close(c.key);break;case"destroy":m.current.destroy();break}}),N([]))},[g]),[d,$]}export{z as N,ne as u};
