import{r as f}from"./react@18.2.0-9cdefec6.js";import{c as _}from"./classnames@2.3.2-d75d9a59.js";import{d as h,_ as Z,b as ee,c as W,a as V,k as ne}from"./@babel_runtime@7.19.0-16d3a89d.js";import{b as H,j as m,F as ae}from"./@ant-design_icons@4.7.0_react-dom@18.2.0_react@18.2.0-0d73ff6d.js";import{d as te,o as re}from"./rc-util@5.24.4_react-dom@18.2.0_react@18.2.0-c033d194.js";function T(e){return!!(e.addonBefore||e.addonAfter)}function p(e){return!!(e.prefix||e.suffix||e.allowClear)}function X(e,n,c,t){if(!!c){var r=n;if(n.type==="click"){var o=e.cloneNode(!0);r=Object.create(n,{target:{value:o},currentTarget:{value:o}}),o.value="",c(r);return}if(t!==void 0){r=Object.create(n,{target:{value:e},currentTarget:{value:e}}),e.value=t,c(r);return}c(r)}}function ue(e,n){if(!!e){e.focus(n);var c=n||{},t=c.cursor;if(t){var r=e.value.length;switch(t){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}function Y(e){return typeof e>"u"||e===null?"":String(e)}var le=function(n){var c=n.inputElement,t=n.prefixCls,r=n.prefix,o=n.suffix,F=n.addonBefore,C=n.addonAfter,B=n.className,d=n.style,w=n.affixWrapperClassName,q=n.groupClassName,$=n.wrapperClassName,N=n.disabled,y=n.readOnly,b=n.focused,S=n.triggerFocus,i=n.allowClear,R=n.value,G=n.handleReset,D=n.hidden,j=f.useRef(null),z=function(v){var x;!((x=j.current)===null||x===void 0)&&x.contains(v.target)&&(S==null||S())},O=function(){var v;if(!i)return null;var x=!N&&!y&&R,k="".concat(t,"-clear-icon"),u=Z(i)==="object"&&(i==null?void 0:i.clearIcon)?i.clearIcon:"\u2716";return m("span",{onClick:G,onMouseDown:function(I){return I.preventDefault()},className:_(k,(v={},h(v,"".concat(k,"-hidden"),!x),h(v,"".concat(k,"-has-suffix"),!!o),v)),role:"button",tabIndex:-1,children:u})},M=f.cloneElement(c,{value:R,hidden:D});if(p(n)){var s,g="".concat(t,"-affix-wrapper"),A=_(g,(s={},h(s,"".concat(g,"-disabled"),N),h(s,"".concat(g,"-focused"),b),h(s,"".concat(g,"-readonly"),y),h(s,"".concat(g,"-input-with-clear-btn"),o&&i&&R),s),!T(n)&&B,w),l=(o||i)&&H("span",{className:"".concat(t,"-suffix"),children:[O(),o]});M=H("span",{className:A,style:d,hidden:!T(n)&&D,onMouseDown:z,ref:j,children:[r&&m("span",{className:"".concat(t,"-prefix"),children:r}),f.cloneElement(c,{style:null,value:R,hidden:null}),l]})}if(T(n)){var E="".concat(t,"-group"),L="".concat(E,"-addon"),J=_("".concat(t,"-wrapper"),E,$),Q=_("".concat(t,"-group-wrapper"),B,q);return m("span",{className:Q,style:d,hidden:D,children:H("span",{className:J,children:[F&&m("span",{className:L,children:F}),f.cloneElement(M,{style:null,hidden:null}),C&&m("span",{className:L,children:C})]})})}return M},oe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName"],ve=f.forwardRef(function(e,n){var c=e.autoComplete,t=e.onChange,r=e.onFocus,o=e.onBlur,F=e.onPressEnter,C=e.onKeyDown,B=e.prefixCls,d=B===void 0?"rc-input":B,w=e.disabled,q=e.htmlSize,$=e.className,N=e.maxLength,y=e.suffix,b=e.showCount,S=e.type,i=S===void 0?"text":S,R=e.inputClassName,G=ee(e,oe),D=te(e.defaultValue,{value:e.value}),j=W(D,2),z=j[0],O=j[1],M=f.useState(!1),s=W(M,2),g=s[0],A=s[1],l=f.useRef(null),E=function(a){l.current&&ue(l.current,a)};f.useImperativeHandle(n,function(){return{focus:E,blur:function(){var a;(a=l.current)===null||a===void 0||a.blur()},setSelectionRange:function(a,I,P){var K;(K=l.current)===null||K===void 0||K.setSelectionRange(a,I,P)},select:function(){var a;(a=l.current)===null||a===void 0||a.select()},input:l.current}}),f.useEffect(function(){A(function(u){return u&&w?!1:u})},[w]);var L=function(a){e.value===void 0&&O(a.target.value),l.current&&X(l.current,a,t)},J=function(a){F&&a.key==="Enter"&&F(a),C==null||C(a)},Q=function(a){A(!0),r==null||r(a)},U=function(a){A(!1),o==null||o(a)},v=function(a){O(""),E(),l.current&&X(l.current,a,t)},x=function(){var a=re(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","wrapperClassName","htmlSize"]);return m("input",{...V(V({autoComplete:c},a),{},{onChange:L,onFocus:Q,onBlur:U,onKeyDown:J,className:_(d,h({},"".concat(d,"-disabled"),w),R,!T(e)&&!p(e)&&$),ref:l,size:q,type:i})})},k=function(){var a=Number(N)>0;if(y||b){var I=Y(z),P=ne(I).length,K=Z(b)==="object"?b.formatter({value:I,count:P,maxLength:N}):"".concat(P).concat(a?" / ".concat(N):"");return H(ae,{children:[!!b&&m("span",{className:_("".concat(d,"-show-count-suffix"),h({},"".concat(d,"-show-count-has-suffix"),!!y)),children:K}),y]})}return null};return m(le,{...V(V({},G),{},{prefixCls:d,className:$,inputElement:x(),handleReset:v,value:Y(z),focused:g,triggerFocus:E,suffix:k(),disabled:w})})});export{ve as I};
