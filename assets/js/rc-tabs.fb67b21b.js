import{b as V,r as xe,g as oe,f as H,d as N,e as ze,c as _e}from"./@babel_runtime.3e487d10.js";import{r as t}from"./react.bfbbfd99.js";import{c as j}from"./classnames.aa374d53.js";import{h as pe,K as Z,e as Nt,E as Pt,j as et}from"./rc-util.4aaadd18.js";import{C as wt}from"./rc-motion.789092ea.js";import{R as tt}from"./rc-resize-observer.942fbc66.js";import{D as It}from"./rc-dropdown.cf6556a2.js";import{E as Mt,M as Lt}from"./rc-menu.d08e38fc.js";const Te=t.createContext(null);var dt=t.forwardRef(function(e,a){var r=e.prefixCls,i=e.className,o=e.style,n=e.id,c=e.active,s=e.tabKey,l=e.children;return t.createElement("div",{id:n&&"".concat(n,"-panel-").concat(s),role:"tabpanel",tabIndex:c?0:-1,"aria-labelledby":n&&"".concat(n,"-tab-").concat(s),"aria-hidden":!c,style:o,className:j(r,c&&"".concat(r,"-active"),i),ref:a},l)}),At=["key","forceRender","style","className"];function Bt(e){var a=e.id,r=e.activeKey,i=e.animated,o=e.tabPosition,n=e.destroyInactiveTabPane,c=t.useContext(Te),s=c.prefixCls,l=c.tabs,S=i.tabPane,g="".concat(s,"-tabpane");return t.createElement("div",{className:j("".concat(s,"-content-holder"))},t.createElement("div",{className:j("".concat(s,"-content"),"".concat(s,"-content-").concat(o),V({},"".concat(s,"-content-animated"),S))},l.map(function(u){var y=u.key,P=u.forceRender,k=u.style,I=u.className,L=xe(u,At),w=y===r;return t.createElement(wt,oe({key:y,visible:w,forceRender:P,removeOnLeave:!!n,leavedClassName:"".concat(g,"-hidden")},i.tabPaneMotion),function(M,A){var F=M.style,D=M.className;return t.createElement(dt,oe({},L,{prefixCls:g,id:a,tabKey:y,animated:S,active:w,style:H(H({},k),F),className:j(I,D),ref:A}))})})))}var at={width:0,height:0,left:0,top:0};function Dt(e,a,r){return t.useMemo(function(){for(var i,o=new Map,n=a.get((i=e[0])===null||i===void 0?void 0:i.key)||at,c=n.left+n.width,s=0;s<e.length;s+=1){var l=e[s].key,S=a.get(l);if(!S){var g;S=a.get((g=e[s-1])===null||g===void 0?void 0:g.key)||at}var u=o.get(l)||H({},S);u.right=c-u.left-u.width,o.set(l,u)}return o},[e.map(function(i){return i.key}).join("_"),a,r])}function ft(e){var a=t.useRef(),r=t.useRef(!1);function i(){for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];r.current||(pe.cancel(a.current),a.current=pe(function(){e.apply(void 0,n)}))}return t.useEffect(function(){return r.current=!1,function(){r.current=!0,pe.cancel(a.current)}},[]),i}function Kt(e){var a=t.useRef([]),r=t.useState({}),i=N(r,2),o=i[1],n=t.useRef(typeof e=="function"?e():e),c=ft(function(){var l=n.current;a.current.forEach(function(S){l=S(l)}),a.current=[],n.current=l,o({})});function s(l){a.current.push(l),c()}return[n.current,s]}function nt(e,a){var r=t.useRef(e),i=t.useState({}),o=N(i,2),n=o[1];function c(s){var l=typeof s=="function"?s(r.current):s;l!==r.current&&a(l,r.current),r.current=l,n({})}return[r.current,c]}var zt=.1,rt=.01,Ce=20,ot=Math.pow(.995,Ce);function $t(e,a){var r=t.useState(),i=N(r,2),o=i[0],n=i[1],c=t.useState(0),s=N(c,2),l=s[0],S=s[1],g=t.useState(0),u=N(g,2),y=u[0],P=u[1],k=t.useState(),I=N(k,2),L=I[0],w=I[1],M=t.useRef();function A(h){var C=h.touches[0],d=C.screenX,x=C.screenY;n({x:d,y:x}),window.clearInterval(M.current)}function F(h){if(!!o){h.preventDefault();var C=h.touches[0],d=C.screenX,x=C.screenY;n({x:d,y:x});var v=d-o.x,p=x-o.y;a(v,p);var G=Date.now();S(G),P(G-l),w({x:v,y:p})}}function D(){if(!!o&&(n(null),w(null),L)){var h=L.x/y,C=L.y/y,d=Math.abs(h),x=Math.abs(C);if(Math.max(d,x)<zt)return;var v=h,p=C;M.current=window.setInterval(function(){if(Math.abs(v)<rt&&Math.abs(p)<rt){window.clearInterval(M.current);return}v*=ot,p*=ot,a(v*Ce,p*Ce)},Ce)}}var R=t.useRef();function E(h){var C=h.deltaX,d=h.deltaY,x=0,v=Math.abs(C),p=Math.abs(d);v===p?x=R.current==="x"?C:d:v>p?(x=C,R.current="x"):(x=d,R.current="y"),a(-x,-x)&&h.preventDefault()}var K=t.useRef(null);K.current={onTouchStart:A,onTouchMove:F,onTouchEnd:D,onWheel:E},t.useEffect(function(){function h(v){K.current.onTouchStart(v)}function C(v){K.current.onTouchMove(v)}function d(v){K.current.onTouchEnd(v)}function x(v){K.current.onWheel(v)}return document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("touchend",d,{passive:!1}),e.current.addEventListener("touchstart",h,{passive:!1}),e.current.addEventListener("wheel",x),function(){document.removeEventListener("touchmove",C),document.removeEventListener("touchend",d)}},[])}var it={width:0,height:0,left:0,top:0,right:0};function Wt(e,a,r,i,o,n,c){var s=c.tabs,l=c.tabPosition,S=c.rtl,g,u,y;return["top","bottom"].includes(l)?(g="width",u=S?"right":"left",y=Math.abs(r)):(g="height",u="top",y=-r),t.useMemo(function(){if(!s.length)return[0,0];for(var P=s.length,k=P,I=0;I<P;I+=1){var L=e.get(s[I].key)||it;if(L[u]+L[g]>y+a){k=I-1;break}}for(var w=0,M=P-1;M>=0;M-=1){var A=e.get(s[M].key)||it;if(A[u]<y){w=M+1;break}}return[w,k]},[e,a,i,o,n,y,l,s.map(function(P){return P.key}).join("_"),S])}function ct(e){var a;return e instanceof Map?(a={},e.forEach(function(r,i){a[i]=r})):a=e,JSON.stringify(a)}function Ot(e,a){var r=e.prefixCls,i=e.editable,o=e.locale,n=e.style;return!i||i.showAdd===!1?null:t.createElement("button",{ref:a,type:"button",className:"".concat(r,"-nav-add"),style:n,"aria-label":(o==null?void 0:o.addAriaLabel)||"Add tab",onClick:function(s){i.onEdit("add",{event:s})}},i.addIcon||"+")}const vt=t.forwardRef(Ot);var st=t.forwardRef(function(e,a){var r=e.position,i=e.prefixCls,o=e.extra;if(!o)return null;var n,c={};return ze(o)==="object"&&!t.isValidElement(o)?c=o:c.right=o,r==="right"&&(n=c.right),r==="left"&&(n=c.left),n?t.createElement("div",{className:"".concat(i,"-extra-content"),ref:a},n):null});function Vt(e,a){var r=e.prefixCls,i=e.id,o=e.tabs,n=e.locale,c=e.mobile,s=e.moreIcon,l=s===void 0?"More":s,S=e.moreTransitionName,g=e.style,u=e.className,y=e.editable,P=e.tabBarGutter,k=e.rtl,I=e.removeAriaLabel,L=e.onTabClick,w=e.getPopupContainer,M=e.popupClassName,A=t.useState(!1),F=N(A,2),D=F[0],R=F[1],E=t.useState(null),K=N(E,2),h=K[0],C=K[1],d="".concat(i,"-more-popup"),x="".concat(r,"-dropdown"),v=h!==null?"".concat(d,"-").concat(h):null,p=n==null?void 0:n.dropdownAriaLabel;function G(f,B){f.preventDefault(),f.stopPropagation(),y.onEdit("remove",{key:B,event:f})}var se=t.createElement(Mt,{onClick:function(B){var X=B.key,O=B.domEvent;L(X,O),R(!1)},prefixCls:"".concat(x,"-menu"),id:d,tabIndex:-1,role:"listbox","aria-activedescendant":v,selectedKeys:[h],"aria-label":p!==void 0?p:"expanded dropdown"},o.map(function(f){var B=y&&f.closable!==!1&&!f.disabled;return t.createElement(Lt,{key:f.key,id:"".concat(d,"-").concat(f.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(f.key),disabled:f.disabled},t.createElement("span",null,f.label),B&&t.createElement("button",{type:"button","aria-label":I||"remove",tabIndex:0,className:"".concat(x,"-menu-item-remove"),onClick:function(O){O.stopPropagation(),G(O,f.key)}},f.closeIcon||y.removeIcon||"×"))}));function Q(f){for(var B=o.filter(function(ne){return!ne.disabled}),X=B.findIndex(function(ne){return ne.key===h})||0,O=B.length,_=0;_<O;_+=1){X=(X+f+O)%O;var ie=B[X];if(!ie.disabled){C(ie.key);return}}}function U(f){var B=f.which;if(!D){[Z.DOWN,Z.SPACE,Z.ENTER].includes(B)&&(R(!0),f.preventDefault());return}switch(B){case Z.UP:Q(-1),f.preventDefault();break;case Z.DOWN:Q(1),f.preventDefault();break;case Z.ESC:R(!1);break;case Z.SPACE:case Z.ENTER:h!==null&&L(h,f);break}}t.useEffect(function(){var f=document.getElementById(v);f&&f.scrollIntoView&&f.scrollIntoView(!1)},[h]),t.useEffect(function(){D||C(null)},[D]);var q=V({},k?"marginRight":"marginLeft",P);o.length||(q.visibility="hidden",q.order=1);var le=j(V({},"".concat(x,"-rtl"),k)),ae=c?null:t.createElement(It,{prefixCls:x,overlay:se,trigger:["hover"],visible:o.length?D:!1,transitionName:S,onVisibleChange:R,overlayClassName:j(le,M),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:w},t.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:q,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":d,id:"".concat(i,"-more"),"aria-expanded":D,onKeyDown:U},l));return t.createElement("div",{className:j("".concat(r,"-nav-operations"),u),style:g,ref:a},ae,t.createElement(vt,{prefixCls:r,locale:n,editable:y}))}const Ft=t.memo(t.forwardRef(Vt),function(e,a){return a.tabMoving});function Ut(e){var a,r=e.prefixCls,i=e.id,o=e.active,n=e.tab,c=n.key,s=n.label,l=n.disabled,S=n.closeIcon,g=e.closable,u=e.renderWrapper,y=e.removeAriaLabel,P=e.editable,k=e.onClick,I=e.onFocus,L=e.style,w="".concat(r,"-tab"),M=P&&g!==!1&&!l;function A(R){l||k(R)}function F(R){R.preventDefault(),R.stopPropagation(),P.onEdit("remove",{key:c,event:R})}var D=t.createElement("div",{key:c,"data-node-key":c,className:j(w,(a={},V(a,"".concat(w,"-with-remove"),M),V(a,"".concat(w,"-active"),o),V(a,"".concat(w,"-disabled"),l),a)),style:L,onClick:A},t.createElement("div",{role:"tab","aria-selected":o,id:i&&"".concat(i,"-tab-").concat(c),className:"".concat(w,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(c),"aria-disabled":l,tabIndex:l?null:0,onClick:function(E){E.stopPropagation(),A(E)},onKeyDown:function(E){[Z.SPACE,Z.ENTER].includes(E.which)&&(E.preventDefault(),A(E))},onFocus:I},s),M&&t.createElement("button",{type:"button","aria-label":y||"remove",tabIndex:0,className:"".concat(w,"-remove"),onClick:function(E){E.stopPropagation(),F(E)}},S||P.removeIcon||"×"));return u?u(D):D}var ce=function(a){var r=a.current||{},i=r.offsetWidth,o=i===void 0?0:i,n=r.offsetHeight,c=n===void 0?0:n;return[o,c]},Ee=function(a,r){return a[r?0:1]};function Ht(e,a){var r,i=t.useContext(Te),o=i.prefixCls,n=i.tabs,c=e.className,s=e.style,l=e.id,S=e.animated,g=e.activeKey,u=e.rtl,y=e.extra,P=e.editable,k=e.locale,I=e.tabPosition,L=e.tabBarGutter,w=e.children,M=e.onTabClick,A=e.onTabScroll,F=t.useRef(),D=t.useRef(),R=t.useRef(),E=t.useRef(),K=t.useRef(),h=t.useRef(),C=t.useRef(),d=I==="top"||I==="bottom",x=nt(0,function(b,$){d&&A&&A({direction:b>$?"left":"right"})}),v=N(x,2),p=v[0],G=v[1],se=nt(0,function(b,$){!d&&A&&A({direction:b>$?"top":"bottom"})}),Q=N(se,2),U=Q[0],q=Q[1],le=t.useState([0,0]),ae=N(le,2),f=ae[0],B=ae[1],X=t.useState([0,0]),O=N(X,2),_=O[0],ie=O[1],ne=t.useState([0,0]),ue=N(ne,2),ke=ue[0],Re=ue[1],Ne=t.useState([0,0]),de=N(Ne,2),Pe=de[0],we=de[1],T=Kt(new Map),ee=N(T,2),fe=ee[0],mt=ee[1],he=Dt(n,fe,_[0]),re=Ee(f,d),J=Ee(_,d),Ie=Ee(ke,d),$e=Ee(Pe,d),bt=re<J+Ie,Y=bt?re-$e:re-Ie,pt="".concat(o,"-nav-operations-hidden"),ve=0,me=0;d&&u?(ve=0,me=Math.max(0,J-Y)):(ve=Math.min(0,Y-J),me=0);function Me(b){return b<ve?ve:b>me?me:b}var We=t.useRef(),ht=t.useState(),Oe=N(ht,2),ye=Oe[0],Ve=Oe[1];function Le(){Ve(Date.now())}function Ae(){window.clearTimeout(We.current)}$t(E,function(b,$){function m(z,W){z(function(ge){var Rt=Me(ge+W);return Rt})}return re>=J?!1:(d?m(G,b):m(q,$),Ae(),Le(),!0)}),t.useEffect(function(){return Ae(),ye&&(We.current=window.setTimeout(function(){Ve(0)},100)),Ae},[ye]);var yt=Wt(he,Y,d?p:U,J,Ie,$e,H(H({},e),{},{tabs:n})),Fe=N(yt,2),St=Fe[0],gt=Fe[1],Ue=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,m=he.get($)||{width:0,height:0,left:0,right:0,top:0};if(d){var z=p;u?m.right<p?z=m.right:m.right+m.width>p+Y&&(z=m.right+m.width-Y):m.left<-p?z=-m.left:m.left+m.width>-p+Y&&(z=-(m.left+m.width-Y)),q(0),G(Me(z))}else{var W=U;m.top<-U?W=-m.top:m.top+m.height>-U+Y&&(W=-(m.top+m.height-Y)),G(0),q(Me(W))}},Se={};I==="top"||I==="bottom"?Se[u?"marginRight":"marginLeft"]=L:Se.marginTop=L;var He=n.map(function(b,$){var m=b.key;return t.createElement(Ut,{id:l,prefixCls:o,key:m,tab:b,style:$===0?void 0:Se,closable:b.closable,editable:P,active:m===g,renderWrapper:w,removeAriaLabel:k==null?void 0:k.removeAriaLabel,onClick:function(W){M(m,W)},onFocus:function(){Ue(m),Le(),E.current&&(u||(E.current.scrollLeft=0),E.current.scrollTop=0)}})}),je=function(){return mt(function(){var $=new Map;return n.forEach(function(m){var z=m.key,W=K.current.querySelector('[data-node-key="'.concat(z,'"]'));W&&$.set(z,{width:W.offsetWidth,height:W.offsetHeight,left:W.offsetLeft,top:W.offsetTop})}),$})};t.useEffect(function(){je()},[n.map(function(b){return b.key}).join("_")]);var Be=ft(function(){var b=ce(F),$=ce(D),m=ce(R);B([b[0]-$[0]-m[0],b[1]-$[1]-m[1]]);var z=ce(C);Re(z);var W=ce(h);we(W);var ge=ce(K);ie([ge[0]-z[0],ge[1]-z[1]]),je()}),Et=n.slice(0,St),Ct=n.slice(gt+1),Ge=[].concat(_e(Et),_e(Ct)),xt=t.useState(),Xe=N(xt,2),Tt=Xe[0],kt=Xe[1],te=he.get(g),Ye=t.useRef();function Ze(){pe.cancel(Ye.current)}t.useEffect(function(){var b={};return te&&(d?(u?b.right=te.right:b.left=te.left,b.width=te.width):(b.top=te.top,b.height=te.height)),Ze(),Ye.current=pe(function(){kt(b)}),Ze},[te,d,u]),t.useEffect(function(){Ue()},[g,ct(te),ct(he),d]),t.useEffect(function(){Be()},[u]);var qe=!!Ge.length,be="".concat(o,"-nav-wrap"),De,Ke,Je,Qe;return d?u?(Ke=p>0,De=p+re<J):(De=p<0,Ke=-p+re<J):(Je=U<0,Qe=-U+re<J),t.createElement(tt,{onResize:Be},t.createElement("div",{ref:Nt(a,F),role:"tablist",className:j("".concat(o,"-nav"),c),style:s,onKeyDown:function(){Le()}},t.createElement(st,{ref:D,position:"left",extra:y,prefixCls:o}),t.createElement("div",{className:j(be,(r={},V(r,"".concat(be,"-ping-left"),De),V(r,"".concat(be,"-ping-right"),Ke),V(r,"".concat(be,"-ping-top"),Je),V(r,"".concat(be,"-ping-bottom"),Qe),r)),ref:E},t.createElement(tt,{onResize:Be},t.createElement("div",{ref:K,className:"".concat(o,"-nav-list"),style:{transform:"translate(".concat(p,"px, ").concat(U,"px)"),transition:ye?"none":void 0}},He,t.createElement(vt,{ref:C,prefixCls:o,locale:k,editable:P,style:H(H({},He.length===0?void 0:Se),{},{visibility:qe?"hidden":null})}),t.createElement("div",{className:j("".concat(o,"-ink-bar"),V({},"".concat(o,"-ink-bar-animated"),S.inkBar)),style:Tt})))),t.createElement(Ft,oe({},e,{removeAriaLabel:k==null?void 0:k.removeAriaLabel,ref:h,prefixCls:o,tabs:Ge,className:!qe&&pt,tabMoving:!!ye})),t.createElement(st,{ref:R,position:"right",extra:y,prefixCls:o})))}const lt=t.forwardRef(Ht);var jt=["renderTabBar"],Gt=["label","key"];function Xt(e){var a=e.renderTabBar,r=xe(e,jt),i=t.useContext(Te),o=i.tabs;if(a){var n=H(H({},r),{},{panes:o.map(function(c){var s=c.label,l=c.key,S=xe(c,Gt);return t.createElement(dt,oe({tab:s,key:l,tabKey:l},S))})});return a(n,lt)}return t.createElement(lt,r)}function Yt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},a;return e===!1?a={inkBar:!1,tabPane:!1}:e===!0?a={inkBar:!0,tabPane:!1}:a=H({inkBar:!0},ze(e)==="object"?e:{}),a.tabPaneMotion&&a.tabPane===void 0&&(a.tabPane=!0),!a.tabPaneMotion&&a.tabPane&&(a.tabPane=!1),a}var Zt=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],ut=0;function qt(e,a){var r,i=e.id,o=e.prefixCls,n=o===void 0?"rc-tabs":o,c=e.className,s=e.items,l=e.direction,S=e.activeKey,g=e.defaultActiveKey,u=e.editable,y=e.animated,P=e.tabPosition,k=P===void 0?"top":P,I=e.tabBarGutter,L=e.tabBarStyle,w=e.tabBarExtraContent,M=e.locale,A=e.moreIcon,F=e.moreTransitionName,D=e.destroyInactiveTabPane,R=e.renderTabBar,E=e.onChange,K=e.onTabClick,h=e.onTabScroll,C=e.getPopupContainer,d=e.popupClassName,x=xe(e,Zt),v=t.useMemo(function(){return(s||[]).filter(function(T){return T&&ze(T)==="object"&&"key"in T})},[s]),p=l==="rtl",G=Yt(y),se=t.useState(!1),Q=N(se,2),U=Q[0],q=Q[1];t.useEffect(function(){q(Pt())},[]);var le=et(function(){var T;return(T=v[0])===null||T===void 0?void 0:T.key},{value:S,defaultValue:g}),ae=N(le,2),f=ae[0],B=ae[1],X=t.useState(function(){return v.findIndex(function(T){return T.key===f})}),O=N(X,2),_=O[0],ie=O[1];t.useEffect(function(){var T=v.findIndex(function(fe){return fe.key===f});if(T===-1){var ee;T=Math.max(0,Math.min(_,v.length-1)),B((ee=v[T])===null||ee===void 0?void 0:ee.key)}ie(T)},[v.map(function(T){return T.key}).join("_"),f,_]);var ne=et(null,{value:i}),ue=N(ne,2),ke=ue[0],Re=ue[1];t.useEffect(function(){i||(Re("rc-tabs-".concat(ut)),ut+=1)},[]);function Ne(T,ee){K==null||K(T,ee);var fe=T!==f;B(T),fe&&(E==null||E(T))}var de={id:ke,activeKey:f,animated:G,tabPosition:k,rtl:p,mobile:U},Pe,we=H(H({},de),{},{editable:u,locale:M,moreIcon:A,moreTransitionName:F,tabBarGutter:I,onTabClick:Ne,onTabScroll:h,extra:w,style:L,panes:null,getPopupContainer:C,popupClassName:d});return t.createElement(Te.Provider,{value:{tabs:v,prefixCls:n}},t.createElement("div",oe({ref:a,id:i,className:j(n,"".concat(n,"-").concat(k),(r={},V(r,"".concat(n,"-mobile"),U),V(r,"".concat(n,"-editable"),u),V(r,"".concat(n,"-rtl"),p),r),c)},x),Pe,t.createElement(Xt,oe({},we,{renderTabBar:R})),t.createElement(Bt,oe({destroyInactiveTabPane:D},de,{animated:G}))))}var oa=t.forwardRef(qt);export{oa as F};
