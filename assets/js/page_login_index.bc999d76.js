import{r as d,j as t}from"./react.76efb1e3.js";import{a as v}from"./react-redux.bad75fc1.js";import{T as x,f as S}from"./components_Business.a1f9c3ad.js";import{g as C,p as j,s as b,a as k,L as O,u as _,l as B}from"./layouts.43869c63.js";import{u as U}from"./page_content_article.60d55226.js";import{u as A,s as R}from"./components_Fullscreen.5db0d3c8.js";import{c as u,d as f}from"./components_GlobalSearch.5998c80c.js";import{u as q}from"./react-router.9cd949e8.js";import{m as D,F as p,I as w,B as H}from"./antd.469ebff6.js";import{Z as V,_ as $}from"./@ant-design_icons.412fab6d.js";import"./@babel_runtime.c8088fcd.js";import"./react-dom.9f2c8c46.js";import"./scheduler.12376d7f.js";import"./hoist-non-react-statics.eb1d43c9.js";import"./react-is.4e9f7c39.js";import"./use-sync-external-store.725586bc.js";import"./components_Form.8f581885.js";import"./components_Dates.361b09a8.js";import"./dayjs.2c8f58dc.js";import"./components_Selects.5c62e155.js";import"./components_Transfer.cd5bb4e6.js";import"./components_PasswordStrength.34190b41.js";import"./ahooks.3df0ac5f.js";import"./lodash.f7a6337e.js";import"./resize-observer-polyfill.0f9f8adb.js";import"./components_WangEditor.dd5702b4.js";import"./@wangeditor_editor.f64a0091.js";import"./@wangeditor_editor-for-react.47a2bf4a.js";import"./crypto-js.818b8447.js";import"./axios.c6a3804f.js";import"./@reduxjs_toolkit.9c491c0a.js";import"./immer.75da4564.js";import"./redux.19402807.js";import"./redux-thunk.ef899f4c.js";import"./@iconify_react.d8386f11.js";import"./react-activation.7038d76e.js";import"./szfe-tools.9ad42c54.js";import"./create-react-context.97f3adcd.js";import"./prop-types.08c7c3df.js";import"./gud.f507db2d.js";import"./warning.07d0fac9.js";import"./react-node-key.17acc7dc.js";import"./components_DataScreen.ca34df80.js";import"./components_Github.5f70b531.js";import"./components_Theme.6d182931.js";import"./components_Modal.5ee02306.js";import"./react-draggable.e106b5dd.js";import"./clsx.73707e73.js";import"./page_403.tsx_index.456ac03e.js";import"./page_all.module.less_used_index.99cf6f97.js";import"./@remix-run_router.1f44e6c0.js";import"./rc-util.644b3d3a.js";import"./@ant-design_cssinjs.1a612eac.js";import"./@emotion_hash.8a8e73f6.js";import"./@emotion_unitless.ede54c47.js";import"./stylis.24eb1ffd.js";import"./classnames.82ff248b.js";import"./rc-resize-observer.438dc091.js";import"./rc-motion.2ceeb80c.js";import"./rc-notification.d3309162.js";import"./@ant-design_icons-svg.e6cc6488.js";import"./@ant-design_colors.ae61a330.js";import"./@ctrl_tinycolor.fb5a5473.js";import"./rc-picker.5b6546e1.js";import"./@rc-component_trigger.9ced1b4d.js";import"./@rc-component_portal.12740c41.js";import"./rc-tabs.f656a8ab.js";import"./rc-dropdown.2e9cd17f.js";import"./rc-menu.8424c90c.js";import"./rc-overflow.a39d2c7e.js";import"./rc-select.2da6b826.js";import"./rc-virtual-list.01ab885a.js";import"./rc-input-number.2469ea66.js";import"./@rc-component_mini-decimal.660c0332.js";import"./rc-input.bea61526.js";import"./rc-drawer.7fab489e.js";import"./rc-field-form.d06989a2.js";import"./async-validator.3b19e2d4.js";import"./scroll-into-view-if-needed.5d1e5d87.js";import"./compute-scroll-into-view.620fa8c1.js";import"./rc-dialog.639ab3b6.js";import"./rc-rate.d87ea002.js";import"./rc-slider.36fdafa5.js";import"./rc-switch.861177e8.js";import"./rc-table.cc6f945d.js";import"./@rc-component_context.f6cf85a7.js";import"./throttle-debounce.87e7e444.js";import"./rc-checkbox.08772e82.js";import"./rc-tree.6fcede86.js";import"./rc-pagination.4f176c6f.js";import"./rc-textarea.04189c54.js";import"./rc-tree-select.d2ec43de.js";import"./rc-upload.e6268761.js";import"./rc-progress.00b48656.js";import"./rc-tooltip.9a7a4336.js";import"./components_Buttons.45a932db.js";import"./components_Content.c71bf899.js";import"./components_Search.4b6e031b.js";import"./components_Table.7421b869.js";import"./react-resizable.f6303e9e.js";import"./components_Pagination.29811a9b.js";import"./components_Count.0fccd205.js";import"./components_Bottom.a10f1e76.js";function qr(){U("登录");const n=q(),i=v(),[y,N]=_(),[F,s]=d.useState(!1),[T,E]=D.useMessage(),{permissions:h}=A(),r=localStorage.getItem(x)||"light";d.useEffect(()=>{r||localStorage.setItem(x,"light"),r==="dark"&&(document.body.className="theme-dark"),i(R(r==="dark"?"dark":"light"))},[r]),d.useEffect(()=>{if(y())if(!h.length)I();else{const o=u(f,h);n(o)}},[]);const I=async()=>{try{s(!0);const{code:o,data:l}=await C({refresh_cache:!1});if(Number(o)!==200)return;const{user:c,permissions:m}=l,a=j(m),e=u(f,a);i(b(c)),i(k(a)),n(e)}finally{s(!1)}},L=async o=>{try{s(!0);const{code:l,data:c}=await B(o);if(Number(l)!==200)return;const{token:m,user:a,permissions:e}=c;if(!(e!=null&&e.length)||!m)return T.error({content:"用户暂无权限登录",key:"permissions"});const g=j(e),P=u(f,g);N(m),i(b(a)),i(k(g)),n(P)}finally{s(!1)}},M=o=>{};return t.jsxs(t.Fragment,{children:[E,t.jsx("div",{className:`
        ${r==="dark"?"bg-black text-white":"bg-light-400"}
        w-screen
        h-screen
        relative
      `,children:t.jsxs("div",{className:`
          w-300px
          h-290px
          p-30px
          rounded-5px
          ${r==="dark"?"bg-black bg-dark-200":"bg-white"}
          box-border
          absolute
          left-1/2
          top-1/2
          -translate-x-1/2
          -translate-y-1/2
        `,children:[t.jsxs("div",{className:"pb-30px pt-10px flex items-center justify-center",children:[t.jsx("img",{className:"mr-2 object-contain",width:"30",height:"30",src:O,alt:"LOGO"}),t.jsx("span",{className:"text-xl font-bold tracking-2px",children:"系统登录"})]}),t.jsxs(p,{name:"horizontal_login",autoComplete:"on",onFinish:L,onFinishFailed:M,initialValues:{username:"admin",password:"admin123456"},children:[t.jsx(p.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"}],children:t.jsx(w,{"allow-clear":"true",placeholder:"用户名","data-test":"username",autoComplete:"username",addonBefore:t.jsx(V,{className:"change"})})}),t.jsx(p.Item,{name:"password",rules:[{required:!0,message:"请输入密码"},S],children:t.jsx(w.Password,{placeholder:"密码",autoComplete:"current-password",addonBefore:t.jsx($,{className:"change"})})}),t.jsx(p.Item,{children:t.jsx(H,{type:"primary",htmlType:"submit",className:"w-full mt-5px rounded-5px tracking-2px",loading:F,children:"登录"})})]})]})})]})}export{qr as default};
