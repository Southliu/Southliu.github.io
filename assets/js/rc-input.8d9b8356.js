import{c as e}from"./classnames.71976509.js";import{r as n,e as a}from"./react.a7da97a2.js";import{d as t,b as l,h as r,f as s,c as o,e as u,g as c}from"./@babel_runtime.d775819b.js";import{A as i,y as f}from"./rc-util.b2252098.js";function d(e){return!(!e.addonBefore&&!e.addonAfter)}function p(e){return!!(e.prefix||e.suffix||e.allowClear)}function v(e,n,a,t){if(a){var l=n;if("click"===n.type){var r=e.cloneNode(!0);return l=Object.create(n,{target:{value:r},currentTarget:{value:r}}),r.value="",void a(l)}if(void 0!==t)return l=Object.create(n,{target:{value:e},currentTarget:{value:e}}),e.value=t,void a(l);a(l)}}function m(e,n){if(e){e.focus(n);var a=(n||{}).cursor;if(a){var t=e.value.length;switch(a){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(t,t);break;default:e.setSelectionRange(0,t)}}}}function x(e){return null==e?"":String(e)}var g=function(o){var u,c,i=o.inputElement,f=o.prefixCls,v=o.prefix,m=o.suffix,x=o.addonBefore,g=o.addonAfter,h=o.className,y=o.style,N=o.disabled,E=o.readOnly,b=o.focused,w=o.triggerFocus,C=o.allowClear,R=o.value,S=o.handleReset,j=o.hidden,B=o.classes,k=o.classNames,A=o.dataAttrs,F=o.styles,W=o.components,D=(null==W?void 0:W.affixWrapper)||"span",I=(null==W?void 0:W.groupWrapper)||"span",z=(null==W?void 0:W.wrapper)||"span",K=(null==W?void 0:W.groupAddon)||"span",L=n.useRef(null),O=n.cloneElement(i,{value:R,hidden:j,className:e(null===(u=i.props)||void 0===u?void 0:u.className,!p(o)&&!d(o)&&h)||null,style:t(t({},null===(c=i.props)||void 0===c?void 0:c.style),p(o)||d(o)?{}:y)});if(p(o)){var P,T="".concat(f,"-affix-wrapper"),V=e(T,(l(P={},"".concat(T,"-disabled"),N),l(P,"".concat(T,"-focused"),b),l(P,"".concat(T,"-readonly"),E),l(P,"".concat(T,"-input-with-clear-btn"),m&&C&&R),P),!d(o)&&h,null==B?void 0:B.affixWrapper,null==k?void 0:k.affixWrapper),H=(m||C)&&a.createElement("span",{className:e("".concat(f,"-suffix"),null==k?void 0:k.suffix),style:null==F?void 0:F.suffix},function(){var n;if(!C)return null;var t=!N&&!E&&R,r="".concat(f,"-clear-icon"),o="object"===s(C)&&null!=C&&C.clearIcon?C.clearIcon:"âœ–";return a.createElement("span",{onClick:S,onMouseDown:function(e){return e.preventDefault()},className:e(r,(n={},l(n,"".concat(r,"-hidden"),!t),l(n,"".concat(r,"-has-suffix"),!!m),n)),role:"button",tabIndex:-1},o)}(),m);O=a.createElement(D,r({className:V,style:t(t({},d(o)?void 0:y),null==F?void 0:F.affixWrapper),hidden:!d(o)&&j,onClick:function(e){var n;null!==(n=L.current)&&void 0!==n&&n.contains(e.target)&&(null==w||w())}},null==A?void 0:A.affixWrapper,{ref:L}),v&&a.createElement("span",{className:e("".concat(f,"-prefix"),null==k?void 0:k.prefix),style:null==F?void 0:F.prefix},v),n.cloneElement(i,{value:R,hidden:null}),H)}if(d(o)){var M="".concat(f,"-group"),_="".concat(M,"-addon"),q=e("".concat(f,"-wrapper"),M,null==B?void 0:B.wrapper),G=e("".concat(f,"-group-wrapper"),h,null==B?void 0:B.group);return a.createElement(I,{className:G,style:y,hidden:j},a.createElement(z,{className:q},x&&a.createElement(K,{className:_},x),n.cloneElement(O,{hidden:null}),g&&a.createElement(K,{className:_},g)))}return O},h=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],y=n.forwardRef((function(d,p){var y=d.autoComplete,N=d.onChange,E=d.onFocus,b=d.onBlur,w=d.onPressEnter,C=d.onKeyDown,R=d.prefixCls,S=void 0===R?"rc-input":R,j=d.disabled,B=d.htmlSize,k=d.className,A=d.maxLength,F=d.suffix,W=d.showCount,D=d.type,I=void 0===D?"text":D,z=d.classes,K=d.classNames,L=d.styles,O=o(d,h),P=i(d.defaultValue,{value:d.value}),T=u(P,2),V=T[0],H=T[1],M=n.useState(!1),_=u(M,2),q=_[0],G=_[1],J=n.useRef(null),Q=function(e){J.current&&m(J.current,e)};n.useImperativeHandle(p,(function(){return{focus:Q,blur:function(){var e;null===(e=J.current)||void 0===e||e.blur()},setSelectionRange:function(e,n,a){var t;null===(t=J.current)||void 0===t||t.setSelectionRange(e,n,a)},select:function(){var e;null===(e=J.current)||void 0===e||e.select()},input:J.current}})),n.useEffect((function(){G((function(e){return(!e||!j)&&e}))}),[j]);var U,X=function(e){void 0===d.value&&H(e.target.value),J.current&&v(J.current,e,N)},Y=function(e){w&&"Enter"===e.key&&w(e),null==C||C(e)},Z=function(e){G(!0),null==E||E(e)},$=function(e){G(!1),null==b||b(e)};return a.createElement(g,r({},O,{prefixCls:S,className:k,inputElement:(U=f(d,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]),a.createElement("input",r({autoComplete:y},U,{onChange:X,onFocus:Z,onBlur:$,onKeyDown:Y,className:e(S,l({},"".concat(S,"-disabled"),j),null==K?void 0:K.input),style:null==L?void 0:L.input,ref:J,size:B,type:I}))),handleReset:function(e){H(""),Q(),J.current&&v(J.current,e,N)},value:x(V),focused:q,triggerFocus:Q,suffix:function(){var n=Number(A)>0;if(F||W){var r=x(V),o=c(r).length,u="object"===s(W)?W.formatter({value:r,count:o,maxLength:A}):"".concat(o).concat(n?" / ".concat(A):"");return a.createElement(a.Fragment,null,!!W&&a.createElement("span",{className:e("".concat(S,"-show-count-suffix"),l({},"".concat(S,"-show-count-has-suffix"),!!F),null==K?void 0:K.count),style:t({},null==L?void 0:L.count)},u),F)}return null}(),disabled:j,classes:z,classNames:K,styles:L}))}));export{g as B,y as I,x as f,v as r,m as t};
