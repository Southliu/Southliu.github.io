{"version":3,"file":"rc-upload.058108f1.js","sources":["../../../node_modules/.pnpm/rc-upload@4.3.4_biqbaboplfbrettd7655fr4n2y/node_modules/rc-upload/es/request.js","../../../node_modules/.pnpm/rc-upload@4.3.4_biqbaboplfbrettd7655fr4n2y/node_modules/rc-upload/es/uid.js","../../../node_modules/.pnpm/rc-upload@4.3.4_biqbaboplfbrettd7655fr4n2y/node_modules/rc-upload/es/attr-accept.js","../../../node_modules/.pnpm/rc-upload@4.3.4_biqbaboplfbrettd7655fr4n2y/node_modules/rc-upload/es/traverseFileTree.js","../../../node_modules/.pnpm/rc-upload@4.3.4_biqbaboplfbrettd7655fr4n2y/node_modules/rc-upload/es/AjaxUploader.js","../../../node_modules/.pnpm/rc-upload@4.3.4_biqbaboplfbrettd7655fr4n2y/node_modules/rc-upload/es/Upload.js"],"sourcesContent":["function getError(option, xhr) {\n  var msg = \"cannot \".concat(option.method, \" \").concat(option.action, \" \").concat(xhr.status, \"'\");\n  var err = new Error(msg);\n  err.status = xhr.status;\n  err.method = option.method;\n  err.url = option.action;\n  return err;\n}\n\nfunction getBody(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function upload(option) {\n  // eslint-disable-next-line no-undef\n  var xhr = new XMLHttpRequest();\n\n  if (option.onProgress && xhr.upload) {\n    xhr.upload.onprogress = function progress(e) {\n      if (e.total > 0) {\n        e.percent = e.loaded / e.total * 100;\n      }\n\n      option.onProgress(e);\n    };\n  } // eslint-disable-next-line no-undef\n\n\n  var formData = new FormData();\n\n  if (option.data) {\n    Object.keys(option.data).forEach(function (key) {\n      var value = option.data[key]; // support key-value array data\n\n      if (Array.isArray(value)) {\n        value.forEach(function (item) {\n          // { list: [ 11, 22 ] }\n          // formData.append('list[]', 11);\n          formData.append(\"\".concat(key, \"[]\"), item);\n        });\n        return;\n      }\n\n      formData.append(key, value);\n    });\n  } // eslint-disable-next-line no-undef\n\n\n  if (option.file instanceof Blob) {\n    formData.append(option.filename, option.file, option.file.name);\n  } else {\n    formData.append(option.filename, option.file);\n  }\n\n  xhr.onerror = function error(e) {\n    option.onError(e);\n  };\n\n  xhr.onload = function onload() {\n    // allow success when 2xx status\n    // see https://github.com/react-component/upload/issues/34\n    if (xhr.status < 200 || xhr.status >= 300) {\n      return option.onError(getError(option, xhr), getBody(xhr));\n    }\n\n    return option.onSuccess(getBody(xhr), xhr);\n  };\n\n  xhr.open(option.method, option.action, true); // Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\n\n  if (option.withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  var headers = option.headers || {}; // when set headers['X-Requested-With'] = null , can close default XHR header\n  // see https://github.com/react-component/upload/issues/33\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  Object.keys(headers).forEach(function (h) {\n    if (headers[h] !== null) {\n      xhr.setRequestHeader(h, headers[h]);\n    }\n  });\n  xhr.send(formData);\n  return {\n    abort: function abort() {\n      xhr.abort();\n    }\n  };\n}","var now = +new Date();\nvar index = 0;\nexport default function uid() {\n  // eslint-disable-next-line no-plusplus\n  return \"rc-upload-\".concat(now, \"-\").concat(++index);\n}","import warning from \"rc-util/es/warning\";\nexport default (function (file, acceptedFiles) {\n  if (file && acceptedFiles) {\n    var acceptedFilesArray = Array.isArray(acceptedFiles) ? acceptedFiles : acceptedFiles.split(',');\n    var fileName = file.name || '';\n    var mimeType = file.type || '';\n    var baseMimeType = mimeType.replace(/\\/.*$/, '');\n    return acceptedFilesArray.some(function (type) {\n      var validType = type.trim(); // This is something like */*,*  allow all files\n\n      if (/^\\*(\\/\\*)?$/.test(type)) {\n        return true;\n      } // like .jpg, .png\n\n\n      if (validType.charAt(0) === '.') {\n        var lowerFileName = fileName.toLowerCase();\n        var lowerType = validType.toLowerCase();\n        var affixList = [lowerType];\n\n        if (lowerType === '.jpg' || lowerType === '.jpeg') {\n          affixList = ['.jpg', '.jpeg'];\n        }\n\n        return affixList.some(function (affix) {\n          return lowerFileName.endsWith(affix);\n        });\n      } // This is something like a image/* mime type\n\n\n      if (/\\/\\*$/.test(validType)) {\n        return baseMimeType === validType.replace(/\\/.*$/, '');\n      } // Full match\n\n\n      if (mimeType === validType) {\n        return true;\n      } // Invalidate type should skip\n\n\n      if (/^\\w+$/.test(validType)) {\n        warning(false, \"Upload takes an invalidate 'accept' type '\".concat(validType, \"'.Skip for check.\"));\n        return true;\n      }\n\n      return false;\n    });\n  }\n\n  return true;\n});","function loopFiles(item, callback) {\n  var dirReader = item.createReader();\n  var fileList = [];\n\n  function sequence() {\n    dirReader.readEntries(function (entries) {\n      var entryList = Array.prototype.slice.apply(entries);\n      fileList = fileList.concat(entryList); // Check if all the file has been viewed\n\n      var isFinished = !entryList.length;\n\n      if (isFinished) {\n        callback(fileList);\n      } else {\n        sequence();\n      }\n    });\n  }\n\n  sequence();\n}\n\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    // eslint-disable-next-line no-param-reassign\n    item.path = path || '';\n\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            }); // eslint-disable-next-line no-param-reassign\n\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n\n          callback([file]);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item, function (entries) {\n        entries.forEach(function (entryItem) {\n          _traverseFileTree(entryItem, \"\".concat(path).concat(item.name, \"/\"));\n        });\n      });\n    }\n  };\n\n  files.forEach(function (file) {\n    _traverseFileTree(file.webkitGetAsEntry());\n  });\n};\n\nexport default traverseFileTree;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nvar _excluded = [\"component\", \"prefixCls\", \"className\", \"disabled\", \"id\", \"style\", \"multiple\", \"accept\", \"capture\", \"children\", \"directory\", \"openFileDialogOnClick\", \"onMouseEnter\", \"onMouseLeave\"];\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport defaultRequest from './request';\nimport getUid from './uid';\nimport attrAccept from './attr-accept';\nimport traverseFileTree from './traverseFileTree';\n\nvar AjaxUploader = /*#__PURE__*/function (_Component) {\n  _inherits(AjaxUploader, _Component);\n\n  var _super = _createSuper(AjaxUploader);\n\n  function AjaxUploader() {\n    var _this;\n\n    _classCallCheck(this, AjaxUploader);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      uid: getUid()\n    };\n    _this.reqs = {};\n    _this.fileInput = void 0;\n    _this._isMounted = void 0;\n\n    _this.onChange = function (e) {\n      var _this$props = _this.props,\n          accept = _this$props.accept,\n          directory = _this$props.directory;\n      var files = e.target.files;\n\n      var acceptedFiles = _toConsumableArray(files).filter(function (file) {\n        return !directory || attrAccept(file, accept);\n      });\n\n      _this.uploadFiles(acceptedFiles);\n\n      _this.reset();\n    };\n\n    _this.onClick = function (e) {\n      var el = _this.fileInput;\n\n      if (!el) {\n        return;\n      }\n\n      var _this$props2 = _this.props,\n          children = _this$props2.children,\n          onClick = _this$props2.onClick;\n\n      if (children && children.type === 'button') {\n        var parent = el.parentNode;\n        parent.focus();\n        parent.querySelector('button').blur();\n      }\n\n      el.click();\n\n      if (onClick) {\n        onClick(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.key === 'Enter') {\n        _this.onClick(e);\n      }\n    };\n\n    _this.onFileDrop = function (e) {\n      var multiple = _this.props.multiple;\n      e.preventDefault();\n\n      if (e.type === 'dragover') {\n        return;\n      }\n\n      if (_this.props.directory) {\n        traverseFileTree(Array.prototype.slice.call(e.dataTransfer.items), _this.uploadFiles, function (_file) {\n          return attrAccept(_file, _this.props.accept);\n        });\n      } else {\n        var files = _toConsumableArray(e.dataTransfer.files).filter(function (file) {\n          return attrAccept(file, _this.props.accept);\n        });\n\n        if (multiple === false) {\n          files = files.slice(0, 1);\n        }\n\n        _this.uploadFiles(files);\n      }\n    };\n\n    _this.uploadFiles = function (files) {\n      var originFiles = _toConsumableArray(files);\n\n      var postFiles = originFiles.map(function (file) {\n        // eslint-disable-next-line no-param-reassign\n        file.uid = getUid();\n        return _this.processFile(file, originFiles);\n      }); // Batch upload files\n\n      Promise.all(postFiles).then(function (fileList) {\n        var onBatchStart = _this.props.onBatchStart;\n        onBatchStart === null || onBatchStart === void 0 ? void 0 : onBatchStart(fileList.map(function (_ref) {\n          var origin = _ref.origin,\n              parsedFile = _ref.parsedFile;\n          return {\n            file: origin,\n            parsedFile: parsedFile\n          };\n        }));\n        fileList.filter(function (file) {\n          return file.parsedFile !== null;\n        }).forEach(function (file) {\n          _this.post(file);\n        });\n      });\n    };\n\n    _this.processFile = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(file, fileList) {\n        var beforeUpload, transformedFile, action, mergedAction, data, mergedData, parsedData, parsedFile, mergedParsedFile;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                beforeUpload = _this.props.beforeUpload;\n                transformedFile = file;\n\n                if (!beforeUpload) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.prev = 3;\n                _context.next = 6;\n                return beforeUpload(file, fileList);\n\n              case 6:\n                transformedFile = _context.sent;\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](3);\n                // Rejection will also trade as false\n                transformedFile = false;\n\n              case 12:\n                if (!(transformedFile === false)) {\n                  _context.next = 14;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  origin: file,\n                  parsedFile: null,\n                  action: null,\n                  data: null\n                });\n\n              case 14:\n                // Get latest action\n                action = _this.props.action;\n\n                if (!(typeof action === 'function')) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.next = 18;\n                return action(file);\n\n              case 18:\n                mergedAction = _context.sent;\n                _context.next = 22;\n                break;\n\n              case 21:\n                mergedAction = action;\n\n              case 22:\n                // Get latest data\n                data = _this.props.data;\n\n                if (!(typeof data === 'function')) {\n                  _context.next = 29;\n                  break;\n                }\n\n                _context.next = 26;\n                return data(file);\n\n              case 26:\n                mergedData = _context.sent;\n                _context.next = 30;\n                break;\n\n              case 29:\n                mergedData = data;\n\n              case 30:\n                parsedData = // string type is from legacy `transformFile`.\n                // Not sure if this will work since no related test case works with it\n                (_typeof(transformedFile) === 'object' || typeof transformedFile === 'string') && transformedFile ? transformedFile : file;\n\n                if (parsedData instanceof File) {\n                  parsedFile = parsedData;\n                } else {\n                  parsedFile = new File([parsedData], file.name, {\n                    type: file.type\n                  });\n                }\n\n                mergedParsedFile = parsedFile;\n                mergedParsedFile.uid = file.uid;\n                return _context.abrupt(\"return\", {\n                  origin: file,\n                  data: mergedData,\n                  parsedFile: mergedParsedFile,\n                  action: mergedAction\n                });\n\n              case 35:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 9]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.saveFileInput = function (node) {\n      _this.fileInput = node;\n    };\n\n    return _this;\n  }\n\n  _createClass(AjaxUploader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.abort();\n    }\n  }, {\n    key: \"post\",\n    value: function post(_ref3) {\n      var _this2 = this;\n\n      var data = _ref3.data,\n          origin = _ref3.origin,\n          action = _ref3.action,\n          parsedFile = _ref3.parsedFile;\n\n      if (!this._isMounted) {\n        return;\n      }\n\n      var _this$props3 = this.props,\n          onStart = _this$props3.onStart,\n          customRequest = _this$props3.customRequest,\n          name = _this$props3.name,\n          headers = _this$props3.headers,\n          withCredentials = _this$props3.withCredentials,\n          method = _this$props3.method;\n      var uid = origin.uid;\n      var request = customRequest || defaultRequest;\n      var requestOption = {\n        action: action,\n        filename: name,\n        data: data,\n        file: parsedFile,\n        headers: headers,\n        withCredentials: withCredentials,\n        method: method || 'post',\n        onProgress: function onProgress(e) {\n          var onProgress = _this2.props.onProgress;\n          onProgress === null || onProgress === void 0 ? void 0 : onProgress(e, parsedFile);\n        },\n        onSuccess: function onSuccess(ret, xhr) {\n          var onSuccess = _this2.props.onSuccess;\n          onSuccess === null || onSuccess === void 0 ? void 0 : onSuccess(ret, parsedFile, xhr);\n          delete _this2.reqs[uid];\n        },\n        onError: function onError(err, ret) {\n          var onError = _this2.props.onError;\n          onError === null || onError === void 0 ? void 0 : onError(err, ret, parsedFile);\n          delete _this2.reqs[uid];\n        }\n      };\n      onStart(origin);\n      this.reqs[uid] = request(requestOption);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setState({\n        uid: getUid()\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort(file) {\n      var reqs = this.reqs;\n\n      if (file) {\n        var uid = file.uid ? file.uid : file;\n\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(function (uid) {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n\n          delete reqs[uid];\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n\n      var _this$props4 = this.props,\n          Tag = _this$props4.component,\n          prefixCls = _this$props4.prefixCls,\n          className = _this$props4.className,\n          disabled = _this$props4.disabled,\n          id = _this$props4.id,\n          style = _this$props4.style,\n          multiple = _this$props4.multiple,\n          accept = _this$props4.accept,\n          capture = _this$props4.capture,\n          children = _this$props4.children,\n          directory = _this$props4.directory,\n          openFileDialogOnClick = _this$props4.openFileDialogOnClick,\n          onMouseEnter = _this$props4.onMouseEnter,\n          onMouseLeave = _this$props4.onMouseLeave,\n          otherProps = _objectWithoutProperties(_this$props4, _excluded);\n\n      var cls = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls, true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, className, className), _classNames)); // because input don't have directory/webkitdirectory type declaration\n\n      var dirProps = directory ? {\n        directory: 'directory',\n        webkitdirectory: 'webkitdirectory'\n      } : {};\n      var events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? this.onClick : function () {},\n        onKeyDown: openFileDialogOnClick ? this.onKeyDown : function () {},\n        onMouseEnter: onMouseEnter,\n        onMouseLeave: onMouseLeave,\n        onDrop: this.onFileDrop,\n        onDragOver: this.onFileDrop,\n        tabIndex: '0'\n      };\n      return /*#__PURE__*/React.createElement(Tag, _extends({}, events, {\n        className: cls,\n        role: \"button\",\n        style: style\n      }), /*#__PURE__*/React.createElement(\"input\", _extends({}, pickAttrs(otherProps, {\n        aria: true,\n        data: true\n      }), {\n        id: id,\n        type: \"file\",\n        ref: this.saveFileInput,\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        } // https://github.com/ant-design/ant-design/issues/19948\n        ,\n        key: this.state.uid,\n        style: {\n          display: 'none'\n        },\n        accept: accept\n      }, dirProps, {\n        multiple: multiple,\n        onChange: this.onChange\n      }, capture != null ? {\n        capture: capture\n      } : {})), children);\n    }\n  }]);\n\n  return AjaxUploader;\n}(Component);\n\nexport default AjaxUploader;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\n/* eslint react/prop-types:0 */\nimport React, { Component } from 'react';\nimport AjaxUpload from './AjaxUploader';\n\nfunction empty() {}\n\nvar Upload = /*#__PURE__*/function (_Component) {\n  _inherits(Upload, _Component);\n\n  var _super = _createSuper(Upload);\n\n  function Upload() {\n    var _this;\n\n    _classCallCheck(this, Upload);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.uploader = void 0;\n\n    _this.saveUploader = function (node) {\n      _this.uploader = node;\n    };\n\n    return _this;\n  }\n\n  _createClass(Upload, [{\n    key: \"abort\",\n    value: function abort(file) {\n      this.uploader.abort(file);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(AjaxUpload, _extends({}, this.props, {\n        ref: this.saveUploader\n      }));\n    }\n  }]);\n\n  return Upload;\n}(Component);\n\nUpload.defaultProps = {\n  component: 'span',\n  prefixCls: 'rc-upload',\n  data: {},\n  headers: {},\n  name: 'file',\n  multipart: false,\n  onStart: empty,\n  onError: empty,\n  onSuccess: empty,\n  multiple: false,\n  beforeUpload: null,\n  customRequest: null,\n  withCredentials: false,\n  openFileDialogOnClick: true\n};\nexport default Upload;"],"names":["getError","option","xhr","msg","err","getBody","text","upload","e","formData","key","value","item","headers","h","now","index","uid","attrAccept","file","acceptedFiles","acceptedFilesArray","fileName","mimeType","baseMimeType","type","validType","lowerFileName","lowerType","affixList","affix","warning","loopFiles","callback","dirReader","fileList","sequence","entries","entryList","isFinished","traverseFileTree","files","isAccepted","_traverseFileTree","path","entryItem","_excluded","AjaxUploader","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","args","_key","getUid","_this$props","accept","directory","_toConsumableArray","el","_this$props2","children","onClick","parent","multiple","_file","originFiles","postFiles","onBatchStart","_ref","origin","parsedFile","_ref2","_asyncToGenerator","_regeneratorRuntime","_callee","beforeUpload","transformedFile","action","mergedAction","data","mergedData","parsedData","mergedParsedFile","_context","_typeof","_x","_x2","node","_createClass","_ref3","_this2","_this$props3","onStart","customRequest","name","withCredentials","method","request","defaultRequest","requestOption","onProgress","ret","onSuccess","onError","reqs","_classNames","_this$props4","Tag","prefixCls","className","disabled","id","style","capture","openFileDialogOnClick","onMouseEnter","onMouseLeave","otherProps","_objectWithoutProperties","cls","classNames","_defineProperty","dirProps","events","React","_extends","pickAttrs","Component","empty","Upload","AjaxUpload"],"mappings":"oQAAA,SAASA,EAASC,EAAQC,EAAK,CAC7B,IAAIC,EAAM,UAAU,OAAOF,EAAO,OAAQ,GAAG,EAAE,OAAOA,EAAO,OAAQ,GAAG,EAAE,OAAOC,EAAI,OAAQ,GAAG,EAC5FE,EAAM,IAAI,MAAMD,CAAG,EACvB,OAAAC,EAAI,OAASF,EAAI,OACjBE,EAAI,OAASH,EAAO,OACpBG,EAAI,IAAMH,EAAO,OACVG,CACT,CAEA,SAASC,EAAQH,EAAK,CACpB,IAAII,EAAOJ,EAAI,cAAgBA,EAAI,SAEnC,GAAI,CAACI,EACH,OAAOA,EAGT,GAAI,CACF,OAAO,KAAK,MAAMA,CAAI,CACvB,MAAC,CACA,OAAOA,CACR,CACH,CAEe,SAASC,EAAON,EAAQ,CAErC,IAAIC,EAAM,IAAI,eAEVD,EAAO,YAAcC,EAAI,SAC3BA,EAAI,OAAO,WAAa,SAAkBM,EAAG,CACvCA,EAAE,MAAQ,IACZA,EAAE,QAAUA,EAAE,OAASA,EAAE,MAAQ,KAGnCP,EAAO,WAAWO,CAAC,CACzB,GAIE,IAAIC,EAAW,IAAI,SAEfR,EAAO,MACT,OAAO,KAAKA,EAAO,IAAI,EAAE,QAAQ,SAAUS,EAAK,CAC9C,IAAIC,EAAQV,EAAO,KAAKS,CAAG,EAE3B,GAAI,MAAM,QAAQC,CAAK,EAAG,CACxBA,EAAM,QAAQ,SAAUC,EAAM,CAG5BH,EAAS,OAAO,GAAG,OAAOC,EAAK,IAAI,EAAGE,CAAI,CACpD,CAAS,EACD,MACD,CAEDH,EAAS,OAAOC,EAAKC,CAAK,CAChC,CAAK,EAICV,EAAO,gBAAgB,KACzBQ,EAAS,OAAOR,EAAO,SAAUA,EAAO,KAAMA,EAAO,KAAK,IAAI,EAE9DQ,EAAS,OAAOR,EAAO,SAAUA,EAAO,IAAI,EAG9CC,EAAI,QAAU,SAAeM,EAAG,CAC9BP,EAAO,QAAQO,CAAC,CACpB,EAEEN,EAAI,OAAS,UAAkB,CAG7B,OAAIA,EAAI,OAAS,KAAOA,EAAI,QAAU,IAC7BD,EAAO,QAAQD,EAASC,EAAQC,CAAG,EAAGG,EAAQH,CAAG,CAAC,EAGpDD,EAAO,UAAUI,EAAQH,CAAG,EAAGA,CAAG,CAC7C,EAEEA,EAAI,KAAKD,EAAO,OAAQA,EAAO,OAAQ,EAAI,EAEvCA,EAAO,iBAAmB,oBAAqBC,IACjDA,EAAI,gBAAkB,IAGxB,IAAIW,EAAUZ,EAAO,SAAW,GAGhC,OAAIY,EAAQ,kBAAkB,IAAM,MAClCX,EAAI,iBAAiB,mBAAoB,gBAAgB,EAG3D,OAAO,KAAKW,CAAO,EAAE,QAAQ,SAAUC,EAAG,CACpCD,EAAQC,CAAC,IAAM,MACjBZ,EAAI,iBAAiBY,EAAGD,EAAQC,CAAC,CAAC,CAExC,CAAG,EACDZ,EAAI,KAAKO,CAAQ,EACV,CACL,MAAO,UAAiB,CACtBP,EAAI,MAAK,CACV,CACL,CACA,CCtGA,IAAIa,EAAM,CAAC,IAAI,KACXC,EAAQ,EACG,SAASC,GAAM,CAE5B,MAAO,aAAa,OAAOF,EAAK,GAAG,EAAE,OAAO,EAAEC,CAAK,CACrD,CCJA,MAAAE,EAAgB,SAAUC,EAAMC,EAAe,CAC7C,GAAID,GAAQC,EAAe,CACzB,IAAIC,EAAqB,MAAM,QAAQD,CAAa,EAAIA,EAAgBA,EAAc,MAAM,GAAG,EAC3FE,EAAWH,EAAK,MAAQ,GACxBI,EAAWJ,EAAK,MAAQ,GACxBK,EAAeD,EAAS,QAAQ,QAAS,EAAE,EAC/C,OAAOF,EAAmB,KAAK,SAAUI,EAAM,CAC7C,IAAIC,EAAYD,EAAK,OAErB,GAAI,cAAc,KAAKA,CAAI,EACzB,MAAO,GAIT,GAAIC,EAAU,OAAO,CAAC,IAAM,IAAK,CAC/B,IAAIC,EAAgBL,EAAS,cACzBM,EAAYF,EAAU,cACtBG,EAAY,CAACD,CAAS,EAE1B,OAAIA,IAAc,QAAUA,IAAc,WACxCC,EAAY,CAAC,OAAQ,OAAO,GAGvBA,EAAU,KAAK,SAAUC,EAAO,CACrC,OAAOH,EAAc,SAASG,CAAK,CAC7C,CAAS,CACF,CAGD,MAAI,QAAQ,KAAKJ,CAAS,EACjBF,IAAiBE,EAAU,QAAQ,QAAS,EAAE,EAInDH,IAAaG,EACR,GAIL,QAAQ,KAAKA,CAAS,GACxBK,EAAQ,GAAO,6CAA6C,OAAOL,EAAW,mBAAmB,CAAC,EAC3F,IAGF,EACb,CAAK,CACF,CAED,MAAO,EACT,EClDA,SAASM,EAAUpB,EAAMqB,EAAU,CACjC,IAAIC,EAAYtB,EAAK,eACjBuB,EAAW,CAAA,EAEf,SAASC,GAAW,CAClBF,EAAU,YAAY,SAAUG,EAAS,CACvC,IAAIC,EAAY,MAAM,UAAU,MAAM,MAAMD,CAAO,EACnDF,EAAWA,EAAS,OAAOG,CAAS,EAEpC,IAAIC,EAAa,CAACD,EAAU,OAExBC,EACFN,EAASE,CAAQ,EAEjBC,GAER,CAAK,CACF,CAEDA,GACF,CAEA,IAAII,EAAmB,SAA0BC,EAAOR,EAAUS,EAAY,CAE5E,IAAIC,EAAoB,SAASA,EAAkB/B,EAAMgC,EAAM,CAE7DhC,EAAK,KAAOgC,GAAQ,GAEhBhC,EAAK,OACPA,EAAK,KAAK,SAAUO,EAAM,CACpBuB,EAAWvB,CAAI,IAEbP,EAAK,UAAY,CAACO,EAAK,qBACzB,OAAO,iBAAiBA,EAAM,CAC5B,mBAAoB,CAClB,SAAU,EACX,CACf,CAAa,EAEDA,EAAK,mBAAqBP,EAAK,SAAS,QAAQ,MAAO,EAAE,EACzD,OAAO,iBAAiBO,EAAM,CAC5B,mBAAoB,CAClB,SAAU,EACX,CACf,CAAa,GAGHc,EAAS,CAACd,CAAI,CAAC,EAEzB,CAAO,EACQP,EAAK,aACdoB,EAAUpB,EAAM,SAAUyB,EAAS,CACjCA,EAAQ,QAAQ,SAAUQ,EAAW,CACnCF,EAAkBE,EAAW,GAAG,OAAOD,CAAI,EAAE,OAAOhC,EAAK,KAAM,GAAG,CAAC,CAC7E,CAAS,CACT,CAAO,CAEP,EAEE6B,EAAM,QAAQ,SAAUtB,EAAM,CAC5BwB,EAAkBxB,EAAK,iBAAgB,CAAE,CAC7C,CAAG,CACH,ECnDI2B,EAAY,CAAC,YAAa,YAAa,YAAa,WAAY,KAAM,QAAS,WAAY,SAAU,UAAW,WAAY,YAAa,wBAAyB,eAAgB,cAAc,EAShMC,EAA4B,SAAUC,EAAY,CACpDC,EAAUF,EAAcC,CAAU,EAElC,IAAIE,EAASC,EAAaJ,CAAY,EAEtC,SAASA,GAAe,CACtB,IAAIK,EAEJC,EAAgB,KAAMN,CAAY,EAElC,QAASO,EAAO,UAAU,OAAQC,EAAO,IAAI,MAAMD,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC/ED,EAAKC,CAAI,EAAI,UAAUA,CAAI,EAG7B,OAAAJ,EAAQF,EAAO,KAAK,MAAMA,EAAQ,CAAC,IAAI,EAAE,OAAOK,CAAI,CAAC,EACrDH,EAAM,MAAQ,CACZ,IAAKK,EAAQ,CACnB,EACIL,EAAM,KAAO,GACbA,EAAM,UAAY,OAClBA,EAAM,WAAa,OAEnBA,EAAM,SAAW,SAAU5C,EAAG,CAC5B,IAAIkD,EAAcN,EAAM,MACpBO,EAASD,EAAY,OACrBE,EAAYF,EAAY,UACxBjB,EAAQjC,EAAE,OAAO,MAEjBY,EAAgByC,EAAmBpB,CAAK,EAAE,OAAO,SAAUtB,EAAM,CACnE,MAAO,CAACyC,GAAa1C,EAAWC,EAAMwC,CAAM,CACpD,CAAO,EAEDP,EAAM,YAAYhC,CAAa,EAE/BgC,EAAM,MAAK,CACjB,EAEIA,EAAM,QAAU,SAAU5C,EAAG,CAC3B,IAAIsD,EAAKV,EAAM,UAEf,GAAKU,EAIL,KAAIC,EAAeX,EAAM,MACrBY,EAAWD,EAAa,SACxBE,EAAUF,EAAa,QAE3B,GAAIC,GAAYA,EAAS,OAAS,SAAU,CAC1C,IAAIE,EAASJ,EAAG,WAChBI,EAAO,MAAK,EACZA,EAAO,cAAc,QAAQ,EAAE,KAAI,CACpC,CAEDJ,EAAG,MAAK,EAEJG,GACFA,EAAQzD,CAAC,EAEjB,EAEI4C,EAAM,UAAY,SAAU5C,EAAG,CACzBA,EAAE,MAAQ,SACZ4C,EAAM,QAAQ5C,CAAC,CAEvB,EAEI4C,EAAM,WAAa,SAAU5C,EAAG,CAC9B,IAAI2D,EAAWf,EAAM,MAAM,SAG3B,GAFA5C,EAAE,eAAc,EAEZA,EAAE,OAAS,WAIf,GAAI4C,EAAM,MAAM,UACdZ,EAAiB,MAAM,UAAU,MAAM,KAAKhC,EAAE,aAAa,KAAK,EAAG4C,EAAM,YAAa,SAAUgB,EAAO,CACrG,OAAOlD,EAAWkD,EAAOhB,EAAM,MAAM,MAAM,CACrD,CAAS,MACI,CACL,IAAIX,EAAQoB,EAAmBrD,EAAE,aAAa,KAAK,EAAE,OAAO,SAAUW,EAAM,CAC1E,OAAOD,EAAWC,EAAMiC,EAAM,MAAM,MAAM,CACpD,CAAS,EAEGe,IAAa,KACf1B,EAAQA,EAAM,MAAM,EAAG,CAAC,GAG1BW,EAAM,YAAYX,CAAK,CACxB,CACP,EAEIW,EAAM,YAAc,SAAUX,EAAO,CACnC,IAAI4B,EAAcR,EAAmBpB,CAAK,EAEtC6B,EAAYD,EAAY,IAAI,SAAUlD,EAAM,CAE9C,OAAAA,EAAK,IAAMsC,IACJL,EAAM,YAAYjC,EAAMkD,CAAW,CAClD,CAAO,EAED,QAAQ,IAAIC,CAAS,EAAE,KAAK,SAAUnC,EAAU,CAC9C,IAAIoC,EAAenB,EAAM,MAAM,aAC/BmB,GAAiB,MAA2CA,EAAapC,EAAS,IAAI,SAAUqC,EAAM,CACpG,IAAIC,EAASD,EAAK,OACdE,EAAaF,EAAK,WACtB,MAAO,CACL,KAAMC,EACN,WAAYC,CACxB,CACS,CAAA,CAAC,EACFvC,EAAS,OAAO,SAAUhB,EAAM,CAC9B,OAAOA,EAAK,aAAe,IACrC,CAAS,EAAE,QAAQ,SAAUA,EAAM,CACzBiC,EAAM,KAAKjC,CAAI,CACzB,CAAS,CACT,CAAO,CACP,EAEIiC,EAAM,YAA2B,UAAY,CAC3C,IAAIuB,EAAQC,EAAgCC,EAAqB,EAAC,KAAK,SAASC,EAAQ3D,EAAMgB,EAAU,CACtG,IAAI4C,EAAcC,EAAiBC,EAAQC,EAAcC,EAAMC,EAAYC,EAAYX,EAAYY,EACnG,OAAOT,EAAmB,EAAG,KAAK,SAAkBU,EAAU,CAC5D,OACE,OAAQA,EAAS,KAAOA,EAAS,KAAI,CACnC,IAAK,GAIH,GAHAR,EAAe3B,EAAM,MAAM,aAC3B4B,EAAkB7D,EAEd,CAAC4D,EAAc,CACjBQ,EAAS,KAAO,GAChB,KACD,CAED,OAAAA,EAAS,KAAO,EAChBA,EAAS,KAAO,EACTR,EAAa5D,EAAMgB,CAAQ,EAEpC,IAAK,GACH6C,EAAkBO,EAAS,KAC3BA,EAAS,KAAO,GAChB,MAEF,IAAK,GACHA,EAAS,KAAO,EAChBA,EAAS,GAAKA,EAAS,MAAS,CAAC,EAEjCP,EAAkB,GAEpB,IAAK,IACH,GAAMA,IAAoB,GAAQ,CAChCO,EAAS,KAAO,GAChB,KACD,CAED,OAAOA,EAAS,OAAO,SAAU,CAC/B,OAAQpE,EACR,WAAY,KACZ,OAAQ,KACR,KAAM,IACxB,CAAiB,EAEH,IAAK,IAIH,GAFA8D,EAAS7B,EAAM,MAAM,OAEf,OAAO6B,GAAW,WAAa,CACnCM,EAAS,KAAO,GAChB,KACD,CAED,OAAAA,EAAS,KAAO,GACTN,EAAO9D,CAAI,EAEpB,IAAK,IACH+D,EAAeK,EAAS,KACxBA,EAAS,KAAO,GAChB,MAEF,IAAK,IACHL,EAAeD,EAEjB,IAAK,IAIH,GAFAE,EAAO/B,EAAM,MAAM,KAEb,OAAO+B,GAAS,WAAa,CACjCI,EAAS,KAAO,GAChB,KACD,CAED,OAAAA,EAAS,KAAO,GACTJ,EAAKhE,CAAI,EAElB,IAAK,IACHiE,EAAaG,EAAS,KACtBA,EAAS,KAAO,GAChB,MAEF,IAAK,IACHH,EAAaD,EAEf,IAAK,IACH,OAAAE,GAECG,EAAQR,CAAe,IAAM,UAAY,OAAOA,GAAoB,WAAaA,EAAkBA,EAAkB7D,EAElHkE,aAAsB,KACxBX,EAAaW,EAEbX,EAAa,IAAI,KAAK,CAACW,CAAU,EAAGlE,EAAK,KAAM,CAC7C,KAAMA,EAAK,IAC/B,CAAmB,EAGHmE,EAAmBZ,EACnBY,EAAiB,IAAMnE,EAAK,IACrBoE,EAAS,OAAO,SAAU,CAC/B,OAAQpE,EACR,KAAMiE,EACN,WAAYE,EACZ,OAAQJ,CAC1B,CAAiB,EAEH,IAAK,IACL,IAAK,MACH,OAAOK,EAAS,MACnB,CAEb,EAAWT,EAAS,KAAM,CAAC,CAAC,EAAG,CAAC,CAAC,CAAC,CAC3B,CAAA,CAAC,EAEF,OAAO,SAAUW,EAAIC,EAAK,CACxB,OAAOf,EAAM,MAAM,KAAM,SAAS,CAC1C,CACA,IAEIvB,EAAM,cAAgB,SAAUuC,EAAM,CACpCvC,EAAM,UAAYuC,CACxB,EAEWvC,CACR,CAED,OAAAwC,EAAa7C,EAAc,CAAC,CAC1B,IAAK,oBACL,MAAO,UAA6B,CAClC,KAAK,WAAa,EACnB,CACL,EAAK,CACD,IAAK,uBACL,MAAO,UAAgC,CACrC,KAAK,WAAa,GAClB,KAAK,MAAK,CACX,CACL,EAAK,CACD,IAAK,OACL,MAAO,SAAc8C,EAAO,CAC1B,IAAIC,EAAS,KAETX,EAAOU,EAAM,KACbpB,EAASoB,EAAM,OACfZ,EAASY,EAAM,OACfnB,EAAamB,EAAM,WAEvB,GAAK,KAAK,WAIV,KAAIE,EAAe,KAAK,MACpBC,EAAUD,EAAa,QACvBE,EAAgBF,EAAa,cAC7BG,EAAOH,EAAa,KACpBlF,EAAUkF,EAAa,QACvBI,EAAkBJ,EAAa,gBAC/BK,EAASL,EAAa,OACtB9E,EAAMwD,EAAO,IACb4B,EAAUJ,GAAiBK,EAC3BC,EAAgB,CAClB,OAAQtB,EACR,SAAUiB,EACV,KAAMf,EACN,KAAMT,EACN,QAAS7D,EACT,gBAAiBsF,EACjB,OAAQC,GAAU,OAClB,WAAY,SAAoB5F,EAAG,CACjC,IAAIgG,EAAaV,EAAO,MAAM,WAC9BU,GAAe,MAAyCA,EAAWhG,EAAGkE,CAAU,CACjF,EACD,UAAW,SAAmB+B,EAAKvG,EAAK,CACtC,IAAIwG,EAAYZ,EAAO,MAAM,UAC7BY,GAAc,MAAwCA,EAAUD,EAAK/B,EAAYxE,CAAG,EACpF,OAAO4F,EAAO,KAAK7E,CAAG,CACvB,EACD,QAAS,SAAiBb,EAAKqG,EAAK,CAClC,IAAIE,EAAUb,EAAO,MAAM,QAC3Ba,GAAY,MAAsCA,EAAQvG,EAAKqG,EAAK/B,CAAU,EAC9E,OAAOoB,EAAO,KAAK7E,CAAG,CACvB,CACT,EACM+E,EAAQvB,CAAM,EACd,KAAK,KAAKxD,CAAG,EAAIoF,EAAQE,CAAa,EACvC,CACL,EAAK,CACD,IAAK,QACL,MAAO,UAAiB,CACtB,KAAK,SAAS,CACZ,IAAK9C,EAAQ,CACrB,CAAO,CACF,CACL,EAAK,CACD,IAAK,QACL,MAAO,SAAetC,EAAM,CAC1B,IAAIyF,EAAO,KAAK,KAEhB,GAAIzF,EAAM,CACR,IAAIF,EAAME,EAAK,IAAMA,EAAK,IAAMA,EAE5ByF,EAAK3F,CAAG,GAAK2F,EAAK3F,CAAG,EAAE,OACzB2F,EAAK3F,CAAG,EAAE,QAGZ,OAAO2F,EAAK3F,CAAG,CACvB,MACQ,OAAO,KAAK2F,CAAI,EAAE,QAAQ,SAAU3F,EAAK,CACnC2F,EAAK3F,CAAG,GAAK2F,EAAK3F,CAAG,EAAE,OACzB2F,EAAK3F,CAAG,EAAE,QAGZ,OAAO2F,EAAK3F,CAAG,CACzB,CAAS,CAEJ,CACL,EAAK,CACD,IAAK,SACL,MAAO,UAAkB,CACvB,IAAI4F,EAEAC,EAAe,KAAK,MACpBC,EAAMD,EAAa,UACnBE,EAAYF,EAAa,UACzBG,EAAYH,EAAa,UACzBI,EAAWJ,EAAa,SACxBK,EAAKL,EAAa,GAClBM,EAAQN,EAAa,MACrB3C,EAAW2C,EAAa,SACxBnD,EAASmD,EAAa,OACtBO,EAAUP,EAAa,QACvB9C,EAAW8C,EAAa,SACxBlD,EAAYkD,EAAa,UACzBQ,EAAwBR,EAAa,sBACrCS,EAAeT,EAAa,aAC5BU,EAAeV,EAAa,aAC5BW,EAAaC,EAAyBZ,EAAchE,CAAS,EAE7D6E,EAAMC,GAAYf,EAAc,GAAIgB,EAAgBhB,EAAaG,EAAW,EAAI,EAAGa,EAAgBhB,EAAa,GAAG,OAAOG,EAAW,WAAW,EAAGE,CAAQ,EAAGW,EAAgBhB,EAAaI,EAAWA,CAAS,EAAGJ,EAAW,EAE7NiB,EAAWlE,EAAY,CACzB,UAAW,YACX,gBAAiB,iBAClB,EAAG,GACAmE,EAASb,EAAW,GAAK,CAC3B,QAASI,EAAwB,KAAK,QAAU,UAAY,CAAE,EAC9D,UAAWA,EAAwB,KAAK,UAAY,UAAY,CAAE,EAClE,aAAcC,EACd,aAAcC,EACd,OAAQ,KAAK,WACb,WAAY,KAAK,WACjB,SAAU,GAClB,EACM,OAAoBQ,EAAM,cAAcjB,EAAKkB,EAAS,CAAA,EAAIF,EAAQ,CAChE,UAAWJ,EACX,KAAM,SACN,MAAOP,CACf,CAAO,EAAgBY,EAAM,cAAc,QAASC,EAAS,CAAE,EAAEC,EAAUT,EAAY,CAC/E,KAAM,GACN,KAAM,EACd,CAAO,EAAG,CACF,GAAIN,EACJ,KAAM,OACN,IAAK,KAAK,cACV,QAAS,SAAiB3G,EAAG,CAC3B,OAAOA,EAAE,iBACV,EAED,IAAK,KAAK,MAAM,IAChB,MAAO,CACL,QAAS,MACV,EACD,OAAQmD,CACT,EAAEmE,EAAU,CACX,SAAU3D,EACV,SAAU,KAAK,QACvB,EAASkD,GAAW,KAAO,CACnB,QAASA,CACjB,EAAU,CAAE,CAAA,CAAC,EAAGrD,CAAQ,CACnB,CACF,CAAA,CAAC,EAEKjB,CACT,EAAEoF,WAAS,EC3ZX,SAASC,GAAQ,CAAE,CAEhB,IAACC,EAAsB,SAAUrF,EAAY,CAC9CC,EAAUoF,EAAQrF,CAAU,EAE5B,IAAIE,EAASC,EAAakF,CAAM,EAEhC,SAASA,GAAS,CAChB,IAAIjF,EAEJC,EAAgB,KAAMgF,CAAM,EAE5B,QAAS/E,EAAO,UAAU,OAAQC,EAAO,IAAI,MAAMD,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC/ED,EAAKC,CAAI,EAAI,UAAUA,CAAI,EAG7B,OAAAJ,EAAQF,EAAO,KAAK,MAAMA,EAAQ,CAAC,IAAI,EAAE,OAAOK,CAAI,CAAC,EACrDH,EAAM,SAAW,OAEjBA,EAAM,aAAe,SAAUuC,EAAM,CACnCvC,EAAM,SAAWuC,CACvB,EAEWvC,CACR,CAED,OAAAwC,EAAayC,EAAQ,CAAC,CACpB,IAAK,QACL,MAAO,SAAelH,EAAM,CAC1B,KAAK,SAAS,MAAMA,CAAI,CACzB,CACL,EAAK,CACD,IAAK,SACL,MAAO,UAAkB,CACvB,OAAoB6G,EAAM,cAAcM,EAAYL,EAAS,CAAE,EAAE,KAAK,MAAO,CAC3E,IAAK,KAAK,YACX,CAAA,CAAC,CACH,CACF,CAAA,CAAC,EAEKI,CACT,EAAEF,WAAS,EAEXE,EAAO,aAAe,CACpB,UAAW,OACX,UAAW,YACX,KAAM,CAAE,EACR,QAAS,CAAE,EACX,KAAM,OACN,UAAW,GACX,QAASD,EACT,QAASA,EACT,UAAWA,EACX,SAAU,GACV,aAAc,KACd,cAAe,KACf,gBAAiB,GACjB,sBAAuB,EACzB"}