import{g as e,f as t,j as n,h as o}from"./@babel_runtime@7.25.4.Bu2As08a.js";import{P as r}from"./@rc-component_portal@1.1.2_react-dom@18.3.1_react@18.3.1.D8q7CsD1.js";import{r as a,e as l}from"./react@18.3.1.B8wSySjr.js";import{c as s}from"./classnames@2.5.1.D1aycfQv.js";import{f as c,A as i,n as u,E as m,K as d}from"./rc-util@5.43.0_react-dom@18.3.1_react@18.3.1.CDZ9iH-v.js";import{C as f}from"./rc-motion@2.9.2_react-dom@18.3.1_react@18.3.1.DgXt_ZYB.js";var v=a.createContext({});function p(e,t,n){var o=t;return!o&&n&&(o="".concat(e,"-").concat(n)),o}function y(e,t){var n=e["page".concat(t?"Y":"X","Offset")],o="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var r=e.document;"number"!=typeof(n=r.documentElement[o])&&(n=r.body[o])}return n}const b=a.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate}));var C={width:0,height:0,overflow:"hidden",outline:"none"},E={outline:"none"},N=l.forwardRef((function(o,r){var u=o.prefixCls,m=o.className,d=o.style,f=o.title,p=o.ariaId,y=o.footer,N=o.closable,h=o.closeIcon,g=o.onClose,x=o.children,k=o.bodyStyle,R=o.bodyProps,w=o.modalRender,I=o.onMouseDown,P=o.onMouseUp,S=o.holderRef,j=o.visible,D=o.forceRender,M=o.width,_=o.height,A=o.classNames,O=o.styles,T=l.useContext(v).panel,U=c(S,T),V=a.useRef(),z=a.useRef(),K=a.useRef();l.useImperativeHandle(r,(function(){return{focus:function(){var e;null===(e=K.current)||void 0===e||e.focus({preventScroll:!0})},changeActive:function(e){var t=document.activeElement;e&&t===z.current?V.current.focus({preventScroll:!0}):e||t!==V.current||z.current.focus({preventScroll:!0})}}}));var L={};void 0!==M&&(L.width=M),void 0!==_&&(L.height=_);var B=y?l.createElement("div",{className:s("".concat(u,"-footer"),null==A?void 0:A.footer),style:e({},null==O?void 0:O.footer)},y):null,H=f?l.createElement("div",{className:s("".concat(u,"-header"),null==A?void 0:A.header),style:e({},null==O?void 0:O.header)},l.createElement("div",{className:"".concat(u,"-title"),id:p},f)):null,W=a.useMemo((function(){return"object"===t(N)&&null!==N?N:N?{closeIcon:null!=h?h:l.createElement("span",{className:"".concat(u,"-close-x")})}:{}}),[N,h,u]),X=i(W,!0),Y="object"===t(N)&&N.disabled,q=N?l.createElement("button",n({type:"button",onClick:g,"aria-label":"Close"},X,{className:"".concat(u,"-close"),disabled:Y}),W.closeIcon):null,F=l.createElement("div",{className:s("".concat(u,"-content"),null==A?void 0:A.content),style:null==O?void 0:O.content},q,H,l.createElement("div",n({className:s("".concat(u,"-body"),null==A?void 0:A.body),style:e(e({},k),null==O?void 0:O.body)},R),x),B);return l.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":f?p:null,"aria-modal":"true",ref:U,style:e(e({},d),L),className:s(u,m),onMouseDown:I,onMouseUp:P},l.createElement("div",{tabIndex:0,ref:V,style:C,"aria-hidden":"true"}),l.createElement("div",{ref:K,tabIndex:-1,style:E},l.createElement(b,{shouldUpdate:j||D},w?w(F):F)),l.createElement("div",{tabIndex:0,ref:z,style:C,"aria-hidden":"true"}))})),h=a.forwardRef((function(t,r){var l=t.prefixCls,c=t.title,i=t.style,u=t.className,m=t.visible,d=t.forceRender,v=t.destroyOnClose,p=t.motionName,b=t.ariaId,C=t.onVisibleChanged,E=t.mousePosition,h=a.useRef(),g=a.useState(),x=o(g,2),k=x[0],R=x[1],w={};function I(){var e,t,n,o,r,a=(e=h.current,t=e.getBoundingClientRect(),n={left:t.left,top:t.top},o=e.ownerDocument,r=o.defaultView||o.parentWindow,n.left+=y(r),n.top+=y(r,!0),n);R(E&&(E.x||E.y)?"".concat(E.x-a.left,"px ").concat(E.y-a.top,"px"):"")}return k&&(w.transformOrigin=k),a.createElement(f,{visible:m,onVisibleChanged:C,onAppearPrepare:I,onEnterPrepare:I,forceRender:d,motionName:p,removeOnLeave:v,ref:h},(function(o,m){var d=o.className,f=o.style;return a.createElement(N,n({},t,{ref:r,title:c,ariaId:b,prefixCls:l,holderRef:m,style:e(e(e({},f),i),w),className:s(u,d)}))}))}));h.displayName="Content";var g=function(t){var o=t.prefixCls,r=t.style,l=t.visible,c=t.maskProps,i=t.motionName,u=t.className;return a.createElement(f,{key:"mask",visible:l,motionName:i,leavedClassName:"".concat(o,"-mask-hidden")},(function(t,l){var i=t.className,m=t.style;return a.createElement("div",n({ref:l,style:e(e({},m),r),className:s("".concat(o,"-mask"),i,u)},c))}))},x=function(t){var r=t.prefixCls,l=void 0===r?"rc-dialog":r,c=t.zIndex,f=t.visible,v=void 0!==f&&f,y=t.keyboard,b=void 0===y||y,C=t.focusTriggerAfterClose,E=void 0===C||C,N=t.wrapStyle,x=t.wrapClassName,k=t.wrapProps,R=t.onClose,w=t.afterOpenChange,I=t.afterClose,P=t.transitionName,S=t.animation,j=t.closable,D=void 0===j||j,M=t.mask,_=void 0===M||M,A=t.maskTransitionName,O=t.maskAnimation,T=t.maskClosable,U=void 0===T||T,V=t.maskStyle,z=t.maskProps,K=t.rootClassName,L=t.classNames,B=t.styles,H=a.useRef(),W=a.useRef(),X=a.useRef(),Y=a.useState(v),q=o(Y,2),F=q[0],G=q[1],J=u();function Q(e){null==R||R(e)}var Z=a.useRef(!1),$=a.useRef(),ee=null;U&&(ee=function(e){Z.current?Z.current=!1:W.current===e.target&&Q(e)}),a.useEffect((function(){v&&(G(!0),m(W.current,document.activeElement)||(H.current=document.activeElement))}),[v]),a.useEffect((function(){return function(){clearTimeout($.current)}}),[]);var te=e(e(e({zIndex:c},N),null==B?void 0:B.wrapper),{},{display:F?null:"none"});return a.createElement("div",n({className:s("".concat(l,"-root"),K)},i(t,{data:!0})),a.createElement(g,{prefixCls:l,visible:_&&v,motionName:p(l,A,O),style:e(e({zIndex:c},V),null==B?void 0:B.mask),maskProps:z,className:null==L?void 0:L.mask}),a.createElement("div",n({tabIndex:-1,onKeyDown:function(e){if(b&&e.keyCode===d.ESC)return e.stopPropagation(),void Q(e);v&&e.keyCode===d.TAB&&X.current.changeActive(!e.shiftKey)},className:s("".concat(l,"-wrap"),x,null==L?void 0:L.wrapper),ref:W,onClick:ee,style:te},k),a.createElement(h,n({},t,{onMouseDown:function(){clearTimeout($.current),Z.current=!0},onMouseUp:function(){$.current=setTimeout((function(){Z.current=!1}))},ref:X,closable:D,ariaId:J,prefixCls:l,visible:v&&F,onClose:Q,onVisibleChanged:function(e){if(e)m(W.current,document.activeElement)||null===(t=X.current)||void 0===t||t.focus();else{if(G(!1),_&&H.current&&E){try{H.current.focus({preventScroll:!0})}catch(n){}H.current=null}F&&(null==I||I())}var t;null==w||w(e)},motionName:p(l,P,S)}))))},k=function(e){var t=e.visible,l=e.getContainer,s=e.forceRender,c=e.destroyOnClose,i=void 0!==c&&c,u=e.afterClose,m=e.panelRef,d=a.useState(t),f=o(d,2),p=f[0],y=f[1],b=a.useMemo((function(){return{panel:m}}),[m]);return a.useEffect((function(){t&&y(!0)}),[t]),s||!i||p?a.createElement(v.Provider,{value:b},a.createElement(r,{open:t||s||p,autoDestroy:!1,getContainer:l,autoLock:t||p},a.createElement(x,n({},e,{destroyOnClose:i,afterClose:function(){null==u||u(),y(!1)}})))):null};k.displayName="Dialog";export{k as D,N as P};
