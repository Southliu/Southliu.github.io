import{a as C,c as q}from"./@babel_runtime@7.19.0-130d17ca.js";import{r as s,R as Y}from"./react@18.2.0-44b760b7.js";import{P as se}from"./@rc-component_portal@1.0.3_biqbaboplfbrettd7655fr4n2y-b13e432e.js";import{c as O}from"./classnames@2.3.2-d75d9a59.js";import{q as ce,v as fe,m as F,K as G}from"./rc-util@5.24.4_biqbaboplfbrettd7655fr4n2y-26f345e3.js";import{C as p}from"./rc-motion@2.6.2_biqbaboplfbrettd7655fr4n2y-efb9388b.js";import{j as o,b as B}from"./@ant-design_icons@4.7.0_biqbaboplfbrettd7655fr4n2y-e9f5044e.js";function ue(e){var n=e.prefixCls,t=e.style,a=e.visible,i=e.maskProps,r=e.motionName;return o(p,{visible:a,motionName:r,leavedClassName:"".concat(n,"-mask-hidden"),children:function(c,f){var d=c.className,m=c.style;return o("div",{ref:f,style:C(C({},m),t),className:O("".concat(n,"-mask"),d),...i})}},"mask")}function J(e,n,t){var a=n;return!a&&t&&(a="".concat(e,"-").concat(t)),a}function Q(e,n){var t=e["page".concat(n?"Y":"X","Offset")],a="scroll".concat(n?"Top":"Left");if(typeof t!="number"){var i=e.document;t=i.documentElement[a],typeof t!="number"&&(t=i.body[a])}return t}function de(e){var n=e.getBoundingClientRect(),t={left:n.left,top:n.top},a=e.ownerDocument,i=a.defaultView||a.parentWindow;return t.left+=Q(i),t.top+=Q(i,!0),t}const me=s.exports.memo(function(e){var n=e.children;return n},function(e,n){var t=n.shouldUpdate;return!t});var Z={width:0,height:0,overflow:"hidden",outline:"none"},ve=Y.forwardRef(function(e,n){var t=e.prefixCls,a=e.className,i=e.style,r=e.title,c=e.ariaId,f=e.footer,d=e.closable,m=e.closeIcon,y=e.onClose,b=e.children,h=e.bodyStyle,N=e.bodyProps,g=e.modalRender,w=e.onMouseDown,I=e.onMouseUp,P=e.holderRef,D=e.visible,k=e.forceRender,u=e.width,A=e.height,x=s.exports.useRef(),R=s.exports.useRef();Y.useImperativeHandle(n,function(){return{focus:function(){var v;(v=x.current)===null||v===void 0||v.focus()},changeActive:function(v){var W=document,E=W.activeElement;v&&E===R.current?x.current.focus():!v&&E===x.current&&R.current.focus()}}});var _={};u!==void 0&&(_.width=u),A!==void 0&&(_.height=A);var T;f&&(T=o("div",{className:"".concat(t,"-footer"),children:f}));var $;r&&($=o("div",{className:"".concat(t,"-header"),children:o("div",{className:"".concat(t,"-title"),id:c,children:r})}));var V;d&&(V=o("button",{type:"button",onClick:y,"aria-label":"Close",className:"".concat(t,"-close"),children:m||o("span",{className:"".concat(t,"-close-x")})}));var S=B("div",{className:"".concat(t,"-content"),children:[V,$,o("div",{className:"".concat(t,"-body"),style:h,...N,children:b}),T]});return B("div",{role:"dialog","aria-labelledby":r?c:null,"aria-modal":"true",ref:P,style:C(C({},i),_),className:O(t,a),onMouseDown:w,onMouseUp:I,children:[o("div",{tabIndex:0,ref:x,style:Z,"aria-hidden":"true"}),o(me,{shouldUpdate:D||k,children:g?g(S):S}),o("div",{tabIndex:0,ref:R,style:Z,"aria-hidden":"true"})]},"dialog-element")}),ee=s.exports.forwardRef(function(e,n){var t=e.prefixCls,a=e.title,i=e.style,r=e.className,c=e.visible,f=e.forceRender,d=e.destroyOnClose,m=e.motionName,y=e.ariaId,b=e.onVisibleChanged,h=e.mousePosition,N=s.exports.useRef(),g=s.exports.useState(),w=q(g,2),I=w[0],P=w[1],D={};I&&(D.transformOrigin=I);function k(){var u=de(N.current);P(h?"".concat(h.x-u.left,"px ").concat(h.y-u.top,"px"):"")}return o(p,{visible:c,onVisibleChanged:b,onAppearPrepare:k,onEnterPrepare:k,forceRender:f,motionName:m,removeOnLeave:d,ref:N,children:function(u,A){var x=u.className,R=u.style;return o(ve,{...e,ref:n,title:a,ariaId:y,prefixCls:t,holderRef:A,style:C(C(C({},R),i),D),className:O(r,x)})}})});ee.displayName="Content";function Ce(e){var n=e.prefixCls,t=n===void 0?"rc-dialog":n,a=e.zIndex,i=e.visible,r=i===void 0?!1:i,c=e.keyboard,f=c===void 0?!0:c,d=e.focusTriggerAfterClose,m=d===void 0?!0:d,y=e.wrapStyle,b=e.wrapClassName,h=e.wrapProps,N=e.onClose,g=e.afterClose,w=e.transitionName,I=e.animation,P=e.closable,D=P===void 0?!0:P,k=e.mask,u=k===void 0?!0:k,A=e.maskTransitionName,x=e.maskAnimation,R=e.maskClosable,_=R===void 0?!0:R,T=e.maskStyle,$=e.maskProps,V=e.rootClassName,S=s.exports.useRef(),M=s.exports.useRef(),v=s.exports.useRef(),W=s.exports.useState(r),E=q(W,2),K=E[0],H=E[1],te=ce();function ne(){F(M.current,document.activeElement)||(S.current=document.activeElement)}function ae(){if(!F(M.current,document.activeElement)){var l;(l=v.current)===null||l===void 0||l.focus()}}function oe(l){if(l)ae();else{if(H(!1),u&&S.current&&m){try{S.current.focus({preventScroll:!0})}catch{}S.current=null}K&&(g==null||g())}}function j(l){N==null||N(l)}var U=s.exports.useRef(!1),z=s.exports.useRef(),ie=function(){clearTimeout(z.current),U.current=!0},re=function(){z.current=setTimeout(function(){U.current=!1})},X=null;_&&(X=function(L){U.current?U.current=!1:M.current===L.target&&j(L)});function le(l){if(f&&l.keyCode===G.ESC){l.stopPropagation(),j(l);return}r&&l.keyCode===G.TAB&&v.current.changeActive(!l.shiftKey)}return s.exports.useEffect(function(){r&&(H(!0),ne())},[r]),s.exports.useEffect(function(){return function(){clearTimeout(z.current)}},[]),B("div",{className:O("".concat(t,"-root"),V),...fe(e,{data:!0}),children:[o(ue,{prefixCls:t,visible:u&&r,motionName:J(t,A,x),style:C({zIndex:a},T),maskProps:$}),o("div",{tabIndex:-1,onKeyDown:le,className:O("".concat(t,"-wrap"),b),ref:M,onClick:X,style:C(C({zIndex:a},y),{},{display:K?null:"none"}),...h,children:o(ee,{...e,onMouseDown:ie,onMouseUp:re,ref:v,closable:D,ariaId:te,prefixCls:t,visible:r&&K,onClose:j,onVisibleChanged:oe,motionName:J(t,w,I)})})]})}var ye=function(n){var t=n.visible,a=n.getContainer,i=n.forceRender,r=n.destroyOnClose,c=r===void 0?!1:r,f=n.afterClose,d=s.exports.useState(t),m=q(d,2),y=m[0],b=m[1];return s.exports.useEffect(function(){t&&b(!0)},[t]),!i&&c&&!y?null:o(se,{open:t||i||y,autoDestroy:!1,getContainer:a,autoLock:t||y,children:o(Ce,{...n,destroyOnClose:c,afterClose:function(){f==null||f(),b(!1)}})})};ye.displayName="Dialog";export{ye as D};
