import{k as e,b as n,c as t,a as r,_ as a,f as o,h as i,g as u,d as c,e as s,j as f}from"./@babel_runtime@7.25.4.Bu2As08a.js";import{c as v}from"./classnames@2.5.1.CxW7iW8f.js";import{c as l,q as d,z as m,M as p,d as E,j as y,s as h,N as k}from"./rc-util@5.43.0_react-dom@18.3.1_react@18.3.1.5TlMtcjp.js";import{r as A}from"./react@18.3.1.DI4wpprY.js";var L=["children"],b=A.createContext({});function g(n){var t=n.children,r=e(n,L);return A.createElement(b.Provider,{value:r},t)}var C=function(e){n(i,e);var o=t(i);function i(){return r(this,i),o.apply(this,arguments)}return a(i,[{key:"render",value:function(){return this.props.children}}]),i}(A.Component),j="none",w="appear",R="enter",S="leave",P="none",N="prepare",O="start",M="active",T="end",x="prepared";function V(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var _,z,D,F=(_=l(),z="undefined"!=typeof window?window:{},D={animationend:V("Animation","AnimationEnd"),transitionend:V("Transition","TransitionEnd")},_&&("AnimationEvent"in z||delete D.animationend.animation,"TransitionEvent"in z||delete D.transitionend.transition),D),I={};if(l()){var K=document.createElement("div");I=K.style}var q={};function H(e){if(q[e])return q[e];var n=F[e];if(n)for(var t=Object.keys(n),r=t.length,a=0;a<r;a+=1){var o=t[a];if(Object.prototype.hasOwnProperty.call(n,o)&&o in I)return q[e]=n[o],q[e]}return""}var U=H("animationend"),W=H("transitionend"),B=!(!U||!W),G=U||"animationend",J=W||"transitionend";function Q(e,n){return e?"object"===o(e)?e[n.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(n):null}const X=function(e){var n=A.useRef();function t(n){n&&(n.removeEventListener(J,e),n.removeEventListener(G,e))}return A.useEffect((function(){return function(){t(n.current)}}),[]),[function(r){n.current&&n.current!==r&&t(n.current),r&&r!==n.current&&(r.addEventListener(J,e),r.addEventListener(G,e),n.current=r)},t]};var Y=l()?A.useLayoutEffect:A.useEffect;var Z=[N,O,M,T],$=[N,x],ee=!1,ne=!0;function te(e){return e===M||e===T}const re=function(e,n,t){var r=m(P),a=i(r,2),o=a[0],u=a[1],c=function(){var e=A.useRef(null);function n(){d.cancel(e.current)}return A.useEffect((function(){return function(){n()}}),[]),[function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var o=d((function(){a<=1?r({isCanceled:function(){return o!==e.current}}):t(r,a-1)}));e.current=o},n]}(),s=i(c,2),f=s[0],v=s[1];var l=n?$:Z;return Y((function(){if(o!==P&&o!==T){var e=l.indexOf(o),n=l[e+1],r=t(o);r===ee?u(n,!0):n&&f((function(e){function t(){e.isCanceled()||u(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,o]),A.useEffect((function(){return function(){v()}}),[]),[function(){u(N,!0)},o]};const ae=function(e){var n=e;"object"===o(e)&&(n=e.transitionSupport);var t=A.forwardRef((function(e,t){var r=e.visible,a=void 0===r||r,o=e.removeOnLeave,s=void 0===o||o,f=e.forceRender,l=e.children,d=e.motionName,L=e.leavedClassName,g=e.eventProps,P=function(e,t){return!(!e.motionName||!n||!1===t)}(e,A.useContext(b).motion),T=A.useRef(),V=A.useRef();var _=function(e,n,t,r){var a=r.motionEnter,o=void 0===a||a,s=r.motionAppear,f=void 0===s||s,v=r.motionLeave,l=void 0===v||v,d=r.motionDeadline,y=r.motionLeaveImmediately,h=r.onAppearPrepare,k=r.onEnterPrepare,L=r.onLeavePrepare,b=r.onAppearStart,g=r.onEnterStart,C=r.onLeaveStart,P=r.onAppearActive,T=r.onEnterActive,V=r.onLeaveActive,_=r.onAppearEnd,z=r.onEnterEnd,D=r.onLeaveEnd,F=r.onVisibleChanged,I=m(),K=i(I,2),q=K[0],H=K[1],U=p(j),W=i(U,2),B=W[0],G=W[1],J=m(null),Q=i(J,2),Z=Q[0],$=Q[1],ae=B(),oe=A.useRef(!1),ie=A.useRef(null);function ue(){return t()}var ce=A.useRef(!1);function se(){G(j),$(null,!0)}var fe=E((function(e){var n=B();if(n!==j){var t=ue();if(!e||e.deadline||e.target===t){var r,a=ce.current;n===w&&a?r=null==_?void 0:_(t,e):n===R&&a?r=null==z?void 0:z(t,e):n===S&&a&&(r=null==D?void 0:D(t,e)),a&&!1!==r&&se()}}})),ve=X(fe),le=i(ve,1)[0],de=function(e){switch(e){case w:return c(c(c({},N,h),O,b),M,P);case R:return c(c(c({},N,k),O,g),M,T);case S:return c(c(c({},N,L),O,C),M,V);default:return{}}},me=A.useMemo((function(){return de(ae)}),[ae]),pe=re(ae,!e,(function(e){if(e===N){var n=me[N];return n?n(ue()):ee}var t;return he in me&&$((null===(t=me[he])||void 0===t?void 0:t.call(me,ue(),null))||null),he===M&&ae!==j&&(le(ue()),d>0&&(clearTimeout(ie.current),ie.current=setTimeout((function(){fe({deadline:!0})}),d))),he===x&&se(),ne})),Ee=i(pe,2),ye=Ee[0],he=Ee[1],ke=te(he);ce.current=ke,Y((function(){H(n);var t,r=oe.current;oe.current=!0,!r&&n&&f&&(t=w),r&&n&&o&&(t=R),(r&&!n&&l||!r&&y&&!n&&l)&&(t=S);var a=de(t);t&&(e||a[N])?(G(t),ye()):G(j)}),[n]),A.useEffect((function(){(ae===w&&!f||ae===R&&!o||ae===S&&!l)&&G(j)}),[f,o,l]),A.useEffect((function(){return function(){oe.current=!1,clearTimeout(ie.current)}}),[]);var Ae=A.useRef(!1);A.useEffect((function(){q&&(Ae.current=!0),void 0!==q&&ae===j&&((Ae.current||q)&&(null==F||F(q)),Ae.current=!0)}),[q,ae]);var Le=Z;return me[N]&&he===O&&(Le=u({transition:"none"},Le)),[ae,he,Le,null!=q?q:n]}(P,a,(function(){try{return T.current instanceof HTMLElement?T.current:k(V.current)}catch(e){return null}}),e),z=i(_,4),D=z[0],F=z[1],I=z[2],K=z[3],q=A.useRef(K);K&&(q.current=!0);var H,U=A.useCallback((function(e){T.current=e,y(t,e)}),[t]),W=u(u({},g),{},{visible:a});if(l)if(D===j)H=K?l(u({},W),U):!s&&q.current&&L?l(u(u({},W),{},{className:L}),U):f||!s&&!L?l(u(u({},W),{},{style:{display:"none"}}),U):null;else{var B;F===N?B="prepare":te(F)?B="active":F===O&&(B="start");var G=Q(d,"".concat(D,"-").concat(B));H=l(u(u({},W),{},{className:v(Q(d,D),c(c({},G,G&&B),d,"string"==typeof d)),style:I}),U)}else H=null;A.isValidElement(H)&&h(H)&&(H.ref||(H=A.cloneElement(H,{ref:U})));return A.createElement(C,{ref:V},H)}));return t.displayName="CSSMotion",t}(B);var oe="add",ie="keep",ue="remove",ce="removed";function se(e){var n;return n=e&&"object"===o(e)&&"key"in e?e:{key:e},u(u({},n),{},{key:String(n.key)})}function fe(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(se)}var ve=["component","children","onVisibleChanged","onAllRemoved"],le=["status"],de=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const me=function(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae,v=function(o){n(l,o);var v=t(l);function l(){var e;r(this,l);for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return e=v.call.apply(v,[this].concat(t)),c(s(e),"state",{keyEntities:[]}),c(s(e),"removeKey",(function(n){var t=e.state.keyEntities.map((function(e){return e.key!==n?e:u(u({},e),{},{status:ce})}));return e.setState({keyEntities:t}),t.filter((function(e){return e.status!==ce})).length})),e}return a(l,[{key:"render",value:function(){var n=this,t=this.state.keyEntities,r=this.props,a=r.component,o=r.children,c=r.onVisibleChanged,s=r.onAllRemoved,v=e(r,ve),l=a||A.Fragment,d={};return de.forEach((function(e){d[e]=v[e],delete v[e]})),delete v.keys,A.createElement(l,v,t.map((function(t,r){var a=t.status,v=e(t,le),l=a===oe||a===ie;return A.createElement(i,f({},d,{key:v.key,visible:l,eventProps:v,onVisibleChanged:function(e){(null==c||c(e,{key:v.key}),e)||0===n.removeKey(v.key)&&s&&s()}}),(function(e,n){return o(u(u({},e),{},{index:r}),n)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,r=n.keyEntities,a=fe(t),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=0,a=n.length,o=fe(e),i=fe(n);o.forEach((function(e){for(var n=!1,o=r;o<a;o+=1){var c=i[o];if(c.key===e.key){r<o&&(t=t.concat(i.slice(r,o).map((function(e){return u(u({},e),{},{status:oe})}))),r=o),t.push(u(u({},c),{},{status:ie})),r+=1,n=!0;break}}n||t.push(u(u({},e),{},{status:ue}))})),r<a&&(t=t.concat(i.slice(r).map((function(e){return u(u({},e),{},{status:oe})}))));var c={};return t.forEach((function(e){var n=e.key;c[n]=(c[n]||0)+1})),Object.keys(c).filter((function(e){return c[e]>1})).forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||r!==ue}))).forEach((function(n){n.key===e&&(n.status=ie)}))})),t}(r,a);return{keyEntities:o.filter((function(e){var n=r.find((function(n){var t=n.key;return e.key===t}));return!n||n.status!==ce||e.status!==ue}))}}}]),l}(A.Component);return c(v,"defaultProps",{component:"div"}),v}(B);export{ae as C,g as M,me as a};
