import{a as y,c as H}from"./@babel_runtime@7.19.0-16d3a89d.js";import{r as o}from"./react@18.2.0-9cdefec6.js";import{m as re,p as le,j as se,K as F,P as ce}from"./rc-util@5.24.4_react-dom@18.2.0_react@18.2.0-c033d194.js";import{c as E}from"./classnames@2.3.2-d75d9a59.js";import{C as p}from"./rc-motion@2.6.2_react-dom@18.2.0_react@18.2.0-f5366c8e.js";import{j as i,b as B}from"./@ant-design_icons@4.7.0_react-dom@18.2.0_react@18.2.0-0d73ff6d.js";function ue(e){var n=e.prefixCls,t=e.style,a=e.visible,r=e.maskProps,l=e.motionName;return i(p,{visible:a,motionName:l,leavedClassName:"".concat(n,"-mask-hidden"),children:function(s){var u=s.className,m=s.style;return i("div",{style:y(y({},m),t),className:E("".concat(n,"-mask"),u),...r})}},"mask")}function G(e,n,t){var a=n;return!a&&t&&(a="".concat(e,"-").concat(t)),a}function J(e,n){var t=e["page".concat(n?"Y":"X","Offset")],a="scroll".concat(n?"Top":"Left");if(typeof t!="number"){var r=e.document;t=r.documentElement[a],typeof t!="number"&&(t=r.body[a])}return t}function fe(e){var n=e.getBoundingClientRect(),t={left:n.left,top:n.top},a=e.ownerDocument,r=a.defaultView||a.parentWindow;return t.left+=J(r),t.top+=J(r,!0),t}const de=o.memo(function(e){var n=e.children;return n},function(e,n){var t=n.shouldUpdate;return!t});var Q={width:0,height:0,overflow:"hidden",outline:"none"},me=o.forwardRef(function(e,n){var t=e.prefixCls,a=e.className,r=e.style,l=e.title,s=e.ariaId,u=e.footer,m=e.closable,b=e.closeIcon,c=e.onClose,h=e.children,v=e.bodyStyle,k=e.bodyProps,N=e.modalRender,g=e.onMouseDown,I=e.onMouseUp,D=e.holderRef,S=e.visible,P=e.forceRender,d=e.width,w=e.height,R=o.useRef(),x=o.useRef();o.useImperativeHandle(n,function(){return{focus:function(){var C;(C=R.current)===null||C===void 0||C.focus()},changeActive:function(C){var O=document,W=O.activeElement;C&&W===x.current?R.current.focus():!C&&W===R.current&&x.current.focus()}}});var M={};d!==void 0&&(M.width=d),w!==void 0&&(M.height=w);var T;u&&(T=i("div",{className:"".concat(t,"-footer"),children:u}));var $;l&&($=i("div",{className:"".concat(t,"-header"),children:i("div",{className:"".concat(t,"-title"),id:s,children:l})}));var V;m&&(V=i("button",{type:"button",onClick:c,"aria-label":"Close",className:"".concat(t,"-close"),children:b||i("span",{className:"".concat(t,"-close-x")})}));var U=B("div",{className:"".concat(t,"-content"),children:[V,$,i("div",{className:"".concat(t,"-body"),style:v,...k,children:h}),T]});return B("div",{role:"dialog","aria-labelledby":l?s:null,"aria-modal":"true",ref:D,style:y(y({},r),M),className:E(t,a),onMouseDown:g,onMouseUp:I,children:[i("div",{tabIndex:0,ref:R,style:Q,"aria-hidden":"true"}),i(de,{shouldUpdate:S||P,children:N?N(U):U}),i("div",{tabIndex:0,ref:x,style:Q,"aria-hidden":"true"})]},"dialog-element")}),ee=o.forwardRef(function(e,n){var t=e.prefixCls,a=e.title,r=e.style,l=e.className,s=e.visible,u=e.forceRender,m=e.destroyOnClose,b=e.motionName,c=e.ariaId,h=e.onVisibleChanged,v=e.mousePosition,k=o.useRef(),N=o.useState(),g=H(N,2),I=g[0],D=g[1],S={};I&&(S.transformOrigin=I);function P(){var d=fe(k.current);D(v?"".concat(v.x-d.left,"px ").concat(v.y-d.top,"px"):"")}return i(p,{visible:s,onVisibleChanged:h,onAppearPrepare:P,onEnterPrepare:P,forceRender:u,motionName:b,removeOnLeave:m,ref:k,children:function(d,w){var R=d.className,x=d.style;return i(me,{...e,ref:n,title:a,ariaId:c,prefixCls:t,holderRef:w,style:y(y(y({},x),r),S),className:E(l,R)})}})});ee.displayName="Content";function Z(e){var n=e.prefixCls,t=n===void 0?"rc-dialog":n,a=e.zIndex,r=e.visible,l=r===void 0?!1:r,s=e.keyboard,u=s===void 0?!0:s,m=e.focusTriggerAfterClose,b=m===void 0?!0:m,c=e.scrollLocker,h=e.wrapStyle,v=e.wrapClassName,k=e.wrapProps,N=e.onClose,g=e.afterClose,I=e.transitionName,D=e.animation,S=e.closable,P=S===void 0?!0:S,d=e.mask,w=d===void 0?!0:d,R=e.maskTransitionName,x=e.maskAnimation,M=e.maskClosable,T=M===void 0?!0:M,$=e.maskStyle,V=e.maskProps,U=e.rootClassName,_=o.useRef(),C=o.useRef(),O=o.useRef(),W=o.useState(l),X=H(W,2),j=X[0],Y=X[1],te=re();function ne(f){if(f){if(!se(C.current,document.activeElement)){var A;_.current=document.activeElement,(A=O.current)===null||A===void 0||A.focus()}}else{if(Y(!1),w&&_.current&&b){try{_.current.focus({preventScroll:!0})}catch{}_.current=null}j&&(g==null||g())}}function L(f){N==null||N(f)}var K=o.useRef(!1),z=o.useRef(),ae=function(){clearTimeout(z.current),K.current=!0},oe=function(){z.current=setTimeout(function(){K.current=!1})},q=null;T&&(q=function(A){K.current?K.current=!1:C.current===A.target&&L(A)});function ie(f){if(u&&f.keyCode===F.ESC){f.stopPropagation(),L(f);return}l&&f.keyCode===F.TAB&&O.current.changeActive(!f.shiftKey)}return o.useEffect(function(){return l&&Y(!0),function(){}},[l]),o.useEffect(function(){return function(){clearTimeout(z.current)}},[]),o.useEffect(function(){return j?(c==null||c.lock(),c==null?void 0:c.unLock):function(){}},[j,c]),B("div",{className:E("".concat(t,"-root"),U),...le(e,{data:!0}),children:[i(ue,{prefixCls:t,visible:w&&l,motionName:G(t,R,x),style:y({zIndex:a},$),maskProps:V}),i("div",{tabIndex:-1,onKeyDown:ie,className:E("".concat(t,"-wrap"),v),ref:C,onClick:q,style:y(y({zIndex:a},h),{},{display:j?null:"none"}),...k,children:i(ee,{...e,onMouseDown:ae,onMouseUp:oe,ref:O,closable:P,ariaId:te,prefixCls:t,visible:l,onClose:L,onVisibleChanged:ne,motionName:G(t,I,D)})})]})}var ve=function(n){var t=n.visible,a=n.getContainer,r=n.forceRender,l=n.destroyOnClose,s=l===void 0?!1:l,u=n.afterClose,m=o.useState(t),b=H(m,2),c=b[0],h=b[1];return o.useEffect(function(){t&&h(!0)},[t]),a===!1?i(Z,{...n,getOpenCount:function(){return 2}}):!r&&s&&!c?null:i(ce,{visible:t,forceRender:r,getContainer:a,children:function(v){return i(Z,{...n,destroyOnClose:s,afterClose:function(){u==null||u(),h(!1)},...v})}})};ve.displayName="Dialog";export{ve as D};
