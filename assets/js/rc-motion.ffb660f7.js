import{e as ce,d as N,b as k,f as l,m as Re,n as Le,a as Me,_ as _e,r as Se,g as We}from"./@babel_runtime.903d5e4f.js";import{r as u}from"./react.ee35a6c4.js";import{c as ve,h as ye,q as Z,G as ze,s as qe,H as Ge}from"./rc-util.5b7f5d25.js";import{c as He}from"./classnames.aa374d53.js";function he(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(n)]="webkit".concat(e),t["Moz".concat(n)]="moz".concat(e),t["ms".concat(n)]="MS".concat(e),t["O".concat(n)]="o".concat(e.toLowerCase()),t}function Be(n,e){var t={animationend:he("Animation","AnimationEnd"),transitionend:he("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var Je=Be(ve(),typeof window<"u"?window:{}),Pe={};if(ve()){var Xe=document.createElement("div");Pe=Xe.style}var B={};function be(n){if(B[n])return B[n];var e=Je[n];if(e)for(var t=Object.keys(e),r=t.length,a=0;a<r;a+=1){var s=t[a];if(Object.prototype.hasOwnProperty.call(e,s)&&s in Pe)return B[n]=e[s],B[n]}return""}var xe=be("animationend"),Oe=be("transitionend"),Ne=!!(xe&&Oe),Ae=xe||"animationend",ge=Oe||"transitionend";function Te(n,e){if(!n)return null;if(ce(n)==="object"){var t=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return n[t]}return"".concat(n,"-").concat(e)}var j="none",J="appear",X="enter",Y="leave",ke="none",M="prepare",I="start",Q="active",fe="end";const Ye=function(){var n=u.useRef(null);function e(){ye.cancel(n.current)}function t(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var s=ye(function(){a<=1?r({isCanceled:function(){return s!==n.current}}):t(r,a-1)});n.current=s}return u.useEffect(function(){return function(){e()}},[]),[t,e]};var De=ve()?u.useLayoutEffect:u.useEffect,Ce=[M,I,Q,fe],Ve=!1,Ze=!0;function we(n){return n===Q||n===fe}const en=function(n,e){var t=Z(ke),r=N(t,2),a=r[0],s=r[1],i=Ye(),d=N(i,2),y=d[0],o=d[1];function c(){s(M,!0)}return De(function(){if(a!==ke&&a!==fe){var v=Ce.indexOf(a),f=Ce[v+1],m=e(a);m===Ve?s(f,!0):y(function(h){function C(){h.isCanceled()||s(f,!0)}m===!0?C():Promise.resolve(m).then(C)})}},[n,a]),u.useEffect(function(){return function(){o()}},[]),[c,a]},nn=function(n){var e=u.useRef(),t=u.useRef(n);t.current=n;var r=u.useCallback(function(i){t.current(i)},[]);function a(i){i&&(i.removeEventListener(ge,r),i.removeEventListener(Ae,r))}function s(i){e.current&&e.current!==i&&a(e.current),i&&i!==e.current&&(i.addEventListener(ge,r),i.addEventListener(Ae,r),e.current=i)}return u.useEffect(function(){return function(){a(e.current)}},[]),[s,a]};function tn(n,e,t,r){var a=r.motionEnter,s=a===void 0?!0:a,i=r.motionAppear,d=i===void 0?!0:i,y=r.motionLeave,o=y===void 0?!0:y,c=r.motionDeadline,v=r.motionLeaveImmediately,f=r.onAppearPrepare,m=r.onEnterPrepare,h=r.onLeavePrepare,C=r.onAppearStart,R=r.onEnterStart,T=r.onLeaveStart,w=r.onAppearActive,_=r.onEnterActive,P=r.onLeaveActive,b=r.onAppearEnd,L=r.onEnterEnd,D=r.onLeaveEnd,V=r.onVisibleChanged,q=Z(),x=N(q,2),p=x[0],F=x[1],K=Z(j),O=N(K,2),A=O[0],$=O[1],W=Z(null),le=N(W,2),Fe=le[0],de=le[1],ee=u.useRef(!1),ne=u.useRef(null);function G(){return t()}var me=u.useRef(!1);function pe(E){var S=G();if(!(E&&!E.deadline&&E.target!==S)){var g=me.current,H;A===J&&g?H=b==null?void 0:b(S,E):A===X&&g?H=L==null?void 0:L(S,E):A===Y&&g&&(H=D==null?void 0:D(S,E)),A!==j&&g&&H!==!1&&($(j,!0),de(null,!0))}}var Ke=nn(pe),Ue=N(Ke,1),je=Ue[0],z=u.useMemo(function(){var E,S,g;switch(A){case J:return E={},k(E,M,f),k(E,I,C),k(E,Q,w),E;case X:return S={},k(S,M,m),k(S,I,R),k(S,Q,_),S;case Y:return g={},k(g,M,h),k(g,I,T),k(g,Q,P),g;default:return{}}},[A]),Ie=en(A,function(E){if(E===M){var S=z[M];return S?S(G()):Ve}if(U in z){var g;de(((g=z[U])===null||g===void 0?void 0:g.call(z,G(),null))||null)}return U===Q&&(je(G()),c>0&&(clearTimeout(ne.current),ne.current=setTimeout(function(){pe({deadline:!0})},c))),Ze}),Ee=N(Ie,2),Qe=Ee[0],U=Ee[1],$e=we(U);me.current=$e,De(function(){F(e);var E=ee.current;if(ee.current=!0,!!n){var S;!E&&e&&d&&(S=J),E&&e&&s&&(S=X),(E&&!e&&o||!E&&v&&!e&&o)&&(S=Y),S&&($(S),Qe())}},[e]),u.useEffect(function(){(A===J&&!d||A===X&&!s||A===Y&&!o)&&$(j)},[d,s,o]),u.useEffect(function(){return function(){ee.current=!1,clearTimeout(ne.current)}},[]);var te=u.useRef(!1);u.useEffect(function(){p&&(te.current=!0),p!==void 0&&A===j&&((te.current||p)&&(V==null||V(p)),te.current=!0)},[p,A]);var re=Fe;return z[M]&&U===I&&(re=l({transition:"none"},re)),[A,U,re,p??e]}var rn=function(n){Re(t,n);var e=Le(t);function t(){return Me(this,t),e.apply(this,arguments)}return _e(t,[{key:"render",value:function(){return this.props.children}}]),t}(u.Component);function an(n){var e=n;ce(n)==="object"&&(e=n.transitionSupport);function t(a){return!!(a.motionName&&e)}var r=u.forwardRef(function(a,s){var i=a.visible,d=i===void 0?!0:i,y=a.removeOnLeave,o=y===void 0?!0:y,c=a.forceRender,v=a.children,f=a.motionName,m=a.leavedClassName,h=a.eventProps,C=t(a),R=u.useRef(),T=u.useRef();function w(){try{return R.current instanceof HTMLElement?R.current:Ge(T.current)}catch{return null}}var _=tn(C,d,w,a),P=N(_,4),b=P[0],L=P[1],D=P[2],V=P[3],q=u.useRef(V);V&&(q.current=!0);var x=u.useCallback(function(W){R.current=W,ze(s,W)},[s]),p,F=l(l({},h),{},{visible:d});if(!v)p=null;else if(b===j||!t(a))V?p=v(l({},F),x):!o&&q.current?p=v(l(l({},F),{},{className:m}),x):c?p=v(l(l({},F),{},{style:{display:"none"}}),x):p=null;else{var K,O;L===M?O="prepare":we(L)?O="active":L===I&&(O="start"),p=v(l(l({},F),{},{className:He(Te(f,b),(K={},k(K,Te(f,"".concat(b,"-").concat(O)),O),k(K,f,typeof f=="string"),K)),style:D}),x)}if(u.isValidElement(p)&&qe(p)){var A=p,$=A.ref;$||(p=u.cloneElement(p,{ref:x}))}return u.createElement(rn,{ref:T},p)});return r.displayName="CSSMotion",r}const on=an(Ne);var ie="add",oe="keep",ue="remove",ae="removed";function un(n){var e;return n&&ce(n)==="object"&&"key"in n?e=n:e={key:n},l(l({},e),{},{key:String(e.key)})}function se(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(un)}function sn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],r=0,a=e.length,s=se(n),i=se(e);s.forEach(function(o){for(var c=!1,v=r;v<a;v+=1){var f=i[v];if(f.key===o.key){r<v&&(t=t.concat(i.slice(r,v).map(function(m){return l(l({},m),{},{status:ie})})),r=v),t.push(l(l({},f),{},{status:oe})),r+=1,c=!0;break}}c||t.push(l(l({},o),{},{status:ue}))}),r<a&&(t=t.concat(i.slice(r).map(function(o){return l(l({},o),{},{status:ie})})));var d={};t.forEach(function(o){var c=o.key;d[c]=(d[c]||0)+1});var y=Object.keys(d).filter(function(o){return d[o]>1});return y.forEach(function(o){t=t.filter(function(c){var v=c.key,f=c.status;return v!==o||f!==ue}),t.forEach(function(c){c.key===o&&(c.status=oe)})}),t}var cn=["component","children","onVisibleChanged","onAllRemoved"],vn=["status"],fn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ln(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:on,t=function(r){Re(s,r);var a=Le(s);function s(){var i;Me(this,s);for(var d=arguments.length,y=new Array(d),o=0;o<d;o++)y[o]=arguments[o];return i=a.call.apply(a,[this].concat(y)),i.state={keyEntities:[]},i.removeKey=function(c){var v=i.state.keyEntities,f=v.map(function(m){return m.key!==c?m:l(l({},m),{},{status:ae})});return i.setState({keyEntities:f}),f.filter(function(m){var h=m.status;return h!==ae}).length},i}return _e(s,[{key:"render",value:function(){var d=this,y=this.state.keyEntities,o=this.props,c=o.component,v=o.children,f=o.onVisibleChanged,m=o.onAllRemoved,h=Se(o,cn),C=c||u.Fragment,R={};return fn.forEach(function(T){R[T]=h[T],delete h[T]}),delete h.keys,u.createElement(C,h,y.map(function(T){var w=T.status,_=Se(T,vn),P=w===ie||w===oe;return u.createElement(e,We({},R,{key:_.key,visible:P,eventProps:_,onVisibleChanged:function(L){if(f==null||f(L,{key:_.key}),!L){var D=d.removeKey(_.key);D===0&&m&&m()}}}),v)}))}}],[{key:"getDerivedStateFromProps",value:function(d,y){var o=d.keys,c=y.keyEntities,v=se(o),f=sn(c,v);return{keyEntities:f.filter(function(m){var h=c.find(function(C){var R=C.key;return m.key===R});return!(h&&h.status===ae&&m.status===ue)})}}}]),s}(u.Component);return t.defaultProps={component:"div"},t}const Sn=ln(Ne);export{on as C,Sn as a};
