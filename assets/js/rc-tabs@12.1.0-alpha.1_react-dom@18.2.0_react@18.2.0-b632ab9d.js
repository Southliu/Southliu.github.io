import{d as j,b as Re,a as U,c as C,k as et,_ as Be}from"./@babel_runtime@7.19.0-16d3a89d.js";import{r as a}from"./react@18.2.0-9cdefec6.js";import{c as _}from"./classnames@2.3.2-d75d9a59.js";import{b as me,K as Y,x as Dt,d as tt}from"./rc-util@5.24.4_react-dom@18.2.0_react@18.2.0-c033d194.js";import{C as Kt}from"./rc-motion@2.6.2_react-dom@18.2.0_react@18.2.0-f5366c8e.js";import{j as g,b as le}from"./@ant-design_icons@4.7.0_react-dom@18.2.0_react@18.2.0-0d73ff6d.js";import{R as at}from"./rc-resize-observer@1.2.0_react-dom@18.2.0_react@18.2.0-f8c0c9ca.js";import{E as $t,M as Ht}from"./rc-menu@9.6.4_react-dom@18.2.0_react@18.2.0-a554d247.js";import{D as Ot}from"./rc-dropdown@4.0.1_react-dom@18.2.0_react@18.2.0-3c8ce056.js";const Ne=a.createContext(null);var dt=a.forwardRef(function(e,r){var o=e.prefixCls,i=e.className,t=e.style,n=e.id,s=e.active,c=e.tabKey,l=e.children;return g("div",{id:n&&"".concat(n,"-panel-").concat(c),role:"tabpanel",tabIndex:s?0:-1,"aria-labelledby":n&&"".concat(n,"-tab-").concat(c),"aria-hidden":!s,style:t,className:_(o,s&&"".concat(o,"-active"),i),ref:r,children:l})}),jt=["key","forceRender","style","className"];function Ft(e){var r=e.id,o=e.activeKey,i=e.animated,t=e.tabPosition,n=e.destroyInactiveTabPane,s=a.useContext(Ne),c=s.prefixCls,l=s.tabs,p=i.tabPane,y="".concat(c,"-tabpane");return g("div",{className:_("".concat(c,"-content-holder")),children:g("div",{className:_("".concat(c,"-content"),"".concat(c,"-content-").concat(t),j({},"".concat(c,"-content-animated"),p)),children:l.map(function(f){var P=f.key,$=f.forceRender,S=f.style,I=f.className,A=Re(f,jt),W=P===o;return g(Kt,{visible:W,forceRender:$,removeOnLeave:!!n,leavedClassName:"".concat(y,"-hidden"),...i.tabPaneMotion,children:function(K,w){var x=K.style,M=K.className;return g(dt,{...A,prefixCls:y,id:r,tabKey:P,animated:p,active:W,style:U(U({},S),x),className:_(I,M),ref:w})}},P)})})})}function ft(e){var r=a.useRef(),o=a.useRef(!1);function i(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];o.current||(me.cancel(r.current),r.current=me(function(){e.apply(void 0,n)}))}return a.useEffect(function(){return o.current=!1,function(){o.current=!0,me.cancel(r.current)}},[]),i}function Vt(e){var r=a.useRef([]),o=a.useState({}),i=C(o,2),t=i[1],n=a.useRef(typeof e=="function"?e():e),s=ft(function(){var l=n.current;r.current.forEach(function(p){l=p(l)}),r.current=[],n.current=l,t({})});function c(l){r.current.push(l),s()}return[n.current,c]}function Gt(e,r){var o,i=e.prefixCls,t=e.id,n=e.active,s=e.tab,c=s.key,l=s.label,p=s.disabled,y=s.closeIcon,f=e.closable,P=e.renderWrapper,$=e.removeAriaLabel,S=e.editable,I=e.onClick,A=e.onRemove,W=e.onFocus,K=e.style,w="".concat(i,"-tab");a.useEffect(function(){return A},[]);var x=S&&f!==!1&&!p;function M(R){p||I(R)}function H(R){R.preventDefault(),R.stopPropagation(),S.onEdit("remove",{key:c,event:R})}var O=le("div",{ref:r,className:_(w,(o={},j(o,"".concat(w,"-with-remove"),x),j(o,"".concat(w,"-active"),n),j(o,"".concat(w,"-disabled"),p),o)),style:K,onClick:M,children:[g("div",{role:"tab","aria-selected":n,id:t&&"".concat(t,"-tab-").concat(c),className:"".concat(w,"-btn"),"aria-controls":t&&"".concat(t,"-panel-").concat(c),"aria-disabled":p,tabIndex:p?null:0,onClick:function(u){u.stopPropagation(),M(u)},onKeyDown:function(u){[Y.SPACE,Y.ENTER].includes(u.which)&&(u.preventDefault(),M(u))},onFocus:W,children:l}),x&&g("button",{type:"button","aria-label":$||"remove",tabIndex:0,className:"".concat(w,"-remove"),onClick:function(u){u.stopPropagation(),H(u)},children:y||S.removeIcon||"\xD7"})]},c);return P?P(O):O}const zt=a.forwardRef(Gt);var nt={width:0,height:0,left:0,top:0};function Ut(e,r,o){return a.useMemo(function(){for(var i,t=new Map,n=r.get((i=e[0])===null||i===void 0?void 0:i.key)||nt,s=n.left+n.width,c=0;c<e.length;c+=1){var l=e[c].key,p=r.get(l);if(!p){var y;p=r.get((y=e[c-1])===null||y===void 0?void 0:y.key)||nt}var f=t.get(l)||U({},p);f.right=s-f.left-f.width,t.set(l,f)}return t},[e.map(function(i){return i.key}).join("_"),r,o])}var rt={width:0,height:0,left:0,top:0,right:0};function _t(e,r,o,i,t){var n=t.tabs,s=t.tabPosition,c=t.rtl,l,p,y;["top","bottom"].includes(s)?(l="width",p=c?"right":"left",y=Math.abs(r.left)):(l="height",p="top",y=-r.top);var f=r[l],P=o[l],$=i[l],S=f;return P+$>f&&P<f&&(S=f-$),a.useMemo(function(){if(!n.length)return[0,0];for(var I=n.length,A=I,W=0;W<I;W+=1){var K=e.get(n[W].key)||rt;if(K[p]+K[l]>y+S){A=W-1;break}}for(var w=0,x=I-1;x>=0;x-=1){var M=e.get(n[x].key)||rt;if(M[p]<y){w=x+1;break}}return[w,A]},[e,y,S,s,n.map(function(I){return I.key}).join("_"),c])}function Xt(e,r){var o=e.prefixCls,i=e.editable,t=e.locale,n=e.style;return!i||i.showAdd===!1?null:g("button",{ref:r,type:"button",className:"".concat(o,"-nav-add"),style:n,"aria-label":(t==null?void 0:t.addAriaLabel)||"Add tab",onClick:function(c){i.onEdit("add",{event:c})},children:i.addIcon||"+"})}const vt=a.forwardRef(Xt);function Yt(e,r){var o=e.prefixCls,i=e.id,t=e.tabs,n=e.locale,s=e.mobile,c=e.moreIcon,l=c===void 0?"More":c,p=e.moreTransitionName,y=e.style,f=e.className,P=e.editable,$=e.tabBarGutter,S=e.rtl,I=e.removeAriaLabel,A=e.onTabClick,W=e.getPopupContainer,K=e.popupClassName,w=a.useState(!1),x=C(w,2),M=x[0],H=x[1],O=a.useState(null),R=C(O,2),u=R[0],N=R[1],E="".concat(i,"-more-popup"),v="".concat(o,"-dropdown"),b=u!==null?"".concat(E,"-").concat(u):null,D=n==null?void 0:n.dropdownAriaLabel;function L(d,T){d.preventDefault(),d.stopPropagation(),P.onEdit("remove",{key:T,event:d})}var ee=g($t,{onClick:function(T){var X=T.key,V=T.domEvent;A(X,V),H(!1)},prefixCls:"".concat(v,"-menu"),id:E,tabIndex:-1,role:"listbox","aria-activedescendant":b,selectedKeys:[u],"aria-label":D!==void 0?D:"expanded dropdown",children:t.map(function(d){var T=P&&d.closable!==!1&&!d.disabled;return le(Ht,{id:"".concat(E,"-").concat(d.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(d.key),disabled:d.disabled,children:[g("span",{children:d.label}),T&&g("button",{type:"button","aria-label":I||"remove",tabIndex:0,className:"".concat(v,"-menu-item-remove"),onClick:function(V){V.stopPropagation(),L(V,d.key)},children:d.closeIcon||P.removeIcon||"\xD7"})]},d.key)})});function te(d){for(var T=t.filter(function(re){return!re.disabled}),X=T.findIndex(function(re){return re.key===u})||0,V=T.length,q=0;q<V;q+=1){X=(X+d+V)%V;var Z=T[X];if(!Z.disabled){N(Z.key);return}}}function ae(d){var T=d.which;if(!M){[Y.DOWN,Y.SPACE,Y.ENTER].includes(T)&&(H(!0),d.preventDefault());return}switch(T){case Y.UP:te(-1),d.preventDefault();break;case Y.DOWN:te(1),d.preventDefault();break;case Y.ESC:H(!1);break;case Y.SPACE:case Y.ENTER:u!==null&&A(u,d);break}}a.useEffect(function(){var d=document.getElementById(b);d&&d.scrollIntoView&&d.scrollIntoView(!1)},[u]),a.useEffect(function(){M||N(null)},[M]);var F=j({},S?"marginRight":"marginLeft",$);t.length||(F.visibility="hidden",F.order=1);var ne=_(j({},"".concat(v,"-rtl"),S)),se=s?null:g(Ot,{prefixCls:v,overlay:ee,trigger:["hover"],visible:t.length?M:!1,transitionName:p,onVisibleChange:H,overlayClassName:_(ne,K),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:W,children:g("button",{type:"button",className:"".concat(o,"-nav-more"),style:F,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":E,id:"".concat(i,"-more"),"aria-expanded":M,onKeyDown:ae,children:l})});return le("div",{className:_("".concat(o,"-nav-operations"),f),style:y,ref:r,children:[se,g(vt,{prefixCls:o,locale:n,editable:P})]})}const Zt=a.memo(a.forwardRef(Yt),function(e,r){return r.tabMoving});var qt=.1,ot=.01,Te=20,it=Math.pow(.995,Te);function Jt(e,r){var o=a.useState(),i=C(o,2),t=i[0],n=i[1],s=a.useState(0),c=C(s,2),l=c[0],p=c[1],y=a.useState(0),f=C(y,2),P=f[0],$=f[1],S=a.useState(),I=C(S,2),A=I[0],W=I[1],K=a.useRef();function w(u){var N=u.touches[0],E=N.screenX,v=N.screenY;n({x:E,y:v}),window.clearInterval(K.current)}function x(u){if(!!t){u.preventDefault();var N=u.touches[0],E=N.screenX,v=N.screenY;n({x:E,y:v});var b=E-t.x,D=v-t.y;r(b,D);var L=Date.now();p(L),$(L-l),W({x:b,y:D})}}function M(){if(!!t&&(n(null),W(null),A)){var u=A.x/P,N=A.y/P,E=Math.abs(u),v=Math.abs(N);if(Math.max(E,v)<qt)return;var b=u,D=N;K.current=window.setInterval(function(){if(Math.abs(b)<ot&&Math.abs(D)<ot){window.clearInterval(K.current);return}b*=it,D*=it,r(b*Te,D*Te)},Te)}}var H=a.useRef();function O(u){var N=u.deltaX,E=u.deltaY,v=0,b=Math.abs(N),D=Math.abs(E);b===D?v=H.current==="x"?N:E:b>D?(v=N,H.current="x"):(v=E,H.current="y"),r(-v,-v)&&u.preventDefault()}var R=a.useRef(null);R.current={onTouchStart:w,onTouchMove:x,onTouchEnd:M,onWheel:O},a.useEffect(function(){function u(b){R.current.onTouchStart(b)}function N(b){R.current.onTouchMove(b)}function E(b){R.current.onTouchEnd(b)}function v(b){R.current.onWheel(b)}return document.addEventListener("touchmove",N,{passive:!1}),document.addEventListener("touchend",E,{passive:!1}),e.current.addEventListener("touchstart",u,{passive:!1}),e.current.addEventListener("wheel",v),function(){document.removeEventListener("touchmove",N),document.removeEventListener("touchend",E)}},[])}function Qt(){var e=a.useRef(new Map);function r(i){return e.current.has(i)||e.current.set(i,a.createRef()),e.current.get(i)}function o(i){e.current.delete(i)}return[r,o]}function st(e,r){var o=a.useRef(e),i=a.useState({}),t=C(i,2),n=t[1];function s(c){var l=typeof c=="function"?c(o.current):c;l!==o.current&&r(l,o.current),o.current=l,n({})}return[o.current,s]}var ct=function(r){var o=r.position,i=r.prefixCls,t=r.extra;if(!t)return null;var n,s={};return t&&Be(t)==="object"&&!a.isValidElement(t)?s=t:s.right=t,o==="right"&&(n=s.right),o==="left"&&(n=s.left),n?g("div",{className:"".concat(i,"-extra-content"),children:n}):null};function ea(e,r){var o,i=a.useContext(Ne),t=i.prefixCls,n=i.tabs,s=e.className,c=e.style,l=e.id,p=e.animated,y=e.activeKey,f=e.rtl,P=e.extra,$=e.editable,S=e.locale,I=e.tabPosition,A=e.tabBarGutter,W=e.children,K=e.onTabClick,w=e.onTabScroll,x=a.useRef(),M=a.useRef(),H=a.useRef(),O=a.useRef(),R=Qt(),u=C(R,2),N=u[0],E=u[1],v=I==="top"||I==="bottom",b=st(0,function(h,m){v&&w&&w({direction:h>m?"left":"right"})}),D=C(b,2),L=D[0],ee=D[1],te=st(0,function(h,m){!v&&w&&w({direction:h>m?"top":"bottom"})}),ae=C(te,2),F=ae[0],ne=ae[1],se=a.useState(0),d=C(se,2),T=d[0],X=d[1],V=a.useState(0),q=C(V,2),Z=q[0],re=q[1],pe=a.useState(null),he=C(pe,2),G=he[0],ke=he[1],ge=a.useState(null),ye=C(ge,2),J=ye[0],k=ye[1],oe=a.useState(0),ce=C(oe,2),bt=ce[0],mt=ce[1],pt=a.useState(0),We=C(pt,2),ht=We[0],gt=We[1],yt=Vt(new Map),De=C(yt,2),St=De[0],Ct=De[1],Se=Ut(n,St,T),xt="".concat(t,"-nav-operations-hidden"),ue=0,de=0;v?f?(ue=0,de=Math.max(0,T-G)):(ue=Math.min(0,G-T),de=0):(ue=Math.min(0,J-Z),de=0);function Pe(h){return h<ue?ue:h>de?de:h}var Ke=a.useRef(),Tt=a.useState(),$e=C(Tt,2),Ce=$e[0],He=$e[1];function we(){He(Date.now())}function Ee(){window.clearTimeout(Ke.current)}Jt(x,function(h,m){function B(z,ie){z(function(ve){var Le=Pe(ve+ie);return Le})}if(v){if(G>=T)return!1;B(ee,h)}else{if(J>=Z)return!1;B(ne,m)}return Ee(),we(),!0}),a.useEffect(function(){return Ee(),Ce&&(Ke.current=window.setTimeout(function(){He(0)},100)),Ee},[Ce]);function Oe(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y,m=Se.get(h)||{width:0,height:0,left:0,right:0,top:0};if(v){var B=L;f?m.right<L?B=m.right:m.right+m.width>L+G&&(B=m.right+m.width-G):m.left<-L?B=-m.left:m.left+m.width>-L+G&&(B=-(m.left+m.width-G)),ne(0),ee(Pe(B))}else{var z=F;m.top<-F?z=-m.top:m.top+m.height>-F+J&&(z=-(m.top+m.height-J)),ee(0),ne(Pe(z))}}var Rt=_t(Se,{width:G,height:J,left:L,top:F},{width:T,height:Z},{width:bt,height:ht},U(U({},e),{},{tabs:n})),je=C(Rt,2),Nt=je[0],kt=je[1],xe={};I==="top"||I==="bottom"?xe[f?"marginRight":"marginLeft"]=A:xe.marginTop=A;var Fe=n.map(function(h,m){var B=h.key;return g(zt,{id:l,prefixCls:t,tab:h,style:m===0?void 0:xe,closable:h.closable,editable:$,active:B===y,renderWrapper:W,removeAriaLabel:S==null?void 0:S.removeAriaLabel,ref:N(B),onClick:function(ie){K(B,ie)},onRemove:function(){E(B)},onFocus:function(){Oe(B),we(),x.current&&(f||(x.current.scrollLeft=0),x.current.scrollTop=0)}},B)}),Ie=ft(function(){var h,m,B,z,ie,ve,Le=((h=x.current)===null||h===void 0?void 0:h.offsetWidth)||0,At=((m=x.current)===null||m===void 0?void 0:m.offsetHeight)||0,Ze=((B=O.current)===null||B===void 0?void 0:B.offsetWidth)||0,qe=((z=O.current)===null||z===void 0?void 0:z.offsetHeight)||0;ke(Le),k(At),mt(Ze),gt(qe);var Lt=(((ie=M.current)===null||ie===void 0?void 0:ie.offsetWidth)||0)-Ze,Bt=(((ve=M.current)===null||ve===void 0?void 0:ve.offsetHeight)||0)-qe;X(Lt),re(Bt),Ct(function(){var Je=new Map;return n.forEach(function(Wt){var Qe=Wt.key,be=N(Qe).current;be&&Je.set(Qe,{width:be.offsetWidth,height:be.offsetHeight,left:be.offsetLeft,top:be.offsetTop})}),Je})}),Pt=n.slice(0,Nt),wt=n.slice(kt+1),Ve=[].concat(et(Pt),et(wt)),Et=a.useState(),Ge=C(Et,2),It=Ge[0],Mt=Ge[1],Q=Se.get(y),ze=a.useRef();function Ue(){me.cancel(ze.current)}a.useEffect(function(){var h={};return Q&&(v?(f?h.right=Q.right:h.left=Q.left,h.width=Q.width):(h.top=Q.top,h.height=Q.height)),Ue(),ze.current=me(function(){Mt(h)}),Ue},[Q,v,f]),a.useEffect(function(){Oe()},[y,Q,Se,v]),a.useEffect(function(){Ie()},[f,A,y,n.map(function(h){return h.key}).join("_")]);var _e=!!Ve.length,fe="".concat(t,"-nav-wrap"),Me,Ae,Xe,Ye;return v?f?(Ae=L>0,Me=L+G<T):(Me=L<0,Ae=-L+G<T):(Xe=F<0,Ye=-F+J<Z),le("div",{ref:r,role:"tablist",className:_("".concat(t,"-nav"),s),style:c,onKeyDown:function(){we()},children:[g(ct,{position:"left",extra:P,prefixCls:t}),g(at,{onResize:Ie,children:g("div",{className:_(fe,(o={},j(o,"".concat(fe,"-ping-left"),Me),j(o,"".concat(fe,"-ping-right"),Ae),j(o,"".concat(fe,"-ping-top"),Xe),j(o,"".concat(fe,"-ping-bottom"),Ye),o)),ref:x,children:g(at,{onResize:Ie,children:le("div",{ref:M,className:"".concat(t,"-nav-list"),style:{transform:"translate(".concat(L,"px, ").concat(F,"px)"),transition:Ce?"none":void 0},children:[Fe,g(vt,{ref:O,prefixCls:t,locale:S,editable:$,style:U(U({},Fe.length===0?void 0:xe),{},{visibility:_e?"hidden":null})}),g("div",{className:_("".concat(t,"-ink-bar"),j({},"".concat(t,"-ink-bar-animated"),p.inkBar)),style:It})]})})})}),g(Zt,{...e,removeAriaLabel:S==null?void 0:S.removeAriaLabel,ref:H,prefixCls:t,tabs:Ve,className:!_e&&xt,tabMoving:!!Ce}),g(ct,{position:"right",extra:P,prefixCls:t})]})}const lt=a.forwardRef(ea);var ta=["renderTabBar"],aa=["label","key"];function na(e){var r=e.renderTabBar,o=Re(e,ta),i=a.useContext(Ne),t=i.tabs;if(r){var n=U(U({},o),{},{panes:t.map(function(s){var c=s.label,l=s.key,p=Re(s,aa);return g(dt,{tab:c,tabKey:l,...p},l)})});return r(n,lt)}return g(lt,{...o})}function ra(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},r;return e===!1?r={inkBar:!1,tabPane:!1}:e===!0?r={inkBar:!0,tabPane:!1}:r=U({inkBar:!0},Be(e)==="object"?e:{}),r.tabPaneMotion&&r.tabPane===void 0&&(r.tabPane=!0),!r.tabPaneMotion&&r.tabPane&&(r.tabPane=!1),r}var oa=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],ut=0;function ia(e,r){var o,i=e.id,t=e.prefixCls,n=t===void 0?"rc-tabs":t,s=e.className,c=e.items,l=e.direction,p=e.activeKey,y=e.defaultActiveKey,f=e.editable,P=e.animated,$=e.tabPosition,S=$===void 0?"top":$,I=e.tabBarGutter,A=e.tabBarStyle,W=e.tabBarExtraContent,K=e.locale,w=e.moreIcon,x=e.moreTransitionName,M=e.destroyInactiveTabPane,H=e.renderTabBar,O=e.onChange,R=e.onTabClick,u=e.onTabScroll,N=e.getPopupContainer,E=e.popupClassName,v=Re(e,oa),b=a.useMemo(function(){return(c||[]).filter(function(k){return k&&Be(k)==="object"&&"key"in k})},[c]),D=l==="rtl",L=ra(P),ee=a.useState(!1),te=C(ee,2),ae=te[0],F=te[1];a.useEffect(function(){F(Dt())},[]);var ne=tt(function(){var k;return(k=b[0])===null||k===void 0?void 0:k.key},{value:p,defaultValue:y}),se=C(ne,2),d=se[0],T=se[1],X=a.useState(function(){return b.findIndex(function(k){return k.key===d})}),V=C(X,2),q=V[0],Z=V[1];a.useEffect(function(){var k=b.findIndex(function(ce){return ce.key===d});if(k===-1){var oe;k=Math.max(0,Math.min(q,b.length-1)),T((oe=b[k])===null||oe===void 0?void 0:oe.key)}Z(k)},[b.map(function(k){return k.key}).join("_"),d,q]);var re=tt(null,{value:i}),pe=C(re,2),he=pe[0],G=pe[1];a.useEffect(function(){i||(G("rc-tabs-".concat(ut)),ut+=1)},[]);function ke(k,oe){R==null||R(k,oe);var ce=k!==d;T(k),ce&&(O==null||O(k))}var ge={id:he,activeKey:d,animated:L,tabPosition:S,rtl:D,mobile:ae},ye,J=U(U({},ge),{},{editable:f,locale:K,moreIcon:w,moreTransitionName:x,tabBarGutter:I,onTabClick:ke,onTabScroll:u,extra:W,style:A,panes:null,getPopupContainer:N,popupClassName:E});return g(Ne.Provider,{value:{tabs:b,prefixCls:n},children:le("div",{ref:r,id:i,className:_(n,"".concat(n,"-").concat(S),(o={},j(o,"".concat(n,"-mobile"),ae),j(o,"".concat(n,"-editable"),f),j(o,"".concat(n,"-rtl"),D),o),s),...v,children:[ye,g(na,{...J,renderTabBar:H}),g(Ft,{destroyInactiveTabPane:M,...ge,animated:L})]})})}var pa=a.forwardRef(ia);export{pa as F};
