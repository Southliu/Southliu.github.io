{"version":3,"file":"rc-motion.c6acb570.js","sources":["../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/util/motion.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/interface.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/hooks/useNextFrame.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/hooks/useIsomorphicLayoutEffect.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/hooks/useStepQueue.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/hooks/useDomMotionEvents.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/hooks/useStatus.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/DomWrapper.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/CSSMotion.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/util/diff.js","../../../node_modules/.pnpm/rc-motion@2.6.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-motion/es/CSSMotionList.js"],"sourcesContent":["import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport canUseDOM from \"rc-util/es/Dom/canUseDom\";\n\n// ================= Transition =================\n// Event wrapper. Copy from react source code\nfunction makePrefixMap(styleProp, eventName) {\n  var prefixes = {};\n  prefixes[styleProp.toLowerCase()] = eventName.toLowerCase();\n  prefixes[\"Webkit\".concat(styleProp)] = \"webkit\".concat(eventName);\n  prefixes[\"Moz\".concat(styleProp)] = \"moz\".concat(eventName);\n  prefixes[\"ms\".concat(styleProp)] = \"MS\".concat(eventName);\n  prefixes[\"O\".concat(styleProp)] = \"o\".concat(eventName.toLowerCase());\n  return prefixes;\n}\n\nexport function getVendorPrefixes(domSupport, win) {\n  var prefixes = {\n    animationend: makePrefixMap('Animation', 'AnimationEnd'),\n    transitionend: makePrefixMap('Transition', 'TransitionEnd')\n  };\n\n  if (domSupport) {\n    if (!('AnimationEvent' in win)) {\n      delete prefixes.animationend.animation;\n    }\n\n    if (!('TransitionEvent' in win)) {\n      delete prefixes.transitionend.transition;\n    }\n  }\n\n  return prefixes;\n}\nvar vendorPrefixes = getVendorPrefixes(canUseDOM(), typeof window !== 'undefined' ? window : {});\nvar style = {};\n\nif (canUseDOM()) {\n  var _document$createEleme = document.createElement('div');\n\n  style = _document$createEleme.style;\n}\n\nvar prefixedEventNames = {};\nexport function getVendorPrefixedEventName(eventName) {\n  if (prefixedEventNames[eventName]) {\n    return prefixedEventNames[eventName];\n  }\n\n  var prefixMap = vendorPrefixes[eventName];\n\n  if (prefixMap) {\n    var stylePropList = Object.keys(prefixMap);\n    var len = stylePropList.length;\n\n    for (var i = 0; i < len; i += 1) {\n      var styleProp = stylePropList[i];\n\n      if (Object.prototype.hasOwnProperty.call(prefixMap, styleProp) && styleProp in style) {\n        prefixedEventNames[eventName] = prefixMap[styleProp];\n        return prefixedEventNames[eventName];\n      }\n    }\n  }\n\n  return '';\n}\nvar internalAnimationEndName = getVendorPrefixedEventName('animationend');\nvar internalTransitionEndName = getVendorPrefixedEventName('transitionend');\nexport var supportTransition = !!(internalAnimationEndName && internalTransitionEndName);\nexport var animationEndName = internalAnimationEndName || 'animationend';\nexport var transitionEndName = internalTransitionEndName || 'transitionend';\nexport function getTransitionName(transitionName, transitionType) {\n  if (!transitionName) return null;\n\n  if (_typeof(transitionName) === 'object') {\n    var type = transitionType.replace(/-\\w/g, function (match) {\n      return match[1].toUpperCase();\n    });\n    return transitionName[type];\n  }\n\n  return \"\".concat(transitionName, \"-\").concat(transitionType);\n}","export var STATUS_NONE = 'none';\nexport var STATUS_APPEAR = 'appear';\nexport var STATUS_ENTER = 'enter';\nexport var STATUS_LEAVE = 'leave';\nexport var STEP_NONE = 'none';\nexport var STEP_PREPARE = 'prepare';\nexport var STEP_START = 'start';\nexport var STEP_ACTIVE = 'active';\nexport var STEP_ACTIVATED = 'end';","import * as React from 'react';\nimport raf from \"rc-util/es/raf\";\nexport default (function () {\n  var nextFrameRef = React.useRef(null);\n\n  function cancelNextFrame() {\n    raf.cancel(nextFrameRef.current);\n  }\n\n  function nextFrame(callback) {\n    var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    cancelNextFrame();\n    var nextFrameId = raf(function () {\n      if (delay <= 1) {\n        callback({\n          isCanceled: function isCanceled() {\n            return nextFrameId !== nextFrameRef.current;\n          }\n        });\n      } else {\n        nextFrame(callback, delay - 1);\n      }\n    });\n    nextFrameRef.current = nextFrameId;\n  }\n\n  React.useEffect(function () {\n    return function () {\n      cancelNextFrame();\n    };\n  }, []);\n  return [nextFrame, cancelNextFrame];\n});","import { useEffect, useLayoutEffect } from 'react';\nimport canUseDom from \"rc-util/es/Dom/canUseDom\"; // It's safe to use `useLayoutEffect` but the warning is annoying\n\nvar useIsomorphicLayoutEffect = canUseDom() ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport useState from \"rc-util/es/hooks/useState\";\nimport { STEP_PREPARE, STEP_ACTIVE, STEP_START, STEP_ACTIVATED, STEP_NONE } from \"../interface\";\nimport useNextFrame from \"./useNextFrame\";\nimport useIsomorphicLayoutEffect from \"./useIsomorphicLayoutEffect\";\nvar STEP_QUEUE = [STEP_PREPARE, STEP_START, STEP_ACTIVE, STEP_ACTIVATED];\n/** Skip current step */\n\nexport var SkipStep = false;\n/** Current step should be update in */\n\nexport var DoStep = true;\nexport function isActive(step) {\n  return step === STEP_ACTIVE || step === STEP_ACTIVATED;\n}\nexport default (function (status, callback) {\n  var _useState = useState(STEP_NONE),\n      _useState2 = _slicedToArray(_useState, 2),\n      step = _useState2[0],\n      setStep = _useState2[1];\n\n  var _useNextFrame = useNextFrame(),\n      _useNextFrame2 = _slicedToArray(_useNextFrame, 2),\n      nextFrame = _useNextFrame2[0],\n      cancelNextFrame = _useNextFrame2[1];\n\n  function startQueue() {\n    setStep(STEP_PREPARE, true);\n  }\n\n  useIsomorphicLayoutEffect(function () {\n    if (step !== STEP_NONE && step !== STEP_ACTIVATED) {\n      var index = STEP_QUEUE.indexOf(step);\n      var nextStep = STEP_QUEUE[index + 1];\n      var result = callback(step);\n\n      if (result === SkipStep) {\n        // Skip when no needed\n        setStep(nextStep, true);\n      } else {\n        // Do as frame for step update\n        nextFrame(function (info) {\n          function doNext() {\n            // Skip since current queue is ood\n            if (info.isCanceled()) return;\n            setStep(nextStep, true);\n          }\n\n          if (result === true) {\n            doNext();\n          } else {\n            // Only promise should be async\n            Promise.resolve(result).then(doNext);\n          }\n        });\n      }\n    }\n  }, [status, step]);\n  React.useEffect(function () {\n    return function () {\n      cancelNextFrame();\n    };\n  }, []);\n  return [startQueue, step];\n});","import * as React from 'react';\nimport { useRef } from 'react';\nimport { animationEndName, transitionEndName } from \"../util/motion\";\nexport default (function (callback) {\n  var cacheElementRef = useRef(); // Cache callback\n\n  var callbackRef = useRef(callback);\n  callbackRef.current = callback; // Internal motion event handler\n\n  var onInternalMotionEnd = React.useCallback(function (event) {\n    callbackRef.current(event);\n  }, []); // Remove events\n\n  function removeMotionEvents(element) {\n    if (element) {\n      element.removeEventListener(transitionEndName, onInternalMotionEnd);\n      element.removeEventListener(animationEndName, onInternalMotionEnd);\n    }\n  } // Patch events\n\n\n  function patchMotionEvents(element) {\n    if (cacheElementRef.current && cacheElementRef.current !== element) {\n      removeMotionEvents(cacheElementRef.current);\n    }\n\n    if (element && element !== cacheElementRef.current) {\n      element.addEventListener(transitionEndName, onInternalMotionEnd);\n      element.addEventListener(animationEndName, onInternalMotionEnd); // Save as cache in case dom removed trigger by `motionDeadline`\n\n      cacheElementRef.current = element;\n    }\n  } // Clean up when removed\n\n\n  React.useEffect(function () {\n    return function () {\n      removeMotionEvents(cacheElementRef.current);\n    };\n  }, []);\n  return [patchMotionEvents, removeMotionEvents];\n});","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useRef, useEffect } from 'react';\nimport useState from \"rc-util/es/hooks/useState\";\nimport { STATUS_APPEAR, STATUS_NONE, STATUS_LEAVE, STATUS_ENTER, STEP_PREPARE, STEP_START, STEP_ACTIVE } from \"../interface\";\nimport useStepQueue, { DoStep, SkipStep, isActive } from \"./useStepQueue\";\nimport useDomMotionEvents from \"./useDomMotionEvents\";\nimport useIsomorphicLayoutEffect from \"./useIsomorphicLayoutEffect\";\nexport default function useStatus(supportMotion, visible, getElement, _ref) {\n  var _ref$motionEnter = _ref.motionEnter,\n      motionEnter = _ref$motionEnter === void 0 ? true : _ref$motionEnter,\n      _ref$motionAppear = _ref.motionAppear,\n      motionAppear = _ref$motionAppear === void 0 ? true : _ref$motionAppear,\n      _ref$motionLeave = _ref.motionLeave,\n      motionLeave = _ref$motionLeave === void 0 ? true : _ref$motionLeave,\n      motionDeadline = _ref.motionDeadline,\n      motionLeaveImmediately = _ref.motionLeaveImmediately,\n      onAppearPrepare = _ref.onAppearPrepare,\n      onEnterPrepare = _ref.onEnterPrepare,\n      onLeavePrepare = _ref.onLeavePrepare,\n      onAppearStart = _ref.onAppearStart,\n      onEnterStart = _ref.onEnterStart,\n      onLeaveStart = _ref.onLeaveStart,\n      onAppearActive = _ref.onAppearActive,\n      onEnterActive = _ref.onEnterActive,\n      onLeaveActive = _ref.onLeaveActive,\n      onAppearEnd = _ref.onAppearEnd,\n      onEnterEnd = _ref.onEnterEnd,\n      onLeaveEnd = _ref.onLeaveEnd,\n      onVisibleChanged = _ref.onVisibleChanged;\n\n  // Used for outer render usage to avoid `visible: false & status: none` to render nothing\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      asyncVisible = _useState2[0],\n      setAsyncVisible = _useState2[1];\n\n  var _useState3 = useState(STATUS_NONE),\n      _useState4 = _slicedToArray(_useState3, 2),\n      status = _useState4[0],\n      setStatus = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      style = _useState6[0],\n      setStyle = _useState6[1];\n\n  var mountedRef = useRef(false);\n  var deadlineRef = useRef(null); // =========================== Dom Node ===========================\n\n  function getDomElement() {\n    return getElement();\n  } // ========================== Motion End ==========================\n\n\n  var activeRef = useRef(false);\n\n  function onInternalMotionEnd(event) {\n    var element = getDomElement();\n\n    if (event && !event.deadline && event.target !== element) {\n      // event exists\n      // not initiated by deadline\n      // transitionEnd not fired by inner elements\n      return;\n    }\n\n    var currentActive = activeRef.current;\n    var canEnd;\n\n    if (status === STATUS_APPEAR && currentActive) {\n      canEnd = onAppearEnd === null || onAppearEnd === void 0 ? void 0 : onAppearEnd(element, event);\n    } else if (status === STATUS_ENTER && currentActive) {\n      canEnd = onEnterEnd === null || onEnterEnd === void 0 ? void 0 : onEnterEnd(element, event);\n    } else if (status === STATUS_LEAVE && currentActive) {\n      canEnd = onLeaveEnd === null || onLeaveEnd === void 0 ? void 0 : onLeaveEnd(element, event);\n    } // Only update status when `canEnd` and not destroyed\n\n\n    if (status !== STATUS_NONE && currentActive && canEnd !== false) {\n      setStatus(STATUS_NONE, true);\n      setStyle(null, true);\n    }\n  }\n\n  var _useDomMotionEvents = useDomMotionEvents(onInternalMotionEnd),\n      _useDomMotionEvents2 = _slicedToArray(_useDomMotionEvents, 1),\n      patchMotionEvents = _useDomMotionEvents2[0]; // ============================= Step =============================\n\n\n  var eventHandlers = React.useMemo(function () {\n    var _ref2, _ref3, _ref4;\n\n    switch (status) {\n      case STATUS_APPEAR:\n        return _ref2 = {}, _defineProperty(_ref2, STEP_PREPARE, onAppearPrepare), _defineProperty(_ref2, STEP_START, onAppearStart), _defineProperty(_ref2, STEP_ACTIVE, onAppearActive), _ref2;\n\n      case STATUS_ENTER:\n        return _ref3 = {}, _defineProperty(_ref3, STEP_PREPARE, onEnterPrepare), _defineProperty(_ref3, STEP_START, onEnterStart), _defineProperty(_ref3, STEP_ACTIVE, onEnterActive), _ref3;\n\n      case STATUS_LEAVE:\n        return _ref4 = {}, _defineProperty(_ref4, STEP_PREPARE, onLeavePrepare), _defineProperty(_ref4, STEP_START, onLeaveStart), _defineProperty(_ref4, STEP_ACTIVE, onLeaveActive), _ref4;\n\n      default:\n        return {};\n    }\n  }, [status]);\n\n  var _useStepQueue = useStepQueue(status, function (newStep) {\n    // Only prepare step can be skip\n    if (newStep === STEP_PREPARE) {\n      var onPrepare = eventHandlers[STEP_PREPARE];\n\n      if (!onPrepare) {\n        return SkipStep;\n      }\n\n      return onPrepare(getDomElement());\n    } // Rest step is sync update\n\n\n    if (step in eventHandlers) {\n      var _eventHandlers$step;\n\n      setStyle(((_eventHandlers$step = eventHandlers[step]) === null || _eventHandlers$step === void 0 ? void 0 : _eventHandlers$step.call(eventHandlers, getDomElement(), null)) || null);\n    }\n\n    if (step === STEP_ACTIVE) {\n      // Patch events when motion needed\n      patchMotionEvents(getDomElement());\n\n      if (motionDeadline > 0) {\n        clearTimeout(deadlineRef.current);\n        deadlineRef.current = setTimeout(function () {\n          onInternalMotionEnd({\n            deadline: true\n          });\n        }, motionDeadline);\n      }\n    }\n\n    return DoStep;\n  }),\n      _useStepQueue2 = _slicedToArray(_useStepQueue, 2),\n      startStep = _useStepQueue2[0],\n      step = _useStepQueue2[1];\n\n  var active = isActive(step);\n  activeRef.current = active; // ============================ Status ============================\n  // Update with new status\n\n  useIsomorphicLayoutEffect(function () {\n    setAsyncVisible(visible);\n    var isMounted = mountedRef.current;\n    mountedRef.current = true;\n\n    if (!supportMotion) {\n      return;\n    }\n\n    var nextStatus; // Appear\n\n    if (!isMounted && visible && motionAppear) {\n      nextStatus = STATUS_APPEAR;\n    } // Enter\n\n\n    if (isMounted && visible && motionEnter) {\n      nextStatus = STATUS_ENTER;\n    } // Leave\n\n\n    if (isMounted && !visible && motionLeave || !isMounted && motionLeaveImmediately && !visible && motionLeave) {\n      nextStatus = STATUS_LEAVE;\n    } // Update to next status\n\n\n    if (nextStatus) {\n      setStatus(nextStatus);\n      startStep();\n    }\n  }, [visible]); // ============================ Effect ============================\n  // Reset when motion changed\n\n  useEffect(function () {\n    if ( // Cancel appear\n    status === STATUS_APPEAR && !motionAppear || // Cancel enter\n    status === STATUS_ENTER && !motionEnter || // Cancel leave\n    status === STATUS_LEAVE && !motionLeave) {\n      setStatus(STATUS_NONE);\n    }\n  }, [motionAppear, motionEnter, motionLeave]);\n  useEffect(function () {\n    return function () {\n      mountedRef.current = false;\n      clearTimeout(deadlineRef.current);\n    };\n  }, []); // Trigger `onVisibleChanged`\n\n  var firstMountChangeRef = React.useRef(false);\n  useEffect(function () {\n    // [visible & motion not end] => [!visible & motion end] still need trigger onVisibleChanged\n    if (asyncVisible) {\n      firstMountChangeRef.current = true;\n    }\n\n    if (asyncVisible !== undefined && status === STATUS_NONE) {\n      // Skip first render is invisible since it's nothing changed\n      if (firstMountChangeRef.current || asyncVisible) {\n        onVisibleChanged === null || onVisibleChanged === void 0 ? void 0 : onVisibleChanged(asyncVisible);\n      }\n\n      firstMountChangeRef.current = true;\n    }\n  }, [asyncVisible, status]); // ============================ Styles ============================\n\n  var mergedStyle = style;\n\n  if (eventHandlers[STEP_PREPARE] && step === STEP_START) {\n    mergedStyle = _objectSpread({\n      transition: 'none'\n    }, mergedStyle);\n  }\n\n  return [status, step, mergedStyle, asyncVisible !== null && asyncVisible !== void 0 ? asyncVisible : visible];\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\n\nvar DomWrapper = /*#__PURE__*/function (_React$Component) {\n  _inherits(DomWrapper, _React$Component);\n\n  var _super = _createSuper(DomWrapper);\n\n  function DomWrapper() {\n    _classCallCheck(this, DomWrapper);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(DomWrapper, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n\n  return DomWrapper;\n}(React.Component);\n\nexport default DomWrapper;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\n/* eslint-disable react/default-props-match-prop-types, react/no-multi-comp, react/prop-types */\nimport * as React from 'react';\nimport { useRef } from 'react';\nimport findDOMNode from \"rc-util/es/Dom/findDOMNode\";\nimport { fillRef, supportRef } from \"rc-util/es/ref\";\nimport classNames from 'classnames';\nimport { getTransitionName, supportTransition } from \"./util/motion\";\nimport { STATUS_NONE, STEP_PREPARE, STEP_START } from \"./interface\";\nimport useStatus from \"./hooks/useStatus\";\nimport DomWrapper from \"./DomWrapper\";\nimport { isActive } from \"./hooks/useStepQueue\";\n\n/**\n * `transitionSupport` is used for none transition test case.\n * Default we use browser transition event support check.\n */\nexport function genCSSMotion(config) {\n  var transitionSupport = config;\n\n  if (_typeof(config) === 'object') {\n    transitionSupport = config.transitionSupport;\n  }\n\n  function isSupportTransition(props) {\n    return !!(props.motionName && transitionSupport);\n  }\n\n  var CSSMotion = /*#__PURE__*/React.forwardRef(function (props, ref) {\n    var _props$visible = props.visible,\n        visible = _props$visible === void 0 ? true : _props$visible,\n        _props$removeOnLeave = props.removeOnLeave,\n        removeOnLeave = _props$removeOnLeave === void 0 ? true : _props$removeOnLeave,\n        forceRender = props.forceRender,\n        children = props.children,\n        motionName = props.motionName,\n        leavedClassName = props.leavedClassName,\n        eventProps = props.eventProps;\n    var supportMotion = isSupportTransition(props); // Ref to the react node, it may be a HTMLElement\n\n    var nodeRef = useRef(); // Ref to the dom wrapper in case ref can not pass to HTMLElement\n\n    var wrapperNodeRef = useRef();\n\n    function getDomElement() {\n      try {\n        // Here we're avoiding call for findDOMNode since it's deprecated\n        // in strict mode. We're calling it only when node ref is not\n        // an instance of DOM HTMLElement. Otherwise use\n        // findDOMNode as a final resort\n        return nodeRef.current instanceof HTMLElement ? nodeRef.current : findDOMNode(wrapperNodeRef.current);\n      } catch (e) {\n        // Only happen when `motionDeadline` trigger but element removed.\n        return null;\n      }\n    }\n\n    var _useStatus = useStatus(supportMotion, visible, getDomElement, props),\n        _useStatus2 = _slicedToArray(_useStatus, 4),\n        status = _useStatus2[0],\n        statusStep = _useStatus2[1],\n        statusStyle = _useStatus2[2],\n        mergedVisible = _useStatus2[3]; // Record whether content has rendered\n    // Will return null for un-rendered even when `removeOnLeave={false}`\n\n\n    var renderedRef = React.useRef(mergedVisible);\n\n    if (mergedVisible) {\n      renderedRef.current = true;\n    } // ====================== Refs ======================\n\n\n    var setNodeRef = React.useCallback(function (node) {\n      nodeRef.current = node;\n      fillRef(ref, node);\n    }, [ref]); // ===================== Render =====================\n\n    var motionChildren;\n\n    var mergedProps = _objectSpread(_objectSpread({}, eventProps), {}, {\n      visible: visible\n    });\n\n    if (!children) {\n      // No children\n      motionChildren = null;\n    } else if (status === STATUS_NONE || !isSupportTransition(props)) {\n      // Stable children\n      if (mergedVisible) {\n        motionChildren = children(_objectSpread({}, mergedProps), setNodeRef);\n      } else if (!removeOnLeave && renderedRef.current && leavedClassName) {\n        motionChildren = children(_objectSpread(_objectSpread({}, mergedProps), {}, {\n          className: leavedClassName\n        }), setNodeRef);\n      } else if (forceRender || !removeOnLeave && !leavedClassName) {\n        motionChildren = children(_objectSpread(_objectSpread({}, mergedProps), {}, {\n          style: {\n            display: 'none'\n          }\n        }), setNodeRef);\n      } else {\n        motionChildren = null;\n      }\n    } else {\n      var _classNames;\n\n      // In motion\n      var statusSuffix;\n\n      if (statusStep === STEP_PREPARE) {\n        statusSuffix = 'prepare';\n      } else if (isActive(statusStep)) {\n        statusSuffix = 'active';\n      } else if (statusStep === STEP_START) {\n        statusSuffix = 'start';\n      }\n\n      motionChildren = children(_objectSpread(_objectSpread({}, mergedProps), {}, {\n        className: classNames(getTransitionName(motionName, status), (_classNames = {}, _defineProperty(_classNames, getTransitionName(motionName, \"\".concat(status, \"-\").concat(statusSuffix)), statusSuffix), _defineProperty(_classNames, motionName, typeof motionName === 'string'), _classNames)),\n        style: statusStyle\n      }), setNodeRef);\n    } // Auto inject ref if child node not have `ref` props\n\n\n    if ( /*#__PURE__*/React.isValidElement(motionChildren) && supportRef(motionChildren)) {\n      var _ref = motionChildren,\n          originNodeRef = _ref.ref;\n\n      if (!originNodeRef) {\n        motionChildren = /*#__PURE__*/React.cloneElement(motionChildren, {\n          ref: setNodeRef\n        });\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(DomWrapper, {\n      ref: wrapperNodeRef\n    }, motionChildren);\n  });\n  CSSMotion.displayName = 'CSSMotion';\n  return CSSMotion;\n}\nexport default genCSSMotion(supportTransition);","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport var STATUS_ADD = 'add';\nexport var STATUS_KEEP = 'keep';\nexport var STATUS_REMOVE = 'remove';\nexport var STATUS_REMOVED = 'removed';\nexport function wrapKeyToObject(key) {\n  var keyObj;\n\n  if (key && _typeof(key) === 'object' && 'key' in key) {\n    keyObj = key;\n  } else {\n    keyObj = {\n      key: key\n    };\n  }\n\n  return _objectSpread(_objectSpread({}, keyObj), {}, {\n    key: String(keyObj.key)\n  });\n}\nexport function parseKeys() {\n  var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return keys.map(wrapKeyToObject);\n}\nexport function diffKeys() {\n  var prevKeys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var currentKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var list = [];\n  var currentIndex = 0;\n  var currentLen = currentKeys.length;\n  var prevKeyObjects = parseKeys(prevKeys);\n  var currentKeyObjects = parseKeys(currentKeys); // Check prev keys to insert or keep\n\n  prevKeyObjects.forEach(function (keyObj) {\n    var hit = false;\n\n    for (var i = currentIndex; i < currentLen; i += 1) {\n      var currentKeyObj = currentKeyObjects[i];\n\n      if (currentKeyObj.key === keyObj.key) {\n        // New added keys should add before current key\n        if (currentIndex < i) {\n          list = list.concat(currentKeyObjects.slice(currentIndex, i).map(function (obj) {\n            return _objectSpread(_objectSpread({}, obj), {}, {\n              status: STATUS_ADD\n            });\n          }));\n          currentIndex = i;\n        }\n\n        list.push(_objectSpread(_objectSpread({}, currentKeyObj), {}, {\n          status: STATUS_KEEP\n        }));\n        currentIndex += 1;\n        hit = true;\n        break;\n      }\n    } // If not hit, it means key is removed\n\n\n    if (!hit) {\n      list.push(_objectSpread(_objectSpread({}, keyObj), {}, {\n        status: STATUS_REMOVE\n      }));\n    }\n  }); // Add rest to the list\n\n  if (currentIndex < currentLen) {\n    list = list.concat(currentKeyObjects.slice(currentIndex).map(function (obj) {\n      return _objectSpread(_objectSpread({}, obj), {}, {\n        status: STATUS_ADD\n      });\n    }));\n  }\n  /**\n   * Merge same key when it remove and add again:\n   *    [1 - add, 2 - keep, 1 - remove] -> [1 - keep, 2 - keep]\n   */\n\n\n  var keys = {};\n  list.forEach(function (_ref) {\n    var key = _ref.key;\n    keys[key] = (keys[key] || 0) + 1;\n  });\n  var duplicatedKeys = Object.keys(keys).filter(function (key) {\n    return keys[key] > 1;\n  });\n  duplicatedKeys.forEach(function (matchKey) {\n    // Remove `STATUS_REMOVE` node.\n    list = list.filter(function (_ref2) {\n      var key = _ref2.key,\n          status = _ref2.status;\n      return key !== matchKey || status !== STATUS_REMOVE;\n    }); // Update `STATUS_ADD` to `STATUS_KEEP`\n\n    list.forEach(function (node) {\n      if (node.key === matchKey) {\n        // eslint-disable-next-line no-param-reassign\n        node.status = STATUS_KEEP;\n      }\n    });\n  });\n  return list;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"component\", \"children\", \"onVisibleChanged\", \"onAllRemoved\"],\n    _excluded2 = [\"status\"];\n\n/* eslint react/prop-types: 0 */\nimport * as React from 'react';\nimport OriginCSSMotion from \"./CSSMotion\";\nimport { supportTransition } from \"./util/motion\";\nimport { STATUS_ADD, STATUS_KEEP, STATUS_REMOVE, STATUS_REMOVED, diffKeys, parseKeys } from \"./util/diff\";\nvar MOTION_PROP_NAMES = ['eventProps', 'visible', 'children', 'motionName', 'motionAppear', 'motionEnter', 'motionLeave', 'motionLeaveImmediately', 'motionDeadline', 'removeOnLeave', 'leavedClassName', 'onAppearStart', 'onAppearActive', 'onAppearEnd', 'onEnterStart', 'onEnterActive', 'onEnterEnd', 'onLeaveStart', 'onLeaveActive', 'onLeaveEnd'];\n\n/**\n * Generate a CSSMotionList component with config\n * @param transitionSupport No need since CSSMotionList no longer depends on transition support\n * @param CSSMotion CSSMotion component\n */\nexport function genCSSMotionList(transitionSupport) {\n  var CSSMotion = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : OriginCSSMotion;\n\n  var CSSMotionList = /*#__PURE__*/function (_React$Component) {\n    _inherits(CSSMotionList, _React$Component);\n\n    var _super = _createSuper(CSSMotionList);\n\n    function CSSMotionList() {\n      var _this;\n\n      _classCallCheck(this, CSSMotionList);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _defineProperty(_assertThisInitialized(_this), \"state\", {\n        keyEntities: []\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"removeKey\", function (removeKey) {\n        var keyEntities = _this.state.keyEntities;\n        var nextKeyEntities = keyEntities.map(function (entity) {\n          if (entity.key !== removeKey) return entity;\n          return _objectSpread(_objectSpread({}, entity), {}, {\n            status: STATUS_REMOVED\n          });\n        });\n\n        _this.setState({\n          keyEntities: nextKeyEntities\n        });\n\n        return nextKeyEntities.filter(function (_ref) {\n          var status = _ref.status;\n          return status !== STATUS_REMOVED;\n        }).length;\n      });\n\n      return _this;\n    }\n\n    _createClass(CSSMotionList, [{\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        var keyEntities = this.state.keyEntities;\n\n        var _this$props = this.props,\n            component = _this$props.component,\n            children = _this$props.children,\n            _onVisibleChanged = _this$props.onVisibleChanged,\n            onAllRemoved = _this$props.onAllRemoved,\n            restProps = _objectWithoutProperties(_this$props, _excluded);\n\n        var Component = component || React.Fragment;\n        var motionProps = {};\n        MOTION_PROP_NAMES.forEach(function (prop) {\n          motionProps[prop] = restProps[prop];\n          delete restProps[prop];\n        });\n        delete restProps.keys;\n        return /*#__PURE__*/React.createElement(Component, restProps, keyEntities.map(function (_ref2) {\n          var status = _ref2.status,\n              eventProps = _objectWithoutProperties(_ref2, _excluded2);\n\n          var visible = status === STATUS_ADD || status === STATUS_KEEP;\n          return /*#__PURE__*/React.createElement(CSSMotion, _extends({}, motionProps, {\n            key: eventProps.key,\n            visible: visible,\n            eventProps: eventProps,\n            onVisibleChanged: function onVisibleChanged(changedVisible) {\n              _onVisibleChanged === null || _onVisibleChanged === void 0 ? void 0 : _onVisibleChanged(changedVisible, {\n                key: eventProps.key\n              });\n\n              if (!changedVisible) {\n                var restKeysCount = _this2.removeKey(eventProps.key);\n\n                if (restKeysCount === 0 && onAllRemoved) {\n                  onAllRemoved();\n                }\n              }\n            }\n          }), children);\n        }));\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(_ref3, _ref4) {\n        var keys = _ref3.keys;\n        var keyEntities = _ref4.keyEntities;\n        var parsedKeyObjects = parseKeys(keys);\n        var mixedKeyEntities = diffKeys(keyEntities, parsedKeyObjects);\n        return {\n          keyEntities: mixedKeyEntities.filter(function (entity) {\n            var prevEntity = keyEntities.find(function (_ref5) {\n              var key = _ref5.key;\n              return entity.key === key;\n            }); // Remove if already mark as removed\n\n            if (prevEntity && prevEntity.status === STATUS_REMOVED && entity.status === STATUS_REMOVE) {\n              return false;\n            }\n\n            return true;\n          })\n        };\n      } // ZombieJ: Return the count of rest keys. It's safe to refactor if need more info.\n\n    }]);\n\n    return CSSMotionList;\n  }(React.Component);\n\n  _defineProperty(CSSMotionList, \"defaultProps\", {\n    component: 'div'\n  });\n\n  return CSSMotionList;\n}\nexport default genCSSMotionList(supportTransition);"],"names":["makePrefixMap","styleProp","eventName","prefixes","getVendorPrefixes","domSupport","win","vendorPrefixes","canUseDOM","style","_document$createEleme","prefixedEventNames","getVendorPrefixedEventName","prefixMap","stylePropList","len","i","internalAnimationEndName","internalTransitionEndName","supportTransition","animationEndName","transitionEndName","getTransitionName","transitionName","transitionType","_typeof","type","match","STATUS_NONE","STATUS_APPEAR","STATUS_ENTER","STATUS_LEAVE","STEP_NONE","STEP_PREPARE","STEP_START","STEP_ACTIVE","STEP_ACTIVATED","useNextFrame","nextFrameRef","React.useRef","cancelNextFrame","raf","nextFrame","callback","delay","nextFrameId","React.useEffect","useIsomorphicLayoutEffect","canUseDom","useLayoutEffect","useEffect","STEP_QUEUE","SkipStep","DoStep","isActive","step","useStepQueue","status","_useState","useState","_useState2","_slicedToArray","setStep","_useNextFrame","_useNextFrame2","startQueue","index","nextStep","result","info","doNext","useDomMotionEvents","cacheElementRef","useRef","callbackRef","onInternalMotionEnd","React.useCallback","event","removeMotionEvents","element","patchMotionEvents","useStatus","supportMotion","visible","getElement","_ref","_ref$motionEnter","motionEnter","_ref$motionAppear","motionAppear","_ref$motionLeave","motionLeave","motionDeadline","motionLeaveImmediately","onAppearPrepare","onEnterPrepare","onLeavePrepare","onAppearStart","onEnterStart","onLeaveStart","onAppearActive","onEnterActive","onLeaveActive","onAppearEnd","onEnterEnd","onLeaveEnd","onVisibleChanged","asyncVisible","setAsyncVisible","_useState3","_useState4","setStatus","_useState5","_useState6","setStyle","mountedRef","deadlineRef","getDomElement","activeRef","currentActive","canEnd","_useDomMotionEvents","_useDomMotionEvents2","eventHandlers","React.useMemo","_ref2","_ref3","_ref4","_defineProperty","_useStepQueue","newStep","onPrepare","_eventHandlers$step","_useStepQueue2","startStep","active","isMounted","nextStatus","firstMountChangeRef","mergedStyle","_objectSpread","DomWrapper","_React$Component","_inherits","_super","_createSuper","_classCallCheck","_createClass","React.Component","genCSSMotion","config","transitionSupport","isSupportTransition","props","CSSMotion","React.forwardRef","ref","_props$visible","_props$removeOnLeave","removeOnLeave","forceRender","children","motionName","leavedClassName","eventProps","nodeRef","wrapperNodeRef","findDOMNode","_useStatus","_useStatus2","statusStep","statusStyle","mergedVisible","renderedRef","setNodeRef","node","fillRef","motionChildren","mergedProps","_classNames","statusSuffix","classNames","React.isValidElement","supportRef","originNodeRef","React.cloneElement","React.createElement","STATUS_ADD","STATUS_KEEP","STATUS_REMOVE","STATUS_REMOVED","wrapKeyToObject","key","keyObj","parseKeys","keys","diffKeys","prevKeys","currentKeys","list","currentIndex","currentLen","prevKeyObjects","currentKeyObjects","hit","currentKeyObj","obj","duplicatedKeys","matchKey","_excluded","_excluded2","MOTION_PROP_NAMES","genCSSMotionList","OriginCSSMotion","CSSMotionList","_this","_len","args","_key","_assertThisInitialized","removeKey","keyEntities","nextKeyEntities","entity","_this2","_this$props","component","_onVisibleChanged","onAllRemoved","restProps","_objectWithoutProperties","Component","React.Fragment","motionProps","prop","_extends","changedVisible","restKeysCount","parsedKeyObjects","mixedKeyEntities","prevEntity","_ref5"],"mappings":"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"}