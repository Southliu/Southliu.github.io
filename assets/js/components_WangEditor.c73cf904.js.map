{"version":3,"file":"components_WangEditor.c73cf904.js","sources":["../../../src/components/WangEditor/index.tsx"],"sourcesContent":["import '@wangeditor/editor/dist/css/style.css'\nimport type { IDomEditor, IEditorConfig, IToolbarConfig } from '@wangeditor/editor'\nimport { useState, useEffect } from 'react'\nimport { Editor, Toolbar } from '@wangeditor/editor-for-react'\nimport { FILE_API } from '@/utils/config'\n\nexport interface IEditorProps {\n  value: string; // 富文本内容\n  onChange: (value: string) => void; // 处理更改内容\n  height?: number; // 富文本高度\n  className?: string;\n}\n\nfunction WangEditor(props: IEditorProps) {\n  const { value, height, className, onChange } = props\n\n  // editor 实例\n  const [editor, setEditor] = useState<IDomEditor | null>(null)\n\n  // 编辑器内容\n  const [html, setHtml] = useState(value)\n\n  // 工具栏配置\n  const toolbarConfig: Partial<IToolbarConfig> = {}\n\n  // 编辑器配置\n  const editorConfig: Partial<IEditorConfig> = {\n    placeholder: '请输入内容...',\n    MENU_CONF: {\n      uploadImage: {\n        // 上传图片地址\n        server: FILE_API\n      },\n      uploadVideo: {\n        // 上传视频地址\n        server: FILE_API\n      }\n    }\n  }\n\n  // 监听值变化\n  useEffect(() => {\n    setHtml(value || '')\n  }, [value])\n\n  // 及时销毁 editor ，重要！\n  useEffect(() => {\n    return () => {\n      if (editor === null) return\n      editor.destroy()\n      setEditor(null)\n    }\n  }, [editor])\n\n  /**\n   * 更改富文本内容\n   */\n  const handleChange = (editor: IDomEditor) => {\n    setHtml(editor.getHtml())\n    onChange(editor.getHtml())\n  }\n\n  return (\n    <div\n      className={className}\n      style={{ border: '1px solid #ccc', zIndex: 100}}\n    >\n      <Toolbar\n        editor={editor}\n        defaultConfig={toolbarConfig}\n        mode=\"default\"\n        style={{ borderBottom: '1px solid #ccc' }}\n      />\n\n      <Editor\n        defaultConfig={editorConfig}\n        value={html}\n        onCreated={setEditor}\n        onChange={handleChange}\n        mode=\"default\"\n        style={{ height: height || 300, overflowY: 'hidden' }}\n      />\n    </div>\n  )\n}\n\nexport default WangEditor"],"names":["WangEditor","props","value","height","className","onChange","editor","setEditor","useState","html","setHtml","toolbarConfig","editorConfig","FILE_API","useEffect","jsxs","jsx","Toolbar","Editor"],"mappings":"wQAaA,SAASA,EAAWC,EAAqB,CACvC,KAAM,CAAE,MAAAC,EAAO,OAAAC,EAAQ,UAAAC,EAAW,SAAAC,GAAaJ,EAGzC,CAACK,EAAQC,CAAS,EAAIC,WAA4B,IAAI,EAGtD,CAACC,EAAMC,CAAO,EAAIF,WAASN,CAAK,EAGhCS,EAAyC,CAAA,EAGzCC,EAAuC,CAC3C,YAAa,WACb,UAAW,CACT,YAAa,CAEX,OAAQC,CACV,EACA,YAAa,CAEX,OAAQA,CACV,CACF,CAAA,EAIFC,OAAAA,EAAAA,UAAU,IAAM,CACdJ,EAAQR,GAAS,EAAE,CAAA,EAClB,CAACA,CAAK,CAAC,EAGVY,EAAAA,UAAU,IACD,IAAM,CACPR,IAAW,OACfA,EAAO,QAAQ,EACfC,EAAU,IAAI,EAAA,EAEf,CAACD,CAAM,CAAC,EAWTS,EAAC,MAAA,CACC,UAAAX,EACA,MAAO,CAAE,OAAQ,iBAAkB,OAAQ,GAAG,EAE9C,SAAA,CAAAY,EAACC,EAAA,CACC,OAAAX,EACA,cAAeK,EACf,KAAK,UACL,MAAO,CAAE,aAAc,gBAAiB,CAAA,CAC1C,EAEAK,EAACE,EAAA,CACC,cAAeN,EACf,MAAOH,EACP,UAAWF,EACX,SArBgBD,GAAuB,CACnCA,EAAAA,EAAO,SAAS,EACfA,EAAAA,EAAO,SAAS,CAAA,EAoBrB,KAAK,UACL,MAAO,CAAE,OAAQH,GAAU,IAAK,UAAW,QAAS,CAAA,CACtD,CAAA,CAAA,CAAA,CAGN"}