import{b as O,h as xe,g as ie,f as H,d as N,e as ze,c as _e}from"./@babel_runtime.fb9bdd97.js";import{r as t}from"./react.c6268275.js";import{c as G}from"./classnames.2e4736b8.js";import{f as he,K as q,d as Nt,C as Pt,h as et}from"./rc-util.1ef88af6.js";import{C as wt}from"./rc-motion.970f367f.js";import{R as tt}from"./rc-resize-observer.e8bf7b62.js";import{D as It}from"./rc-dropdown.a99b5994.js";import{E as Mt,M as Lt}from"./rc-menu.01d79292.js";const Te=t.createContext(null);var dt=t.forwardRef(function(e,a){var r=e.prefixCls,i=e.className,o=e.style,n=e.id,c=e.active,s=e.tabKey,l=e.children;return t.createElement("div",{id:n&&"".concat(n,"-panel-").concat(s),role:"tabpanel",tabIndex:c?0:-1,"aria-labelledby":n&&"".concat(n,"-tab-").concat(s),"aria-hidden":!c,style:o,className:G(r,c&&"".concat(r,"-active"),i),ref:a},l)}),At=["key","forceRender","style","className"];function Bt(e){var a=e.id,r=e.activeKey,i=e.animated,o=e.tabPosition,n=e.destroyInactiveTabPane,c=t.useContext(Te),s=c.prefixCls,l=c.tabs,S=i.tabPane,g="".concat(s,"-tabpane");return t.createElement("div",{className:G("".concat(s,"-content-holder"))},t.createElement("div",{className:G("".concat(s,"-content"),"".concat(s,"-content-").concat(o),O({},"".concat(s,"-content-animated"),S))},l.map(function(u){var y=u.key,P=u.forceRender,k=u.style,I=u.className,L=xe(u,At),w=y===r;return t.createElement(wt,ie({key:y,visible:w,forceRender:P,removeOnLeave:!!n,leavedClassName:"".concat(g,"-hidden")},i.tabPaneMotion),function(M,A){var V=M.style,D=M.className;return t.createElement(dt,ie({},L,{prefixCls:g,id:a,tabKey:y,animated:S,active:w,style:H(H({},k),V),className:G(I,D),ref:A}))})})))}var at={width:0,height:0,left:0,top:0};function Dt(e,a,r){return t.useMemo(function(){for(var i,o=new Map,n=a.get((i=e[0])===null||i===void 0?void 0:i.key)||at,c=n.left+n.width,s=0;s<e.length;s+=1){var l=e[s].key,S=a.get(l);if(!S){var g;S=a.get((g=e[s-1])===null||g===void 0?void 0:g.key)||at}var u=o.get(l)||H({},S);u.right=c-u.left-u.width,o.set(l,u)}return o},[e.map(function(i){return i.key}).join("_"),a,r])}function ft(e){var a=t.useRef(),r=t.useRef(!1);function i(){for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];r.current||(he.cancel(a.current),a.current=he(function(){e.apply(void 0,n)}))}return t.useEffect(function(){return r.current=!1,function(){r.current=!0,he.cancel(a.current)}},[]),i}function Kt(e){var a=t.useRef([]),r=t.useState({}),i=N(r,2),o=i[1],n=t.useRef(typeof e=="function"?e():e),c=ft(function(){var l=n.current;a.current.forEach(function(S){l=S(l)}),a.current=[],n.current=l,o({})});function s(l){a.current.push(l),c()}return[n.current,s]}function nt(e,a){var r=t.useRef(e),i=t.useState({}),o=N(i,2),n=o[1];function c(s){var l=typeof s=="function"?s(r.current):s;l!==r.current&&a(l,r.current),r.current=l,n({})}return[r.current,c]}var zt=.1,rt=.01,Ee=20,ot=Math.pow(.995,Ee);function $t(e,a){var r=t.useState(),i=N(r,2),o=i[0],n=i[1],c=t.useState(0),s=N(c,2),l=s[0],S=s[1],g=t.useState(0),u=N(g,2),y=u[0],P=u[1],k=t.useState(),I=N(k,2),L=I[0],w=I[1],M=t.useRef();function A(h){var E=h.touches[0],d=E.screenX,x=E.screenY;n({x:d,y:x}),window.clearInterval(M.current)}function V(h){if(o){h.preventDefault();var E=h.touches[0],d=E.screenX,x=E.screenY;n({x:d,y:x});var v=d-o.x,p=x-o.y;a(v,p);var j=Date.now();S(j),P(j-l),w({x:v,y:p})}}function D(){if(o&&(n(null),w(null),L)){var h=L.x/y,E=L.y/y,d=Math.abs(h),x=Math.abs(E);if(Math.max(d,x)<zt)return;var v=h,p=E;M.current=window.setInterval(function(){if(Math.abs(v)<rt&&Math.abs(p)<rt){window.clearInterval(M.current);return}v*=ot,p*=ot,a(v*Ee,p*Ee)},Ee)}}var R=t.useRef();function C(h){var E=h.deltaX,d=h.deltaY,x=0,v=Math.abs(E),p=Math.abs(d);v===p?x=R.current==="x"?E:d:v>p?(x=E,R.current="x"):(x=d,R.current="y"),a(-x,-x)&&h.preventDefault()}var z=t.useRef(null);z.current={onTouchStart:A,onTouchMove:V,onTouchEnd:D,onWheel:C},t.useEffect(function(){function h(v){z.current.onTouchStart(v)}function E(v){z.current.onTouchMove(v)}function d(v){z.current.onTouchEnd(v)}function x(v){z.current.onWheel(v)}return document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",d,{passive:!1}),e.current.addEventListener("touchstart",h,{passive:!1}),e.current.addEventListener("wheel",x),function(){document.removeEventListener("touchmove",E),document.removeEventListener("touchend",d)}},[])}var it={width:0,height:0,left:0,top:0,right:0};function Wt(e,a,r,i,o,n,c){var s=c.tabs,l=c.tabPosition,S=c.rtl,g,u,y;return["top","bottom"].includes(l)?(g="width",u=S?"right":"left",y=Math.abs(r)):(g="height",u="top",y=-r),t.useMemo(function(){if(!s.length)return[0,0];for(var P=s.length,k=P,I=0;I<P;I+=1){var L=e.get(s[I].key)||it;if(L[u]+L[g]>y+a){k=I-1;break}}for(var w=0,M=P-1;M>=0;M-=1){var A=e.get(s[M].key)||it;if(A[u]<y){w=M+1;break}}return[w,k]},[e,a,i,o,n,y,l,s.map(function(P){return P.key}).join("_"),S])}function ct(e){var a;return e instanceof Map?(a={},e.forEach(function(r,i){a[i]=r})):a=e,JSON.stringify(a)}function Ot(e,a){var r=e.prefixCls,i=e.editable,o=e.locale,n=e.style;return!i||i.showAdd===!1?null:t.createElement("button",{ref:a,type:"button",className:"".concat(r,"-nav-add"),style:n,"aria-label":(o==null?void 0:o.addAriaLabel)||"Add tab",onClick:function(s){i.onEdit("add",{event:s})}},i.addIcon||"+")}const vt=t.forwardRef(Ot);var st=t.forwardRef(function(e,a){var r=e.position,i=e.prefixCls,o=e.extra;if(!o)return null;var n,c={};return ze(o)==="object"&&!t.isValidElement(o)?c=o:c.right=o,r==="right"&&(n=c.right),r==="left"&&(n=c.left),n?t.createElement("div",{className:"".concat(i,"-extra-content"),ref:a},n):null});function Vt(e,a){var r=e.prefixCls,i=e.id,o=e.tabs,n=e.locale,c=e.mobile,s=e.moreIcon,l=s===void 0?"More":s,S=e.moreTransitionName,g=e.style,u=e.className,y=e.editable,P=e.tabBarGutter,k=e.rtl,I=e.removeAriaLabel,L=e.onTabClick,w=e.getPopupContainer,M=e.popupClassName,A=t.useState(!1),V=N(A,2),D=V[0],R=V[1],C=t.useState(null),z=N(C,2),h=z[0],E=z[1],d="".concat(i,"-more-popup"),x="".concat(r,"-dropdown"),v=h!==null?"".concat(d,"-").concat(h):null,p=n==null?void 0:n.dropdownAriaLabel;function j(f,B){f.preventDefault(),f.stopPropagation(),y.onEdit("remove",{key:B,event:f})}var le=t.createElement(Mt,{onClick:function(B){var X=B.key,W=B.domEvent;L(X,W),R(!1)},prefixCls:"".concat(x,"-menu"),id:d,tabIndex:-1,role:"listbox","aria-activedescendant":v,selectedKeys:[h],"aria-label":p!==void 0?p:"expanded dropdown"},o.map(function(f){var B=y&&f.closable!==!1&&!f.disabled;return t.createElement(Lt,{key:f.key,id:"".concat(d,"-").concat(f.key),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(f.key),disabled:f.disabled},t.createElement("span",null,f.label),B&&t.createElement("button",{type:"button","aria-label":I||"remove",tabIndex:0,className:"".concat(x,"-menu-item-remove"),onClick:function(W){W.stopPropagation(),j(W,f.key)}},f.closeIcon||y.removeIcon||"×"))}));function _(f){for(var B=o.filter(function(re){return!re.disabled}),X=B.findIndex(function(re){return re.key===h})||0,W=B.length,ee=0;ee<W;ee+=1){X=(X+f+W)%W;var ce=B[X];if(!ce.disabled){E(ce.key);return}}}function F(f){var B=f.which;if(!D){[q.DOWN,q.SPACE,q.ENTER].includes(B)&&(R(!0),f.preventDefault());return}switch(B){case q.UP:_(-1),f.preventDefault();break;case q.DOWN:_(1),f.preventDefault();break;case q.ESC:R(!1);break;case q.SPACE:case q.ENTER:h!==null&&L(h,f);break}}t.useEffect(function(){var f=document.getElementById(v);f&&f.scrollIntoView&&f.scrollIntoView(!1)},[h]),t.useEffect(function(){D||E(null)},[D]);var J=O({},k?"marginRight":"marginLeft",P);o.length||(J.visibility="hidden",J.order=1);var ue=G(O({},"".concat(x,"-rtl"),k)),ne=c?null:t.createElement(It,{prefixCls:x,overlay:le,trigger:["hover"],visible:o.length?D:!1,transitionName:S,onVisibleChange:R,overlayClassName:G(ue,M),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:w},t.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:J,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":d,id:"".concat(i,"-more"),"aria-expanded":D,onKeyDown:F},l));return t.createElement("div",{className:G("".concat(r,"-nav-operations"),u),style:g,ref:a},ne,t.createElement(vt,{prefixCls:r,locale:n,editable:y}))}const Ft=t.memo(t.forwardRef(Vt),function(e,a){return a.tabMoving});function Ut(e){var a,r=e.prefixCls,i=e.id,o=e.active,n=e.tab,c=n.key,s=n.label,l=n.disabled,S=n.closeIcon,g=e.closable,u=e.renderWrapper,y=e.removeAriaLabel,P=e.editable,k=e.onClick,I=e.onFocus,L=e.style,w="".concat(r,"-tab"),M=P&&g!==!1&&!l;function A(R){l||k(R)}function V(R){R.preventDefault(),R.stopPropagation(),P.onEdit("remove",{key:c,event:R})}var D=t.createElement("div",{key:c,"data-node-key":c,className:G(w,(a={},O(a,"".concat(w,"-with-remove"),M),O(a,"".concat(w,"-active"),o),O(a,"".concat(w,"-disabled"),l),a)),style:L,onClick:A},t.createElement("div",{role:"tab","aria-selected":o,id:i&&"".concat(i,"-tab-").concat(c),className:"".concat(w,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(c),"aria-disabled":l,tabIndex:l?null:0,onClick:function(C){C.stopPropagation(),A(C)},onKeyDown:function(C){[q.SPACE,q.ENTER].includes(C.which)&&(C.preventDefault(),A(C))},onFocus:I},s),M&&t.createElement("button",{type:"button","aria-label":y||"remove",tabIndex:0,className:"".concat(w,"-remove"),onClick:function(C){C.stopPropagation(),V(C)}},S||P.removeIcon||"×"));return u?u(D):D}var se=function(a){var r=a.current||{},i=r.offsetWidth,o=i===void 0?0:i,n=r.offsetHeight,c=n===void 0?0:n;return[o,c]},Ce=function(a,r){return a[r?0:1]};function Ht(e,a){var r,i=t.useContext(Te),o=i.prefixCls,n=i.tabs,c=e.className,s=e.style,l=e.id,S=e.animated,g=e.activeKey,u=e.rtl,y=e.extra,P=e.editable,k=e.locale,I=e.tabPosition,L=e.tabBarGutter,w=e.children,M=e.onTabClick,A=e.onTabScroll,V=t.useRef(),D=t.useRef(),R=t.useRef(),C=t.useRef(),z=t.useRef(),h=t.useRef(),E=t.useRef(),d=I==="top"||I==="bottom",x=nt(0,function(b,$){d&&A&&A({direction:b>$?"left":"right"})}),v=N(x,2),p=v[0],j=v[1],le=nt(0,function(b,$){!d&&A&&A({direction:b>$?"top":"bottom"})}),_=N(le,2),F=_[0],J=_[1],ue=t.useState([0,0]),ne=N(ue,2),f=ne[0],B=ne[1],X=t.useState([0,0]),W=N(X,2),ee=W[0],ce=W[1],re=t.useState([0,0]),de=N(re,2),ke=de[0],Re=de[1],Ne=t.useState([0,0]),fe=N(Ne,2),Pe=fe[0],we=fe[1],T=Kt(new Map),te=N(T,2),ve=te[0],mt=te[1],ye=Dt(n,ve,ee[0]),oe=Ce(f,d),Q=Ce(ee,d),Ie=Ce(ke,d),$e=Ce(Pe,d),bt=oe<Q+Ie,Y=bt?oe-$e:oe-Ie,pt="".concat(o,"-nav-operations-hidden"),me=0,be=0;d&&u?(me=0,be=Math.max(0,Q-Y)):(me=Math.min(0,Y-Q),be=0);function Me(b){return b<me?me:b>be?be:b}var We=t.useRef(),ht=t.useState(),Oe=N(ht,2),Se=Oe[0],Ve=Oe[1];function Le(){Ve(Date.now())}function Ae(){window.clearTimeout(We.current)}$t(C,function(b,$){function m(K,U){K(function(Z){var Rt=Me(Z+U);return Rt})}return oe>=Q?!1:(d?m(j,b):m(J,$),Ae(),Le(),!0)}),t.useEffect(function(){return Ae(),Se&&(We.current=window.setTimeout(function(){Ve(0)},100)),Ae},[Se]);var yt=Wt(ye,Y,d?p:F,Q,Ie,$e,H(H({},e),{},{tabs:n})),Fe=N(yt,2),St=Fe[0],gt=Fe[1],Ue=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g,m=ye.get($)||{width:0,height:0,left:0,right:0,top:0};if(d){var K=p;u?m.right<p?K=m.right:m.right+m.width>p+Y&&(K=m.right+m.width-Y):m.left<-p?K=-m.left:m.left+m.width>-p+Y&&(K=-(m.left+m.width-Y)),J(0),j(Me(K))}else{var U=F;m.top<-F?U=-m.top:m.top+m.height>-F+Y&&(U=-(m.top+m.height-Y)),j(0),J(Me(U))}},ge={};I==="top"||I==="bottom"?ge[u?"marginRight":"marginLeft"]=L:ge.marginTop=L;var He=n.map(function(b,$){var m=b.key;return t.createElement(Ut,{id:l,prefixCls:o,key:m,tab:b,style:$===0?void 0:ge,closable:b.closable,editable:P,active:m===g,renderWrapper:w,removeAriaLabel:k==null?void 0:k.removeAriaLabel,onClick:function(U){M(m,U)},onFocus:function(){Ue(m),Le(),C.current&&(u||(C.current.scrollLeft=0),C.current.scrollTop=0)}})}),Ge=function(){return mt(function(){var $=new Map;return n.forEach(function(m){var K,U=m.key,Z=(K=z.current)===null||K===void 0?void 0:K.querySelector('[data-node-key="'.concat(U,'"]'));Z&&$.set(U,{width:Z.offsetWidth,height:Z.offsetHeight,left:Z.offsetLeft,top:Z.offsetTop})}),$})};t.useEffect(function(){Ge()},[n.map(function(b){return b.key}).join("_")]);var Be=ft(function(){var b=se(V),$=se(D),m=se(R);B([b[0]-$[0]-m[0],b[1]-$[1]-m[1]]);var K=se(E);Re(K);var U=se(h);we(U);var Z=se(z);ce([Z[0]-K[0],Z[1]-K[1]]),Ge()}),Ct=n.slice(0,St),Et=n.slice(gt+1),je=[].concat(_e(Ct),_e(Et)),xt=t.useState(),Xe=N(xt,2),Tt=Xe[0],kt=Xe[1],ae=ye.get(g),Ye=t.useRef();function Ze(){he.cancel(Ye.current)}t.useEffect(function(){var b={};return ae&&(d?(u?b.right=ae.right:b.left=ae.left,b.width=ae.width):(b.top=ae.top,b.height=ae.height)),Ze(),Ye.current=he(function(){kt(b)}),Ze},[ae,d,u]),t.useEffect(function(){Ue()},[g,ct(ae),ct(ye),d]),t.useEffect(function(){Be()},[u]);var qe=!!je.length,pe="".concat(o,"-nav-wrap"),De,Ke,Je,Qe;return d?u?(Ke=p>0,De=p+oe<Q):(De=p<0,Ke=-p+oe<Q):(Je=F<0,Qe=-F+oe<Q),t.createElement(tt,{onResize:Be},t.createElement("div",{ref:Nt(a,V),role:"tablist",className:G("".concat(o,"-nav"),c),style:s,onKeyDown:function(){Le()}},t.createElement(st,{ref:D,position:"left",extra:y,prefixCls:o}),t.createElement("div",{className:G(pe,(r={},O(r,"".concat(pe,"-ping-left"),De),O(r,"".concat(pe,"-ping-right"),Ke),O(r,"".concat(pe,"-ping-top"),Je),O(r,"".concat(pe,"-ping-bottom"),Qe),r)),ref:C},t.createElement(tt,{onResize:Be},t.createElement("div",{ref:z,className:"".concat(o,"-nav-list"),style:{transform:"translate(".concat(p,"px, ").concat(F,"px)"),transition:Se?"none":void 0}},He,t.createElement(vt,{ref:E,prefixCls:o,locale:k,editable:P,style:H(H({},He.length===0?void 0:ge),{},{visibility:qe?"hidden":null})}),t.createElement("div",{className:G("".concat(o,"-ink-bar"),O({},"".concat(o,"-ink-bar-animated"),S.inkBar)),style:Tt})))),t.createElement(Ft,ie({},e,{removeAriaLabel:k==null?void 0:k.removeAriaLabel,ref:h,prefixCls:o,tabs:je,className:!qe&&pt,tabMoving:!!Se})),t.createElement(st,{ref:R,position:"right",extra:y,prefixCls:o})))}const lt=t.forwardRef(Ht);var Gt=["renderTabBar"],jt=["label","key"];function Xt(e){var a=e.renderTabBar,r=xe(e,Gt),i=t.useContext(Te),o=i.tabs;if(a){var n=H(H({},r),{},{panes:o.map(function(c){var s=c.label,l=c.key,S=xe(c,jt);return t.createElement(dt,ie({tab:s,key:l,tabKey:l},S))})});return a(n,lt)}return t.createElement(lt,r)}function Yt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},a;return e===!1?a={inkBar:!1,tabPane:!1}:e===!0?a={inkBar:!0,tabPane:!1}:a=H({inkBar:!0},ze(e)==="object"?e:{}),a.tabPaneMotion&&a.tabPane===void 0&&(a.tabPane=!0),!a.tabPaneMotion&&a.tabPane&&(a.tabPane=!1),a}var Zt=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName"],ut=0;function qt(e,a){var r,i=e.id,o=e.prefixCls,n=o===void 0?"rc-tabs":o,c=e.className,s=e.items,l=e.direction,S=e.activeKey,g=e.defaultActiveKey,u=e.editable,y=e.animated,P=e.tabPosition,k=P===void 0?"top":P,I=e.tabBarGutter,L=e.tabBarStyle,w=e.tabBarExtraContent,M=e.locale,A=e.moreIcon,V=e.moreTransitionName,D=e.destroyInactiveTabPane,R=e.renderTabBar,C=e.onChange,z=e.onTabClick,h=e.onTabScroll,E=e.getPopupContainer,d=e.popupClassName,x=xe(e,Zt),v=t.useMemo(function(){return(s||[]).filter(function(T){return T&&ze(T)==="object"&&"key"in T})},[s]),p=l==="rtl",j=Yt(y),le=t.useState(!1),_=N(le,2),F=_[0],J=_[1];t.useEffect(function(){J(Pt())},[]);var ue=et(function(){var T;return(T=v[0])===null||T===void 0?void 0:T.key},{value:S,defaultValue:g}),ne=N(ue,2),f=ne[0],B=ne[1],X=t.useState(function(){return v.findIndex(function(T){return T.key===f})}),W=N(X,2),ee=W[0],ce=W[1];t.useEffect(function(){var T=v.findIndex(function(ve){return ve.key===f});if(T===-1){var te;T=Math.max(0,Math.min(ee,v.length-1)),B((te=v[T])===null||te===void 0?void 0:te.key)}ce(T)},[v.map(function(T){return T.key}).join("_"),f,ee]);var re=et(null,{value:i}),de=N(re,2),ke=de[0],Re=de[1];t.useEffect(function(){i||(Re("rc-tabs-".concat(ut)),ut+=1)},[]);function Ne(T,te){z==null||z(T,te);var ve=T!==f;B(T),ve&&(C==null||C(T))}var fe={id:ke,activeKey:f,animated:j,tabPosition:k,rtl:p,mobile:F},Pe,we=H(H({},fe),{},{editable:u,locale:M,moreIcon:A,moreTransitionName:V,tabBarGutter:I,onTabClick:Ne,onTabScroll:h,extra:w,style:L,panes:null,getPopupContainer:E,popupClassName:d});return t.createElement(Te.Provider,{value:{tabs:v,prefixCls:n}},t.createElement("div",ie({ref:a,id:i,className:G(n,"".concat(n,"-").concat(k),(r={},O(r,"".concat(n,"-mobile"),F),O(r,"".concat(n,"-editable"),u),O(r,"".concat(n,"-rtl"),p),r),c)},x),Pe,t.createElement(Xt,ie({},we,{renderTabBar:R})),t.createElement(Bt,ie({destroyInactiveTabPane:D},fe,{animated:j}))))}var oa=t.forwardRef(qt);export{oa as F};
