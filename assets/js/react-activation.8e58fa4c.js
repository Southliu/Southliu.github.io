import{v as St,t as Et}from"./@babel_runtime.e68bd868.js";import{r as Ot,a as Ct,b as Pt,c as jt,d as xt,e as _t,f as At,g as It,h as Nt,i as Bt,j as $t,k as Rt,l as Ut,m as Dt,n as Tt}from"./szfe-tools.167c5518.js";import{r as qt}from"./react.ab566f72.js";import{r as Lt}from"./create-react-context.764da92b.js";import{r as zt}from"./react-dom.16493159.js";import{a as Mt}from"./hoist-non-react-statics.2204367e.js";import{r as Ft}from"./react-node-key.5d28e406.js";var Re={exports:{}},ye={exports:{}};(function(Kt,Ue){(function(k,I){I(Ue,Ot(),Ct(),Pt(),jt(),qt,xt(),Lt(),_t(),At(),zt,It(),Nt(),Bt(),$t(),Rt(),Mt,Ut(),Dt(),Tt(),Ft())})(St,function(k,I,y,m,q,d,b,L,z,$,De,W,R,j,_,K,U,M,G,N,F){I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,y=y&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y,m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,q=q&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q;var f="default"in d?d.default:d;function ge(n,r){var e,t=Object.keys(n);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(n),r&&(e=e.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),t.push.apply(t,e)),t}function D(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ge(Object(e),!0).forEach(function(t){l(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ge(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function S(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function be(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,Ce(t.key),t)}}function E(n,r,e){r&&be(n.prototype,r),e&&be(n,e),Object.defineProperty(n,"prototype",{writable:!1})}function l(n,r,e){return(r=Ce(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function T(){return(T=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var e,t=arguments[r];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n}).apply(this,arguments)}function O(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&we(n,r)}function oe(n){return(oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)})(n)}function we(n,r){return(we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(n,r)}function B(n,r){if(n==null)return{};var e,t=function(o,a){if(o==null)return{};for(var i,s={},h=Object.keys(o),v=0;v<h.length;v++)i=h[v],0<=a.indexOf(i)||(s[i]=o[i]);return s}(n,r);if(Object.getOwnPropertySymbols)for(var c=Object.getOwnPropertySymbols(n),u=0;u<c.length;u++)e=c[u],0<=r.indexOf(e)||Object.prototype.propertyIsEnumerable.call(n,e)&&(t[e]=n[e]);return t}function p(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ae(n,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(n)}function C(n){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,t=oe(n);return ae(this,r?(e=oe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Y(n,r){return Se(n)||function(e,t){var c=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(c!=null){var u,o,a,i,s=[],h=!0,v=!1;try{if(a=(c=c.call(e)).next,t===0){if(Object(c)!==c)return;h=!1}else for(;!(h=(u=a.call(c)).done)&&(s.push(u.value),s.length!==t);h=!0);}catch(g){v=!0,o=g}finally{try{if(!h&&c.return!=null&&(i=c.return(),Object(i)!==i))return}finally{if(v)throw o}}return s}}(n,r)||ce(n,r)||Oe()}function ke(n){return Se(n)||Ee(n)||ce(n)||Oe()}function P(n){return function(r){if(Array.isArray(r))return ue(r)}(n)||Ee(n)||ce(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Se(n){if(Array.isArray(n))return n}function Ee(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ce(n,r){var e;if(n)return typeof n=="string"?ue(n,r):(e=(e=Object.prototype.toString.call(n).slice(8,-1))==="Object"&&n.constructor?n.constructor.name:e)==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ue(n,r):void 0}function ue(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Oe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(n){return n=function(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t===void 0)return(e==="string"?String:Number)(r);if(typeof(t=t.call(r,e||"default"))!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(n,"string"),typeof n=="symbol"?n:String(n)}b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,L=L&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L,z=z&&Object.prototype.hasOwnProperty.call(z,"default")?z.default:z,$=$&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$,W=W&&Object.prototype.hasOwnProperty.call(W,"default")?W.default:W,R=R&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R,j=j&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_,K=K&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K,U=U&&Object.prototype.hasOwnProperty.call(U,"default")?U.default:U,M=M&&Object.prototype.hasOwnProperty.call(M,"default")?M.default:M,G=G&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N,F=F&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F;function ie(){var n,r,e;return b(d.useContext)?d.useContext(J)||(r=(n=Y(d.useState(Q.currentContextValue),2))[0],e=n[1],d.useEffect(function(){var t=q(e);return H.on("update",t),function(){return H.off("update",t)}},[]),r):{}}function Te(e){var r=e.children,e=B(e,Ve);return f.createElement(qe,T({},e,{_nk:"".concat(ne,"11")}),f.createElement(Q,T({},e,{_nk:"".concat(ne,"21")}),r))}function Pe(n){var r=n.children;return f.createElement(Le,{_nk:"".concat(ne,"31")},function(e){return e?m(r,void 0,e):f.createElement(Fe,{_nk:"".concat(ne,"41")},r)})}var J=L(),qe=J.Provider,Le=J.Consumer,te=L(),ze=te.Provider,Me=te.Consumer,H=new z,Q=function(){O(r,d.Component);var n=C(r);function r(e){var t;return S(this,r),t=n.call(this,e),r.currentContextValue=e.value,t}return E(r,[{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value&&(r.currentContextValue=e.value,H.emit("update",e.value)),e.children!==this.props.children||e.value!==this.props.value}},{key:"render",value:function(){return this.props.children}}]),r}(),Fe=(l(Q,"eventBus",H),l(Q,"currentContextValue",void 0),function(){O(r,d.PureComponent);var n=C(r);function r(e){var t;return S(this,r),l(p(t=n.call(this,e)),"state",{context:Q.currentContextValue}),l(p(t),"updateListener",q(function(c){t.setState({context:c})})),H.on("update",t.updateListener),t}return E(r,[{key:"componentWillUnmount",value:function(){H.off("update",this.updateListener)}},{key:"render",value:function(){var e=this.props.children,t=this.state.context;return m(e,void 0,t)}}]),r}()),Ve=["children"],ne="qj9A",We=function(){O(r,d.Component);var n=C(r);function r(){var e;S(this,r);for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return l(p(e=n.call.apply(n,[this].concat(c))),"promiseCache",{}),e}return E(r,[{key:"render",value:function(){var t=this.props,e=t.freeze,t=t.children,c=this.promiseCache;if(e&&!c.promise)throw c.promise=new Promise(function(u){c.resolve=u}),c.promise;if(e)throw c.promise;return c.promise&&(c.resolve(),c.promise=void 0),f.createElement(d.Fragment,null,t)}}]),r}();function je(){try{for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];r.forEach(function(c){var c=ke(c),u=c[0];c.slice(1).forEach(function(o){var a;b(y(u,o))&&!y(u,[o,"_overridden"])&&(a=u[o].bind(u),u[o]=function(i){W(i)||Ge(i);for(var s=arguments.length,h=new Array(1<s?s-1:0),v=1;v<s;v++)h[v-1]=arguments[v];return a.apply(void 0,[i].concat(h))},u[o]._overridden=!0)})})}catch(t){console.warn("activation override failed:",t)}}function xe(n){return n=n.children,m(n)}var _e=[],se=new Map,Ke=new z,le=j(function(n){R(n)&&![J,te].includes(n)&&(R(n.Consumer)||(n.Consumer=function(e){var e=e.children,t=m(d.useContext,void 0,n);return f.createElement(d.Fragment,null,m(e,void 0,t))}),_e.push(n),setTimeout(function(){return Ke.emit("update")}))}),Ge=j(function(n){n=y(n,"_context")||y(n,"context"),y(n,"$$typeof")===y(J,"$$typeof")&&le(n)}),He=(je([f,"createElement"]),function(){O(r,d.PureComponent);var n=C(r);function r(u){S(this,r),l(p(t=n.call(this,u)),"unmount",null);var t,c,u=u.value;return u.length===0?(t.state={ctxValue:null},ae(t)):((u=Y(u,1)[0]).ctx,c=u.value,u=u.onUpdate,t.state={ctxValue:c},t.unmount=u(function(o){t.setState({ctxValue:o})}),t)}return E(r,[{key:"componentWillUnmount",value:function(){m(this.unmount)}},{key:"render",value:function(){var e,t,c=this.props,u=c.value,c=c.children,u=u.filter(Boolean);return u.length===0?c:(e=this.state.ctxValue,t=(u=ke(u))[0].ctx,u=u.slice(1),t=t.Provider,t=_(e)?c:f.createElement(t,{value:e,_nk:"".concat("lqEk","11")},c),0<u.length?f.createElement(r,{value:u,_nk:"".concat("lqEk","21")},t):t)}}]),r}()),Xe=function(){O(r,d.Component);var n=C(r);function r(o){S(this,r),l(p(t=n.call(this,o)),"updateListener",null),l(p(t),"ctxInfo",null);var t,c=o.value,u=o.ctx,o=o.id;return _(c)?ae(t):(t.updateListener=y(se.get(u),o,new Map),m(t.updateListener,"forEach",function(a){return a(c)}),t.ctxInfo={ctx:u,value:c,onUpdate:function(a){return t.updateListener.set(a,a),function(){return t.updateListener.delete(a)}}},t)}return E(r,[{key:"componentWillUnmount",value:function(){var c=this.props,e=c.value,t=c.ctx,c=c.id;_(e)||se.set(t,D(D({},y(se.get(t),void 0,{})),{},l({},c,this.updateListener)))}},{key:"shouldComponentUpdate",value:function(e){var t=e.value;return this.props.value!==t&&m(this.updateListener,"forEach",function(c){return c(t)}),!0}},{key:"render",value:function(){var e=this,t=this.props,c=t.value,u=t.renderWrapper,o=t.renderContent;return t.id,u(function(a){return o(_(c)?a:[].concat(P(a),[e.ctxInfo]))})}}]),r}(),pe={},Ye=function(){O(r,d.PureComponent);var n=C(r);function r(c){S(this,r),l(p(t=n.call(this,c)),"renderWrapper",function(u){var o=t.props.id;return pe[o].reduce(function(a,i){var s=i.Consumer;return function(h){return f.createElement(s,{_nk:"".concat("SsUr","11")},function(v){return f.createElement(Xe,{value:v,ctx:i,renderWrapper:a,renderContent:h,id:o,_nk:"".concat("SsUr","21")})})}},function(a){return a([])})(u)});var t,c=c.id;return pe[c]||(pe[c]=P(_e).filter(function(u){return R(u.Consumer)})),t}return E(r,[{key:"render",value:function(){var e=this.props.children;return this.renderWrapper(e)}}]),r}(),fe="46lG",j=b(d.lazy)&&!_(d.Suspense),Je=j?d.lazy(function(){return new Promise(function(){return null})}):function(){return null},Qe=function(){O(r,d.Component);var n=C(r);function r(){return S(this,r),n.apply(this,arguments)}return E(r,[{key:"componentDidMount",value:function(){m(this.props,"onStart")}},{key:"componentWillUnmount",value:function(){m(this.props,"onEnd")}},{key:"render",value:function(){return null}}]),r}(),Ze=j?function(){O(r,d.Component);var n=C(r);function r(){var e;S(this,r);for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return l(p(e=n.call.apply(n,[this].concat(c))),"state",{suspense:!1}),l(p(e),"onSuspenseStart",function(){e.setState({suspense:!0})}),l(p(e),"onSuspenseEnd",function(){e.setState({suspense:!1})}),l(p(e),"sus$$",{onSuspenseStart:e.onSuspenseStart,onSuspenseEnd:e.onSuspenseEnd}),e}return E(r,[{key:"render",value:function(){var e=this.props.children;return f.createElement(d.Fragment,null,m(e,void 0,this.sus$$),this.state.suspense&&f.createElement(Je,{_nk:"".concat(fe,"31")}))}}]),r}():xe,et=j?function(e){var r=e.children,e=e.sus$$;return f.createElement(d.Suspense,{fallback:f.createElement(Qe,{onStart:e.onSuspenseStart,onEnd:e.onSuspenseEnd,_nk:"".concat(fe,"21")}),_nk:"".concat(fe,"11")},r)}:xe,Ae=function(){O(r,d.Component);var n=C(r);function r(){return S(this,r),n.apply(this,arguments)}return E(r,[{key:"componentDidCatch",value:function(e){var t=this.props.error$$;m(t,void 0,e,function(){m(t,void 0,null)})}},{key:"render",value:function(){return this.props.children}}]),r}(),tt=(l(Ae,"getDerivedStateFromError",function(){return null}),function(){O(r,d.Component);var n=C(r);function r(){var e;S(this,r);for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return l(p(e=n.call.apply(n,[this].concat(c))),"state",{error:null}),l(p(e),"throwError",function(o,a){return e.setState({error:o},a)}),e}return E(r,[{key:"render",value:function(){if(this.state.error)throw this.state.error;return m(this.props.children,void 0,this.throwError)}}]),r}()),X="lajT";function nt(u){var r=u.id,e=u.children,u=u.bridgeProps,t=u.sus$$,c=u.ctx$$,u=u.error$$;return f.createElement(Ae,{error$$:u,_nk:"".concat(X,"11")},f.createElement(et,{sus$$:t,_nk:"".concat(X,"21")},f.createElement(He,{id:r,value:c,_nk:"".concat(X,"31")},e)))}function rt(n){var r=n.id,e=n.children;return f.createElement(tt,{_nk:"".concat(X,"41")},function(t){return f.createElement(Ze,{_nk:"".concat(X,"51")},function(c){return f.createElement(Ye,{id:r,_nk:"".concat(X,"61")},function(u){return m(e,void 0,{bridgeProps:{sus$$:c,ctx$$:u,error$$:t}})})})})}function Ie(n){var r=function(){O(t,d.Component);var e=C(t);function t(){var c;S(this,t);for(var u=arguments.length,o=new Array(u),a=0;a<u;a++)o[a]=arguments[a];return l(p(c=e.call.apply(e,[this].concat(o))),"drop",null),c}return E(t,[{key:"componentWillUnmount",value:function(){m(this.drop)}},{key:"render",value:function(){var c=this,u=this.props,o=u.forwardedRef,a=B(u,ot);return f.createElement(Me,{_nk:"".concat(de,"11")},function(){var i=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).attach;return f.createElement(n,T({ref:function(s){[A,w].every(function(h){return!b(y(s,h))})||(c.drop=m(i,void 0,s),_(o))||(K(o)&&"current"in o?o.current=s:m(o,void 0,s))}},a,{_nk:"".concat(de,"21")}))})}}]),t}();return b(n.prototype.componentDidMount)&&(n.prototype._componentDidMount=n.prototype.componentDidMount,n.prototype.componentDidMount=function(){var e=this;$(function(){return n.prototype._componentDidMount.call(e)})}),b(d.forwardRef)?U(d.forwardRef(function(e,t){return f.createElement(r,T({},e,{forwardedRef:t,_nk:"".concat(de,"31")}))}),n):U(r,n)}function Ne(n,r){var e,t;[d.useRef,d.useContext,d.useEffect].some(function(c){return!b(c)})||(t=d.useContext(te))&&(e=d.useRef({}).current,t=t.attach,e[n]=r,e.drop=t(e),d.useEffect(function(){return function(){return m(e.drop)}},[]))}var ot=["forwardedRef"],de="XKTv",A="componentDidActivate",w="componentWillUnactivate",j=Ne.bind(null,A),at=Ne.bind(null,w),ct=["id","autoFreeze"],re="bNyU",ut=d.Suspense?function(t){var r=t.freeze,e=t.children,t=t.placeholder;return f.createElement(d.Suspense,{fallback:t===void 0?null:t,_nk:"".concat("Leb+","11")},f.createElement(We,{freeze:r,_nk:"".concat("Leb+","21")},e))}:function(n){return n.children},it=function(){O(r,d.PureComponent);var n=C(r);function r(e){var t;S(this,r);for(var c=arguments.length,u=new Array(1<c?c-1:0),o=1;o<c;o++)u[o-1]=arguments[o];return l(p(t=n.call.apply(n,[this,e].concat(u))),"eventBus",new z),l(p(t),"listeners",new Map),l(p(t),"wrapper",null),l(p(t),"cache",void 0),l(p(t),"unmounted",!1),l(p(t),"safeSetState",function(a,i){t.unmounted||t.setState(a,i)}),l(p(t),"freezeTimeout",null),l(p(t),"attach",function(a){var i,s=t.listeners;return a?(a.isKeepAlive&&$(function(){var v=t.props,h=v.id,v=v.store.get(h);v.aliveNodesId=new Set([].concat(P(v.aliveNodesId),[a.id]))}),s.set(a,(l(i={},A,function(){return m(a,A)}),l(i,w,function(){return m(a,w)}),i)),function(){s.delete(a)}):function(){return null}}),l(p(t),"contextValue",{id:t.props.id,attach:t.attach}),l(p(t),"drop",function(){var a=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).delay,i=a===void 0?1200:a;return new Promise(function(s){function h(){clearTimeout(v),t.eventBus.off(w,h),t.cache.willDrop=!0,x.nodes.delete(kt),x.helpers=D({},x.helpers),x.smartForceUpdate(function(){return s(!0)})}var v,g=t.props,x=g.scope,kt=g.id;y(t.cache,"cached")||y(t.cache,"willDrop")?h():(t.eventBus.on(w,h),v=setTimeout(function(){t.eventBus.off(w,h),s(!1)},i))})}),l(p(t),"refresh",function(){return new Promise(function(a){y(t.cache,"cached")&&a(!1),t.safeSetState({key:Math.random()},function(){return a(!0)})})}),t.state={children:e.children,bridgeProps:e.bridgeProps,key:Math.random(),freeze:!1},t}return E(r,[{key:"componentDidMount",value:function(){var e,t=this,u=this.props,c=u.store,u=u.id,o=this.listeners,a=this.wrapper;if(!c.has(u)){try{e=P(a.children)}catch{e=[a.children]}this.cache=(l(o={listeners:o,aliveNodesId:[],inited:!1,cached:!1,wrapper:a,nodes:e},A,function(){return t[A]()}),l(o,w,function(){return t[w]()}),o),c.set(u,this.cache)}}},{key:"componentWillUnmount",value:function(){var c=this.props,e=c.store,t=c.keepers,c=c.id;try{var u=e.get(c);u.nodes.forEach(function(o){u.wrapper.appendChild(o)})}catch{}e.delete(c),t.delete(c),this.unmounted=!0}},{key:A,value:function(){clearTimeout(this.freezeTimeout),this.safeSetState({freeze:!1}),this.eventBus.emit(A),this.listeners.forEach(function(e){return m(e,[A])})}},{key:w,value:function(){var e=this;this.eventBus.emit(w),P(this.listeners).reverse().forEach(function(t){return t=Y(t,2)[1],m(t,[w])}),clearTimeout(this.freezeTimeout),this.freezeTimeout=setTimeout(function(){De.flushSync(function(){e.safeSetState({freeze:!0})})},1e3)}},{key:"render",value:function(){var e=this,i=this.props,t=i.id,c=i.autoFreeze,c=c===void 0||c,i=(B(i,ct),this.state),u=i.children,o=i.bridgeProps,a=i.key,i=i.freeze;return f.createElement(ut,{freeze:c&&i,_nk:"".concat(re,"11")},f.createElement("div",{ref:function(s){e.wrapper=s},_nk:"".concat(re,"21")},f.createElement("div",{key:"keeper-container",className:"ka-content"},f.createElement(nt,{id:t,bridgeProps:o,_nk:"".concat(re,"31")},f.createElement(ze,{value:this.contextValue,_nk:"".concat(re,"41")},f.Children.map(u,function(s,h){return f.cloneElement(s,{key:"".concat(s.key||"",":").concat(a,":").concat(h)})}))))))}}]),r}(),st=["children"],he="UVSV",Z="drop",me="refresh",lt=function(){O(r,d.Component);var n=C(r);function r(){var e;S(this,r);for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];return l(p(e=n.call.apply(n,[this].concat(c))),"store",new Map),l(p(e),"nodes",new Map),l(p(e),"keepers",new Map),l(p(e),"debouncedForceUpdate",q(function(o){return e.forceUpdate(o)})),l(p(e),"updateCallbackList",[]),l(p(e),"smartForceUpdate",function(o){e.updateCallbackList.push(o),e.debouncedForceUpdate(function(){e.updateCallbackList.forEach(function(a){return m(a)}),e.updateCallbackList=[]})}),l(p(e),"update",function(o,a){return new Promise(function(i){var s=e.keepers.get(o),h=!s,v=Date.now(),g=e.nodes.get(o)||null;e.nodes.set(o,D(D({id:o,createTime:v,updateTime:v},g),a)),h?(e.helpers=D({},e.helpers),e.forceUpdate(i)):(v=a.children,g=a.bridgeProps,s.setState({children:v,bridgeProps:g},i))})}),l(p(e),"keep",function(o,a){return new Promise(function(i){e.update(o,D({id:o},a)).then(function(){i(e.store.get(o))})})}),l(p(e),"getCachingNodesByName",function(o){return e.getCachingNodes().filter(function(a){return o instanceof RegExp?o.test(a.name):a.name===o})}),l(p(e),"getScopeIds",function(o){return I(o.map(function a(i){var s=y(e.getCache(i),"aliveNodesId",[]);return 0<s.size?[i,P(s).map(a)]:[i].concat(P(s))}))}),l(p(e),"dropById",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.handleNodes.apply(e,[[o],Z].concat(i))}),l(p(e),"dropScopeByIds",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.handleNodes.apply(e,[e.getScopeIds(o),Z].concat(i))}),l(p(e),"drop",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.handleNodes.apply(e,[e.getCachingNodesByName(o).map(function(h){return h.id}),Z].concat(i))}),l(p(e),"dropScope",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.dropScopeByIds.apply(e,[e.getCachingNodesByName(o).map(function(h){return h.id})].concat(i))}),l(p(e),"refreshById",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.handleNodes.apply(e,[[o],me].concat(i))}),l(p(e),"refreshScopeByIds",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.handleNodes.apply(e,[e.getScopeIds(o),me].concat(i))}),l(p(e),"refresh",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.handleNodes.apply(e,[e.getCachingNodesByName(o).map(function(h){return h.id}),me].concat(i))}),l(p(e),"refreshScope",function(o){for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return e.refreshScopeByIds.apply(e,[e.getCachingNodesByName(o).map(function(h){return h.id})].concat(i))}),l(p(e),"handleNodes",function(o){for(var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Z,i=arguments.length,s=new Array(2<i?i-2:0),h=2;h<i;h++)s[h-2]=arguments[h];return new Promise(function(v){var g=[];o.forEach(function(x){e.store.get(x)&&(x=e.keepers.get(x),g.push(x))}),g.length===0?v(!1):Promise.all(g.map(function(x){return m.apply(void 0,[x,a].concat(s))})).then(function(x){return v(x.every(Boolean))})})}),l(p(e),"clear",function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e.handleNodes.apply(e,[e.getCachingNodes().map(function(s){return s.id}),Z].concat(a))}),l(p(e),"getCache",function(o){return e.store.get(o)}),l(p(e),"getNode",function(o){return e.nodes.get(o)}),l(p(e),"getCachingNodes",function(){return P(e.nodes.values())}),l(p(e),"helpers",{keep:e.keep,update:e.update,drop:e.drop,dropScope:e.dropScope,dropById:e.dropById,dropScopeByIds:e.dropScopeByIds,refresh:e.refresh,refreshScope:e.refreshScope,refreshById:e.refreshById,refreshScopeByIds:e.refreshScopeByIds,getScopeIds:e.getScopeIds,clear:e.clear,getCache:e.getCache,getNode:e.getNode,getCachingNodes:e.getCachingNodes}),e}return E(r,[{key:"render",value:function(){var e=this,t=this.props.children,t=t===void 0?null:t;return f.createElement(Te,{value:this.helpers,_nk:"".concat(he,"11")},t,f.createElement("div",{style:{display:"none"},_nk:"".concat(he,"21")},P(this.nodes.values()).map(function(c){var u=c.children,o=B(c,st);return f.createElement(it,T({key:o.id},o,{scope:e,store:e.store,keepers:e.keepers,ref:function(a){e.keepers.set(o.id,a)},_nk:"iAr".concat(he,"31")}),u)})))}}]),r}(),pt=["id"],ft=["id"],dt=["forwardedRef"],ht=["forwardedRef"],V="X7Aa";function ve(n){return{drop:n.drop,dropScope:n.dropScope,refresh:n.refresh,refreshScope:n.refreshScope,clear:n.clear,getCachingNodes:n.getCachingNodes}}function mt(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return!!R(n)&&(n.scrollWidth>n.clientWidth||n.scrollHeight>n.clientHeight)}function vt(n){return b(y(N,"document.querySelectorAll"))?[].concat(P(M(m(n,"querySelectorAll","*"),[])),[n]).filter(mt):[]}var yt=["_helpers","id","children"],gt=["_helpers","id","name"],bt=y(N,"document.body"),wt=y(N,"document.scrollingElement",y(N,"document.documentElement",{})),ee=function(){O(r,d.Component);var n=C(r);function r(e){var t;return S(this,r),l(p(t=n.call(this,e)),"id",null),l(p(t),"isKeepAlive",!0),l(p(t),"cached",!1),l(p(t),"inject",function(){var c=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],a=t.props,u=a.id,o=a.saveScrollPosition,a=a._helpers.getCache(u);try{a.nodes.forEach(function(i){t.placeholder.appendChild(i)}),c&&o&&m(a.revertScrollPos)}catch{}}),l(p(t),"eject",function(){var c,u=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],i=t.props,o=i.id,a=i._helpers.getCache(o),i=I(I([t.props.saveScrollPosition]).map(function(s){return s===!0?a.nodes:s==="screen"?[wt,bt]:P(M(m(N,"document.querySelectorAll",s),[]))})).filter(Boolean);try{u&&0<i.length&&(a.revertScrollPos=(c=P(new Set(P(I(i.map(vt))))).map(function(s){return[s,{x:s.scrollLeft,y:s.scrollTop}]}),function(){c.forEach(function(g){var g=Y(g,2),h=g[0],g=g[1],v=g.x,g=g.y;h.scrollLeft=v,h.scrollTop=g})})),a.nodes.forEach(function(s){u?t.placeholder.removeChild(s):a.wrapper.appendChild(s)})}catch{}}),l(p(t),"init",function(){var a=t.props,c=a._helpers,u=a.id,o=a.children,a=B(a,yt);c.keep(u,D({children:o,getInstance:function(){return p(t)}},a)).then(function(i){i&&(t.inject(),i.inited?m(p(t),A):i.inited=!0,t.cached=!1)})}),l(p(t),"update",function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=a._helpers,u=a.id,o=a.name,a=B(a,gt);c&&!t.cached&&c.update(u,D({name:o,getInstance:function(){return p(t)}},a))}),t.id=e.id,t.init(),[A,w].forEach(function(c){t[c]=function(){var o=t.props,a=o.id,o=o._helpers,u=o.getCache(a),o=o.getNode(a),a=(o&&c===A&&(o.updateTime=Date.now()),c===w);!u||u.willDrop?t.cached&&!a&&t.init():(m(u,c),u.cached=a,t.cached=a)}}),t}return E(r,[{key:"shouldComponentUpdate",value:function(e){return this.update(e),!1}},{key:"componentWillUnmount",value:function(){var o=this.props,e=o.id,t=o._helpers,o=o.when,o=o===void 0||o,c=t.getCache(e);o=m(o);var o=Y(G(o)?o:[o],2),u=o[0],o=o[1];c&&(this.eject(),delete c.getInstance,u||(o?([c].concat(P(t.getScopeIds([e]).map(function(a){return t.getCache(a)}))).filter(Boolean).forEach(function(a){a.willDrop=!0}),$(function(){return t.dropScopeByIds([e])})):(c.willDrop=!0,$(function(){return t.dropById(e)}))),m(this,w))}},{key:"render",value:function(){var e=this;return f.createElement("div",{key:"keep-alive-placeholder",className:"ka-wrapper",ref:function(t){e.placeholder=t}})}}]),r}();l(ee,"defaultProps",{saveScrollPosition:!0});var Be,ee=b(y(N,"document.getElementById"))?(Be=Ie(ee),b(d.useContext)?function(e){var r=e.id,e=B(e,pt);return $e({idPrefix:r,helpers:ie(),props:e})}:function(n){var r=n.id,e=B(n,ft);return f.createElement(Pe,{_nk:"".concat(V,"41")},function(t){return $e({idPrefix:r,helpers:t,props:e})})}):function(n){return n=n.children,f.createElement("div",{key:"keep-alive-placeholder",className:"ka-wrapper"},f.createElement("div",{key:"keeper-container",className:"ka-content"},n))};function $e(n){var r=n.idPrefix,e=n.helpers,t=n.props;return(n=_(e))&&console.error("You should not use <KeepAlive /> outside a <AliveScope>"),n?y(t,"children",null):f.createElement(F,{prefix:r,key:t._nk,manualKey:t.cacheKey,_nk:"".concat(V,"11")},function(c){var u=t.cacheKey||c;return f.createElement(rt,{key:u,id:u,_nk:"".concat(V,"21")},function(o){return f.createElement(Be,T({key:u},t,o,{id:u,_helpers:e,_nk:"".concat(V,"31")}))})})}k.AliveScope=lt,k.KeepAlive=ee,k.NodeKey=F,k.autoFixContext=je,k.createContext=function(n,r){return n=L(n,r),le(n),n},k.default=ee,k.fixContext=le,k.useActivate=j,k.useAliveController=function(){var n;return b(d.useContext)&&(n=ie())?ve(n):{}},k.useUnactivate=at,k.withActivation=Ie,k.withAliveScope=function(n){function r(o){var c=o.helpers,u=o.props,o=o.forwardedRef;return f.createElement(n,T({},u,c,{ref:o,_nk:"".concat(V,"51")}))}var e=b(d.useContext)?function(u){var c=u.forwardedRef,u=B(u,dt);return r({helpers:ve(ie()||{}),props:u,forwardedRef:c})}:function(t){var c=t.forwardedRef,u=B(t,ht);return f.createElement(Pe,{_nk:"".concat(V,"42")},function(){return r({helpers:ve(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}),props:u,forwardedRef:c})})};return b(d.forwardRef)?U(d.forwardRef(function(t,c){return f.createElement(e,T({},t,{forwardedRef:c,_nk:"".concat(V,"61")}))}),n):U(e,n)},Object.defineProperty(k,"__esModule",{value:!0})})})(ye,ye.exports);var Vt=ye.exports;Re.exports=Vt;var Wt=Re.exports;const en=Et(Wt);export{en as K,Wt as r};
