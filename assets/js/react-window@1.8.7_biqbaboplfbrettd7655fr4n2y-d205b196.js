import{r as J,k as W,f as Q}from"./@babel_runtime@7.19.0-130d17ca.js";import{m as F}from"./memoize-one@5.2.1-b0f16465.js";import{r as M}from"./react@18.2.0-44b760b7.js";var X=typeof performance=="object"&&typeof performance.now=="function",N=X?function(){return performance.now()}:function(){return Date.now()};function U(n){cancelAnimationFrame(n.id)}function Y(n,e){var a=N();function c(){N()-a>=e?n.call(null):u.id=requestAnimationFrame(c)}var u={id:requestAnimationFrame(c)};return u}var T=null;function A(n){if(n===void 0&&(n=!1),T===null||n){var e=document.createElement("div"),a=e.style;a.width="50px",a.height="50px",a.overflow="scroll",a.direction="rtl";var c=document.createElement("div"),u=c.style;return u.width="100px",u.height="100px",e.appendChild(c),document.body.appendChild(e),e.scrollLeft>0?T="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?T="negative":T="positive-ascending"),document.body.removeChild(e),T}return T}var Z=150,tt=function(e,a){return e};function et(n){var e,a=n.getItemOffset,c=n.getEstimatedTotalSize,u=n.getItemSize,C=n.getOffsetForIndexAndAlignment,_=n.getStartIndexForOffset,z=n.getStopIndexForStartIndex,I=n.initInstanceProps,y=n.shouldResetStyleCacheOnItemSizeChange,w=n.validateProps;return e=function(O){J(v,O);function v(m){var t;return t=O.call(this,m)||this,t._instanceProps=I(t.props,W(t)),t._outerRef=void 0,t._resetIsScrollingTimeoutId=null,t.state={instance:W(t),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof t.props.initialScrollOffset=="number"?t.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},t._callOnItemsRendered=void 0,t._callOnItemsRendered=F(function(r,i,o,s){return t.props.onItemsRendered({overscanStartIndex:r,overscanStopIndex:i,visibleStartIndex:o,visibleStopIndex:s})}),t._callOnScroll=void 0,t._callOnScroll=F(function(r,i,o){return t.props.onScroll({scrollDirection:r,scrollOffset:i,scrollUpdateWasRequested:o})}),t._getItemStyle=void 0,t._getItemStyle=function(r){var i=t.props,o=i.direction,s=i.itemSize,f=i.layout,l=t._getItemStyleCache(y&&s,y&&f,y&&o),d;if(l.hasOwnProperty(r))d=l[r];else{var h=a(t.props,r,t._instanceProps),g=u(t.props,r,t._instanceProps),S=o==="horizontal"||f==="horizontal",R=o==="rtl",b=S?h:0;l[r]=d={position:"absolute",left:R?void 0:b,right:R?b:void 0,top:S?0:h,height:S?"100%":g,width:S?g:"100%"}}return d},t._getItemStyleCache=void 0,t._getItemStyleCache=F(function(r,i,o){return{}}),t._onScrollHorizontal=function(r){var i=r.currentTarget,o=i.clientWidth,s=i.scrollLeft,f=i.scrollWidth;t.setState(function(l){if(l.scrollOffset===s)return null;var d=t.props.direction,h=s;if(d==="rtl")switch(A()){case"negative":h=-s;break;case"positive-descending":h=f-o-s;break}return h=Math.max(0,Math.min(h,f-o)),{isScrolling:!0,scrollDirection:l.scrollOffset<s?"forward":"backward",scrollOffset:h,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._onScrollVertical=function(r){var i=r.currentTarget,o=i.clientHeight,s=i.scrollHeight,f=i.scrollTop;t.setState(function(l){if(l.scrollOffset===f)return null;var d=Math.max(0,Math.min(f,s-o));return{isScrolling:!0,scrollDirection:l.scrollOffset<d?"forward":"backward",scrollOffset:d,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._outerRefSetter=function(r){var i=t.props.outerRef;t._outerRef=r,typeof i=="function"?i(r):i!=null&&typeof i=="object"&&i.hasOwnProperty("current")&&(i.current=r)},t._resetIsScrollingDebounced=function(){t._resetIsScrollingTimeoutId!==null&&U(t._resetIsScrollingTimeoutId),t._resetIsScrollingTimeoutId=Y(t._resetIsScrolling,Z)},t._resetIsScrolling=function(){t._resetIsScrollingTimeoutId=null,t.setState({isScrolling:!1},function(){t._getItemStyleCache(-1,null)})},t}v.getDerivedStateFromProps=function(t,r){return rt(t,r),w(t),null};var p=v.prototype;return p.scrollTo=function(t){t=Math.max(0,t),this.setState(function(r){return r.scrollOffset===t?null:{scrollDirection:r.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},p.scrollToItem=function(t,r){r===void 0&&(r="auto");var i=this.props.itemCount,o=this.state.scrollOffset;t=Math.max(0,Math.min(t,i-1)),this.scrollTo(C(this.props,t,r,o,this._instanceProps))},p.componentDidMount=function(){var t=this.props,r=t.direction,i=t.initialScrollOffset,o=t.layout;if(typeof i=="number"&&this._outerRef!=null){var s=this._outerRef;r==="horizontal"||o==="horizontal"?s.scrollLeft=i:s.scrollTop=i}this._callPropsCallbacks()},p.componentDidUpdate=function(){var t=this.props,r=t.direction,i=t.layout,o=this.state,s=o.scrollOffset,f=o.scrollUpdateWasRequested;if(f&&this._outerRef!=null){var l=this._outerRef;if(r==="horizontal"||i==="horizontal")if(r==="rtl")switch(A()){case"negative":l.scrollLeft=-s;break;case"positive-ascending":l.scrollLeft=s;break;default:var d=l.clientWidth,h=l.scrollWidth;l.scrollLeft=h-d-s;break}else l.scrollLeft=s;else l.scrollTop=s}this._callPropsCallbacks()},p.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&U(this._resetIsScrollingTimeoutId)},p.render=function(){var t=this.props,r=t.children,i=t.className,o=t.direction,s=t.height,f=t.innerRef,l=t.innerElementType,d=t.innerTagName,h=t.itemCount,g=t.itemData,S=t.itemKey,R=S===void 0?tt:S,b=t.layout,q=t.outerElementType,$=t.outerTagName,H=t.style,K=t.useIsScrolling,V=t.width,L=this.state.isScrolling,P=o==="horizontal"||b==="horizontal",j=P?this._onScrollHorizontal:this._onScrollVertical,k=this._getRangeToRender(),B=k[0],G=k[1],D=[];if(h>0)for(var x=B;x<=G;x++)D.push(M.exports.createElement(r,{data:g,key:R(x,g),index:x,isScrolling:K?L:void 0,style:this._getItemStyle(x)}));var E=c(this.props,this._instanceProps);return M.exports.createElement(q||$||"div",{className:i,onScroll:j,ref:this._outerRefSetter,style:Q({position:"relative",height:s,width:V,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},H)},M.exports.createElement(l||d||"div",{children:D,ref:f,style:{height:P?"100%":E,pointerEvents:L?"none":void 0,width:P?E:"100%"}}))},p._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var t=this.props.itemCount;if(t>0){var r=this._getRangeToRender(),i=r[0],o=r[1],s=r[2],f=r[3];this._callOnItemsRendered(i,o,s,f)}}if(typeof this.props.onScroll=="function"){var l=this.state,d=l.scrollDirection,h=l.scrollOffset,g=l.scrollUpdateWasRequested;this._callOnScroll(d,h,g)}},p._getRangeToRender=function(){var t=this.props,r=t.itemCount,i=t.overscanCount,o=this.state,s=o.isScrolling,f=o.scrollDirection,l=o.scrollOffset;if(r===0)return[0,0,0,0];var d=_(this.props,l,this._instanceProps),h=z(this.props,d,l,this._instanceProps),g=!s||f==="backward"?Math.max(1,i):1,S=!s||f==="forward"?Math.max(1,i):1;return[Math.max(0,d-g),Math.max(0,Math.min(r-1,h+S)),d,h]},v}(M.exports.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var rt=function(e,a){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,a.instance},st=et({getItemOffset:function(e,a){var c=e.itemSize;return a*c},getItemSize:function(e,a){var c=e.itemSize;return c},getEstimatedTotalSize:function(e){var a=e.itemCount,c=e.itemSize;return c*a},getOffsetForIndexAndAlignment:function(e,a,c,u){var C=e.direction,_=e.height,z=e.itemCount,I=e.itemSize,y=e.layout,w=e.width,O=C==="horizontal"||y==="horizontal",v=O?w:_,p=Math.max(0,z*I-v),m=Math.min(p,a*I),t=Math.max(0,a*I-v+I);switch(c==="smart"&&(u>=t-v&&u<=m+v?c="auto":c="center"),c){case"start":return m;case"end":return t;case"center":{var r=Math.round(t+(m-t)/2);return r<Math.ceil(v/2)?0:r>p+Math.floor(v/2)?p:r}case"auto":default:return u>=t&&u<=m?u:u<t?t:m}},getStartIndexForOffset:function(e,a){var c=e.itemCount,u=e.itemSize;return Math.max(0,Math.min(c-1,Math.floor(a/u)))},getStopIndexForStartIndex:function(e,a,c){var u=e.direction,C=e.height,_=e.itemCount,z=e.itemSize,I=e.layout,y=e.width,w=u==="horizontal"||I==="horizontal",O=a*z,v=w?y:C,p=Math.ceil((v+c-O)/z);return Math.max(0,Math.min(_-1,a+p-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});export{st as F};
