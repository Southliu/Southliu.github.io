import{j as e,r as t}from"./react@18.3.1.DI4wpprY.js";import{D as a,T as n,r as s,P as r}from"./index.C6SWaWgp.js";import{d as l}from"./dayjs@1.11.11.DMcHP8aX.js";import{h as o,i,e as u,j as c,k as p,m as d,I as m,n as f,o as h,p as v,q as j,r as g,u as x,v as b,U as P}from"./antd@5.20.2_react-dom@18.3.1_react@18.3.1.BCu_9QVu.js";import{u as y}from"./react-i18next@14.1.1_i18next@23.11.4_react-dom@18.3.1_react@18.3.1.DzCQEhUQ.js";import{W as S}from"./index.QntngDLT.js";function C(e,t=a){return l.isDayjs(e)?e.format(t):e}function w(e){return l.isDayjs(e)?e:l(e)}function D(e,t=a){if(e)return(null==e?void 0:e.length)>1&&l.isDayjs(null==e?void 0:e[0])&&l.isDayjs(null==e?void 0:e[1])?[e[0].format(t),e[1].format(t)]:e}function k(e){if(e)return(null==e?void 0:e.length)>1&&!l.isDayjs(null==e?void 0:e[0])&&l.isDayjs(null==e?void 0:e[1])?[l(e[0]),e[1]]:(null==e?void 0:e.length)>1&&l.isDayjs(null==e?void 0:e[0])&&!l.isDayjs(null==e?void 0:e[1])?[e[0],l(e[1])]:(null==e?void 0:e.length)>1&&!l.isDayjs(null==e?void 0:e[0])&&!l.isDayjs(null==e?void 0:e[1])?[l(e[0]),l(e[1])]:e}function R(e,t){var n;for(let s=0;s<e.length;s++)if(e[s].name===t)return(null==(n=e[s].componentProps)?void 0:n.format)||a;return a}function T(e,t){var a;for(const n in e){if(2===(null==(a=e[n])?void 0:a.length)&&l.isDayjs(e[n][0])&&l.isDayjs(e[n][1])){const a=R(t,n);e[n]=D(e[n],a)}if((null==e?void 0:e[n])&&l.isDayjs(e[n])){const a=R(t,n);e[n]=C(e[n],a)}}return e}const{RangePicker:N}=o;const{RangePicker:E}=i;function F(e){switch(e){case"Switch":case"Checkbox":case"CheckboxGroup":return"checked";case"Upload":return"fileList";default:return"value"}}function G(e,t,s){switch(t){case"Select":return{allowClear:!0,placeholder:e("public.inputPleaseSelect")};case"Input":return{allowClear:!0,placeholder:e("public.inputPleaseEnter"),onPressEnter:s};case"InputNumber":return{placeholder:e("public.inputPleaseEnter"),onPressEnter:s};case"Checkbox":case"CheckboxGroup":return{};case"DatePicker":return{placeholder:e("public.inputPleaseSelect"),format:a};case"RangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[a,a]};case"TimePicker":return{placeholder:e("public.inputPleaseSelect"),format:n};case"TimeRangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[n,n]};default:return{allowClear:!0,placeholder:e("public.inputPleaseEnter")}}}const I=e=>{const t=JSON.parse(JSON.stringify(e));return delete t.componentProps,t};function A(e){return s.get("/authority/common/games",{params:e})}function K(){return e.jsx("div",{className:"absolute left-50% top-50% -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx(u,{spinning:!0})})}function _(a){const{t:n}=y(),[s,r]=t.useState(!1),[l,o]=t.useState([]),i={...a};delete i.api,delete i.params,delete i.params2,delete i.params3,delete i.apiResultKey;const u=t.useCallback((async()=>{if(a.api)try{const{api:e,params:t,params2:n,params3:s,apiResultKey:l}=a;if(r(!0),e){const{code:a,data:r}=await e(t,n,s);if(200!==Number(a))return;const i=l?null==r?void 0:r[l]:r;o(i)}}finally{r(!1)}}),[a]);t.useEffect((()=>{a.value&&0===l.length&&u()}),[a.value]);return e.jsx(c,{allowClear:!0,maxTagCount:J,placeholder:n("public.inputPleaseSelect"),optionFilterProp:"label",...i,loading:s,options:l,notFoundContent:s&&e.jsx(K,{}),onDropdownVisibleChange:e=>{var t;e&&u(),null==(t=a.onDropdownVisibleChange)||t.call(a,e)}})}function V(a){const{t:n}=y(),[s,r]=t.useState(!1),[l,o]=t.useState([]),i={...a};delete i.api,delete i.params,delete i.params2,delete i.params3,delete i.apiResultKey;const u=t.useCallback((async()=>{if(a.api)try{const{api:e,params:t,params2:n,params3:s,apiResultKey:l}=a;if(r(!0),e){const{code:a,data:r}=await e(t,n,s);if(200!==Number(a))return;const i=l?null==r?void 0:r[l]:r;o(i)}}finally{r(!1)}}),[a]);t.useEffect((()=>{a.value&&0===(null==l?void 0:l.length)&&u()}),[a.value]);return e.jsx(p,{allowClear:!0,maxTagCount:J,placeholder:n("public.inputPleaseSelect"),...i,loading:s,treeData:l,notFoundContent:s&&e.jsx(K,{}),onDropdownVisibleChange:e=>{var t;e&&u(),null==(t=a.onDropdownVisibleChange)||t.call(a,e)}})}const J="responsive";function U(t){return e.jsx(e.Fragment,{children:e.jsx(V,{...t,multiple:!0,api:A,fieldNames:{label:"name",value:"id"}})})}function z(e){return s.get("/platform/partner",{params:e})}function L(t){return e.jsx(_,{...t,api:z,mode:"multiple",fieldNames:{label:"name",value:"id"}})}const O=new Map;function q(t,a,n){const{component:s,componentProps:r}=a;if("customize"===s){const{render:t}=a;if(!t)return e.jsx(e.Fragment,{});M("customize",t)}const l=O.get(s);return l?e.jsxs(e.Fragment,{children:[e.jsx(l,{...G(t,s,n),...r}),a.unit&&e.jsx("span",{className:"ml-5px whitespace-nowrap",children:a.unit})]}):e.jsx(e.Fragment,{})}function M(e,t){O.set(e,t)}O.set("Input",m),O.set("TextArea",m.TextArea),O.set("InputNumber",f),O.set("InputPassword",m.Password),O.set("AutoComplete",h),O.set("Select",c),O.set("TreeSelect",p),O.set("Checkbox",v),O.set("CheckboxGroup",v.Group),O.set("RadioGroup",j.Group),O.set("Switch",g),O.set("Rate",x),O.set("Slider",b),O.set("Upload",P),O.set("Transfer",(function(a){const{value:n}=a,[s,r]=t.useState(n||[]);return e.jsx(d,{...a,targetKeys:s,onChange:e=>{var t;r(e),null==(t=null==a?void 0:a.onChange)||t.call(a,e)}})})),O.set("DatePicker",(function(t){const{value:a}=t,n={...t};return a&&(n.value=w(a)),e.jsx(o,{...n})})),O.set("RangePicker",(function(t){const{value:a}=t,n={...t};return a&&(n.value=k(a)),e.jsx(N,{...n})})),O.set("TimePicker",(function(t){const{value:a}=t,n={...t};return a&&(n.value=w(a)),e.jsx(i,{...n})})),O.set("TimeRangePicker",(function(t){const{value:a}=t,n={...t};return a&&(n.value=k(a)),e.jsx(E,{...n})})),O.set("ApiSelect",_),O.set("ApiTreeSelect",V),O.set("PasswordStrength",r),O.set("Editor",S),M("GameSelect",U),M("PartnerSelect",L);export{M as a,q as b,T as c,I as f,A as g,F as h};
