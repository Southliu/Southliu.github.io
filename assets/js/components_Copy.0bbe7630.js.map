{"version":3,"file":"components_Copy.0bbe7630.js","sources":["../../../src/hooks/useClipboard.ts","../../../src/components/Copy/CopyInput.tsx","../../../src/components/Copy/CopyBtn.tsx"],"sourcesContent":["import { useCallback, useRef } from \"react\"\n\nexport function useClipboard() {\n  const ref = useRef(null)\n\n  /**\n   * 剪切板\n   * @param text - 内容\n   */\n  const copyToClipboard = useCallback((text?: string | number | null) => {\n    return new Promise<string | number>((res, rej) => {\n      try {\n        let copyText = text\n\n        // 没有内容则获取ref元素的值\n        if (!copyText) {\n          copyText = (ref.current as unknown as HTMLInputElement)?.value\n        }\n\n        // 没有内容则退出\n        if (!copyText) {\n          const error = '复制的内容不能为空'\n          rej(error)\n          return\n        }\n\n        // 值类型判断\n        if (typeof copyText !== 'string' && typeof copyText !== 'number') {\n          const error = '复制的内容必须是字符串或数字'\n          rej(error)\n          return\n        }\n\n        navigator.clipboard\n          .writeText(copyText.toString())\n          .then(() => {\n            res(copyText as string | number)\n          })\n          .catch((err) => {\n            rej(err)\n          })\n      } catch (error) {\n        rej(error)\n      }\n    })\n  }, [])\n\n  /** 获取剪切板数据 */\n  const getClipboard = useCallback(() => {\n    return navigator.clipboard.readText()\n  }, [])\n\n  return [ref, copyToClipboard, getClipboard] as const\n}","import type { InputProps } from 'antd'\nimport { Input, message } from 'antd'\nimport { useClipboard } from '@/hooks/useClipboard'\n\nconst { Search } = Input\n\nfunction CopyInput(props: InputProps) {\n  const [, copyToClipboard] = useClipboard()\n\n  /**\n   * 处理复制\n   * @param value - 复制内容\n   */\n  const handleCopy = (value: string) => {\n    if (!value) return message.warning({ content: '请输入复制内容', key: 'copy' })\n    try {\n      copyToClipboard(value)\n      message.success({ content: '复制成功', key: 'copy' })\n    } catch(e) {\n      message.warning({ content: '复制失败', key: 'copy' })\n    }\n  }\n\n  return (\n    <Search\n      {...props}\n      placeholder=\"请输入\"\n      enterButton=\"复制\"\n      onSearch={handleCopy}\n    />\n  )\n}\n\nexport default CopyInput","import type { ButtonProps } from 'antd'\nimport { Button, message } from 'antd'\nimport { useClipboard } from '@/hooks/useClipboard'\nimport { Icon } from '@iconify/react'\n\ninterface IProps extends ButtonProps {\n  text: string;\n  value: string;\n}\n\nfunction CopyBtn(props: IProps) {\n  const { text, value } = props\n  const [, copyToClipboard] = useClipboard()\n\n  /** 点击编辑 */\n  const onClick = () => {\n    try {\n      copyToClipboard(value)\n      message.success({ content: '复制成功', key: 'copy' })\n    } catch(e) {\n      message.warning({ content: '复制失败', key: 'copy' })\n    }\n  }\n\n  return (\n    <Button\n      {...props}\n      icon={<Icon icon=\"ant-design:copy-outlined\" />}\n      onClick={onClick}\n    >\n      { text }\n    </Button>\n  )\n}\n\nexport default CopyBtn"],"names":["useClipboard","ref","useRef","copyToClipboard","useCallback","text","res","rej","copyText","_a","err","error","getClipboard","Search","Input","CopyInput","props","jsx","value","message","CopyBtn","Button","Icon"],"mappings":"kMAEO,SAASA,GAAe,CACvB,MAAAC,EAAMC,SAAO,IAAI,EAMjBC,EAAkBC,cAAaC,GAC5B,IAAI,QAAyB,CAACC,EAAKC,IAAQ,OAC5C,GAAA,CACF,IAAIC,EAAWH,EAQf,GALKG,IACHA,GAAYC,EAAAR,EAAI,UAAJ,YAAAQ,EAA6C,OAIvD,CAACD,EAAU,CAEbD,EADc,WACL,EACT,MACF,CAGA,GAAI,OAAOC,GAAa,UAAY,OAAOA,GAAa,SAAU,CAEhED,EADc,gBACL,EACT,MACF,CAEA,UAAU,UACP,UAAUC,EAAS,SAAU,CAAA,EAC7B,KAAK,IAAM,CACVF,EAAIE,CAA2B,CAAA,CAChC,EACA,MAAOE,GAAQ,CACdH,EAAIG,CAAG,CAAA,CACR,QACIC,GACPJ,EAAII,CAAK,CACX,CAAA,CACD,EACA,CAAE,CAAA,EAGCC,EAAeR,EAAAA,YAAY,IACxB,UAAU,UAAU,WAC1B,CAAE,CAAA,EAEE,MAAA,CAACH,EAAKE,EAAiBS,CAAY,CAC5C,CCjDA,KAAM,CAAE,OAAAC,CAAW,EAAAC,EAEnB,SAASC,EAAUC,EAAmB,CACpC,KAAM,CAAG,CAAAb,CAAe,EAAIH,IAiB1B,OAAAiB,EAACJ,EAAA,CACE,GAAGG,EACJ,YAAY,MACZ,YAAY,KACZ,SAfgBE,GAAkB,CACpC,GAAI,CAACA,EAAO,OAAOC,EAAQ,QAAQ,CAAE,QAAS,UAAW,IAAK,OAAQ,EAClE,GAAA,CACFhB,EAAgBe,CAAK,EACrBC,EAAQ,QAAQ,CAAE,QAAS,OAAQ,IAAK,OAAQ,QAEhDA,EAAQ,QAAQ,CAAE,QAAS,OAAQ,IAAK,OAAQ,CAClD,CAAA,CAQY,CAAA,CAGhB,CCrBA,SAASC,EAAQJ,EAAe,CACxB,KAAA,CAAE,KAAAX,EAAM,MAAAa,CAAU,EAAAF,EAClB,CAAG,CAAAb,CAAe,EAAIH,IAa1B,OAAAiB,EAACI,EAAA,CACE,GAAGL,EACJ,KAAMC,EAACK,EAAK,CAAA,KAAK,0BAA2B,CAAA,EAC5C,QAbY,IAAM,CAChB,GAAA,CACFnB,EAAgBe,CAAK,EACrBC,EAAQ,QAAQ,CAAE,QAAS,OAAQ,IAAK,OAAQ,QAEhDA,EAAQ,QAAQ,CAAE,QAAS,OAAQ,IAAK,OAAQ,CAClD,CAAA,EASI,SAAAd,CAAA,CAAA,CAGR"}