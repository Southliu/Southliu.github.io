import{r as t}from"./react.bfbbfd99.js";import"./react-is.7c6f4ce0.js";import{c as Ue}from"./classnames.aa374d53.js";import{d as ae,f as q,e as bn,b as oe,g as Le,r as Je,v as at,c as Oe}from"./@babel_runtime.3e487d10.js";import{w as rt,n as it,z as ln,K as y,A as ut,E as lt,e as ct,j as pn,d as st,c as dt,t as ft,f as vt,o as mt}from"./rc-util.4aaadd18.js";import{F as pt}from"./rc-overflow.1b1064c8.js";import{T as gt}from"./rc-trigger.aa3af262.js";import{L as ht}from"./rc-virtual-list.524ca3a1.js";var _n=t.createContext(null);function bt(){return t.useContext(_n)}function St(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),a=ae(e,2),o=a[0],i=a[1],r=t.useRef(null),l=function(){window.clearTimeout(r.current)};t.useEffect(function(){return l},[]);var m=function(h,S){l(),r.current=window.setTimeout(function(){i(h),S&&S()},n)};return[o,m,l]}function Fn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),a=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function o(i){(i||e.current===null)&&(e.current=i),window.clearTimeout(a.current),a.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},o]}function wt(n,e,a,o){var i=t.useRef(null);i.current={open:e,triggerOpen:a,customizedTrigger:o},t.useEffect(function(){function r(l){var m;if(!((m=i.current)!==null&&m!==void 0&&m.customizedTrigger)){var s=l.target;s.shadowRoot&&l.composed&&(s=l.composedPath()[0]||s),i.current.open&&n().filter(function(h){return h}).every(function(h){return!h.contains(s)&&h!==s})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",r),function(){return window.removeEventListener("mousedown",r)}},[])}var cn=function(e){var a=e.className,o=e.customizeIcon,i=e.customizeIconProps,r=e.onMouseDown,l=e.onClick,m=e.children,s;return typeof o=="function"?s=o(i):s=o,t.createElement("span",{className:a,onMouseDown:function(S){S.preventDefault(),r&&r(S)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},s!==void 0?s:t.createElement("span",{className:Ue(a.split(/\s+/).map(function(h){return"".concat(h,"-icon")}))},m))},Ct=function(e,a){var o,i,r=e.prefixCls,l=e.id,m=e.inputElement,s=e.disabled,h=e.tabIndex,S=e.autoFocus,u=e.autoComplete,p=e.editable,d=e.activeDescendantId,w=e.value,N=e.maxLength,j=e.onKeyDown,M=e.onMouseDown,T=e.onChange,_=e.onPaste,Z=e.onCompositionStart,z=e.onCompositionEnd,G=e.open,le=e.attrs,V=m||t.createElement("input",null),$=V,X=$.ref,U=$.props,Y=U.onKeyDown,W=U.onChange,ee=U.onMouseDown,J=U.onCompositionStart,R=U.onCompositionEnd,x=U.style;return rt(!("maxLength"in V.props)),V=t.cloneElement(V,q(q(q({type:"search"},U),{},{id:l,ref:it(a,X),disabled:s,tabIndex:h,autoComplete:u||"off",autoFocus:S,className:Ue("".concat(r,"-selection-search-input"),(o=V)===null||o===void 0||(i=o.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-expanded":G,"aria-haspopup":"listbox","aria-owns":"".concat(l,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(l,"_list"),"aria-activedescendant":d},le),{},{value:p?w:"",maxLength:N,readOnly:!p,unselectable:p?null:"on",style:q(q({},x),{},{opacity:p?null:0}),onKeyDown:function(P){j(P),Y&&Y(P)},onMouseDown:function(P){M(P),ee&&ee(P)},onChange:function(P){T(P),W&&W(P)},onCompositionStart:function(P){Z(P),J&&J(P)},onCompositionEnd:function(P){z(P),R&&R(P)},onPaste:_})),V},Sn=t.forwardRef(Ct);Sn.displayName="Input";function Ln(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var yt=typeof window<"u"&&window.document&&window.document.documentElement,It=yt;function Et(n){return n!=null}function xn(n){return["string","number"].includes(bn(n))}function kn(n){var e=void 0;return n&&(xn(n.title)?e=n.title.toString():xn(n.label)&&(e=n.label.toString())),e}function Dt(n,e){It?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Rt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Pn=function(e){e.preventDefault(),e.stopPropagation()},Ot=function(e){var a=e.id,o=e.prefixCls,i=e.values,r=e.open,l=e.searchValue,m=e.autoClearSearchValue,s=e.inputRef,h=e.placeholder,S=e.disabled,u=e.mode,p=e.showSearch,d=e.autoFocus,w=e.autoComplete,N=e.activeDescendantId,j=e.tabIndex,M=e.removeIcon,T=e.maxTagCount,_=e.maxTagTextLength,Z=e.maxTagPlaceholder,z=Z===void 0?function(A){return"+ ".concat(A.length," ...")}:Z,G=e.tagRender,le=e.onToggleOpen,V=e.onRemove,$=e.onInputChange,X=e.onInputPaste,U=e.onInputKeyDown,Y=e.onInputMouseDown,W=e.onInputCompositionStart,ee=e.onInputCompositionEnd,J=t.useRef(null),R=t.useState(0),x=ae(R,2),O=x[0],P=x[1],pe=t.useState(!1),ce=ae(pe,2),ke=ce[0],re=ce[1],ve="".concat(o,"-selection"),Ie=r||u==="multiple"&&m===!1||u==="tags"?l:"",I=u==="tags"||u==="multiple"&&m===!1||p&&(r||ke);Dt(function(){P(J.current.scrollWidth)},[Ie]);function c(A,ne,ue,Se,se){return t.createElement("span",{className:Ue("".concat(ve,"-item"),oe({},"".concat(ve,"-item-disabled"),ue)),title:kn(A)},t.createElement("span",{className:"".concat(ve,"-item-content")},ne),Se&&t.createElement(cn,{className:"".concat(ve,"-item-remove"),onMouseDown:Pn,onClick:se,customizeIcon:M},"×"))}function D(A,ne,ue,Se,se){var we=function(K){Pn(K),le(!r)};return t.createElement("span",{onMouseDown:we},G({label:ne,value:A,disabled:ue,closable:Se,onClose:se}))}function F(A){var ne=A.disabled,ue=A.label,Se=A.value,se=!S&&!ne,we=ue;if(typeof _=="number"&&(typeof ue=="string"||typeof ue=="number")){var de=String(we);de.length>_&&(we="".concat(de.slice(0,_),"..."))}var K=function(Ke){Ke&&Ke.stopPropagation(),V(A)};return typeof G=="function"?D(Se,we,ne,se,K):c(A,we,ne,se,K)}function L(A){var ne=typeof z=="function"?z(A):z;return c({title:ne},ne,!1)}var k=t.createElement("div",{className:"".concat(ve,"-search"),style:{width:O},onFocus:function(){re(!0)},onBlur:function(){re(!1)}},t.createElement(Sn,{ref:s,open:r,prefixCls:o,id:a,inputElement:null,disabled:S,autoFocus:d,autoComplete:w,editable:I,activeDescendantId:N,value:Ie,onKeyDown:U,onMouseDown:Y,onChange:$,onPaste:X,onCompositionStart:W,onCompositionEnd:ee,tabIndex:j,attrs:ln(e,!0)}),t.createElement("span",{ref:J,className:"".concat(ve,"-search-mirror"),"aria-hidden":!0},Ie," ")),Q=t.createElement(pt,{prefixCls:"".concat(ve,"-overflow"),data:i,renderItem:F,renderRest:L,suffix:k,itemKey:Rt,maxCount:T});return t.createElement(t.Fragment,null,Q,!i.length&&!Ie&&t.createElement("span",{className:"".concat(ve,"-placeholder")},h))},Mt=function(e){var a=e.inputElement,o=e.prefixCls,i=e.id,r=e.inputRef,l=e.disabled,m=e.autoFocus,s=e.autoComplete,h=e.activeDescendantId,S=e.mode,u=e.open,p=e.values,d=e.placeholder,w=e.tabIndex,N=e.showSearch,j=e.searchValue,M=e.activeValue,T=e.maxLength,_=e.onInputKeyDown,Z=e.onInputMouseDown,z=e.onInputChange,G=e.onInputPaste,le=e.onInputCompositionStart,V=e.onInputCompositionEnd,$=t.useState(!1),X=ae($,2),U=X[0],Y=X[1],W=S==="combobox",ee=W||N,J=p[0],R=j||"";W&&M&&!U&&(R=M),t.useEffect(function(){W&&Y(!1)},[W,M]);var x=S!=="combobox"&&!u&&!N?!1:!!R,O=kn(J),P=function(){if(J)return null;var ce=x?{visibility:"hidden"}:void 0;return t.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:ce},d)};return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(o,"-selection-search")},t.createElement(Sn,{ref:r,prefixCls:o,id:i,open:u,inputElement:a,disabled:l,autoFocus:m,autoComplete:s,editable:ee,activeDescendantId:h,value:R,onKeyDown:_,onMouseDown:Z,onChange:function(ce){Y(!0),z(ce)},onPaste:G,onCompositionStart:le,onCompositionEnd:V,tabIndex:w,attrs:ln(e,!0),maxLength:W?T:void 0})),!W&&J&&!x&&t.createElement("span",{className:"".concat(o,"-selection-item"),title:O},J.label),P())};function xt(n){return![y.ESC,y.SHIFT,y.BACKSPACE,y.TAB,y.WIN_KEY,y.ALT,y.META,y.WIN_KEY_RIGHT,y.CTRL,y.SEMICOLON,y.EQUALS,y.CAPS_LOCK,y.CONTEXT_MENU,y.F1,y.F2,y.F3,y.F4,y.F5,y.F6,y.F7,y.F8,y.F9,y.F10,y.F11,y.F12].includes(n)}var Pt=function(e,a){var o=t.useRef(null),i=t.useRef(!1),r=e.prefixCls,l=e.open,m=e.mode,s=e.showSearch,h=e.tokenWithEnter,S=e.autoClearSearchValue,u=e.onSearch,p=e.onSearchSubmit,d=e.onToggleOpen,w=e.onInputKeyDown,N=e.domRef;t.useImperativeHandle(a,function(){return{focus:function(){o.current.focus()},blur:function(){o.current.blur()}}});var j=Fn(0),M=ae(j,2),T=M[0],_=M[1],Z=function(x){var O=x.which;(O===y.UP||O===y.DOWN)&&x.preventDefault(),w&&w(x),O===y.ENTER&&m==="tags"&&!i.current&&!l&&(p==null||p(x.target.value)),xt(O)&&d(!0)},z=function(){_(!0)},G=t.useRef(null),le=function(x){u(x,!0,i.current)!==!1&&d(!0)},V=function(){i.current=!0},$=function(x){i.current=!1,m!=="combobox"&&le(x.target.value)},X=function(x){var O=x.target.value;if(h&&G.current&&/[\r\n]/.test(G.current)){var P=G.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");O=O.replace(P,G.current)}G.current=null,le(O)},U=function(x){var O=x.clipboardData,P=O.getData("text");G.current=P},Y=function(x){var O=x.target;if(O!==o.current){var P=document.body.style.msTouchAction!==void 0;P?setTimeout(function(){o.current.focus()}):o.current.focus()}},W=function(x){var O=T();x.target!==o.current&&!O&&m!=="combobox"&&x.preventDefault(),(m!=="combobox"&&(!s||!O)||!l)&&(l&&S!==!1&&u("",!0,!1),d())},ee={inputRef:o,onInputKeyDown:Z,onInputMouseDown:z,onInputChange:X,onInputPaste:U,onInputCompositionStart:V,onInputCompositionEnd:$},J=m==="multiple"||m==="tags"?t.createElement(Ot,Le({},e,ee)):t.createElement(Mt,Le({},e,ee));return t.createElement("div",{ref:N,className:"".concat(r,"-selector"),onClick:Y,onMouseDown:W},J)},Kn=t.forwardRef(Pt);Kn.displayName="Selector";var Nt=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Vt=function(e){var a=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1}}}},Tt=function(e,a){var o=e.prefixCls;e.disabled;var i=e.visible,r=e.children,l=e.popupElement,m=e.containerWidth,s=e.animation,h=e.transitionName,S=e.dropdownStyle,u=e.dropdownClassName,p=e.direction,d=p===void 0?"ltr":p,w=e.placement,N=e.dropdownMatchSelectWidth,j=e.dropdownRender,M=e.dropdownAlign,T=e.getPopupContainer,_=e.empty,Z=e.getTriggerDOMNode,z=e.onPopupVisibleChange,G=e.onPopupMouseEnter,le=Je(e,Nt),V="".concat(o,"-dropdown"),$=l;j&&($=j(l));var X=t.useMemo(function(){return Vt(N)},[N]),U=s?"".concat(V,"-").concat(s):h,Y=t.useRef(null);t.useImperativeHandle(a,function(){return{getPopupElement:function(){return Y.current}}});var W=q({minWidth:m},S);return typeof N=="number"?W.width=N:N&&(W.width=m),t.createElement(gt,Le({},le,{showAction:z?["click"]:[],hideAction:z?["click"]:[],popupPlacement:w||(d==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:X,prefixCls:V,popupTransitionName:U,popup:t.createElement("div",{ref:Y,onMouseEnter:G},$),popupAlign:M,popupVisible:i,getPopupContainer:T,popupClassName:Ue(u,oe({},"".concat(V,"-empty"),_)),popupStyle:W,getTriggerDOMNode:Z,onPopupVisibleChange:z}),r)},$n=t.forwardRef(Tt);$n.displayName="SelectTrigger";function Nn(n,e){var a=n.key,o;return"value"in n&&(o=n.value),a??(o!==void 0?o:"rc-index-key-".concat(e))}function Wn(n,e){var a=n||{},o=a.label,i=a.value,r=a.options;return{label:o||(e?"children":"label"),value:i||"value",options:r||"options"}}function At(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.fieldNames,o=e.childrenAsData,i=[],r=Wn(a,!1),l=r.label,m=r.value,s=r.options;function h(S,u){S.forEach(function(p){var d=p[l];if(u||!(s in p)){var w=p[m];i.push({key:Nn(p,i.length),groupOption:u,data:p,label:d,value:w})}else{var N=d;N===void 0&&o&&(N=p.label),i.push({key:Nn(p,i.length),group:!0,data:p,label:N}),h(p[s],!0)}})}return h(n,!1),i}function gn(n){var e=q({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return ut(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}function _t(n,e){if(!e||!e.length)return null;var a=!1;function o(r,l){var m=at(l),s=m[0],h=m.slice(1);if(!s)return[r];var S=r.split(s);return a=a||S.length>1,S.reduce(function(u,p){return[].concat(Oe(u),Oe(o(p,h)))},[]).filter(function(u){return u})}var i=o(n,e);return a?i:null}var Ft=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Lt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function hn(n){return n==="tags"||n==="multiple"}var kt=t.forwardRef(function(n,e){var a,o,i=n.id,r=n.prefixCls,l=n.className,m=n.showSearch,s=n.tagRender,h=n.direction,S=n.omitDomProps,u=n.displayValues,p=n.onDisplayValuesChange,d=n.emptyOptions,w=n.notFoundContent,N=w===void 0?"Not Found":w,j=n.onClear,M=n.mode,T=n.disabled,_=n.loading,Z=n.getInputElement,z=n.getRawInputElement,G=n.open,le=n.defaultOpen,V=n.onDropdownVisibleChange,$=n.activeValue,X=n.onActiveValueChange,U=n.activeDescendantId,Y=n.searchValue,W=n.autoClearSearchValue,ee=n.onSearch,J=n.onSearchSplit,R=n.tokenSeparators,x=n.allowClear,O=n.showArrow,P=n.inputIcon,pe=n.clearIcon,ce=n.OptionList,ke=n.animation,re=n.transitionName,ve=n.dropdownStyle,Ie=n.dropdownClassName,I=n.dropdownMatchSelectWidth,c=n.dropdownRender,D=n.dropdownAlign,F=n.placement,L=n.getPopupContainer,k=n.showAction,Q=k===void 0?[]:k,A=n.onFocus,ne=n.onBlur,ue=n.onKeyUp,Se=n.onKeyDown,se=n.onMouseDown,we=Je(n,Ft),de=hn(M),K=(m!==void 0?m:de)||M==="combobox",Te=q({},we);Lt.forEach(function(C){delete Te[C]}),S==null||S.forEach(function(C){delete Te[C]});var Ke=t.useState(!1),ge=ae(Ke,2),Ce=ge[0],Qe=ge[1];t.useEffect(function(){Qe(lt())},[]);var Ee=t.useRef(null),Ae=t.useRef(null),xe=t.useRef(null),De=t.useRef(null),he=t.useRef(null),sn=St(),Xe=ae(sn,3),qe=Xe[0],$e=Xe[1],dn=Xe[2];t.useImperativeHandle(e,function(){var C,g;return{focus:(C=De.current)===null||C===void 0?void 0:C.focus,blur:(g=De.current)===null||g===void 0?void 0:g.blur,scrollTo:function(be){var te;return(te=he.current)===null||te===void 0?void 0:te.scrollTo(be)}}});var Re=t.useMemo(function(){var C;if(M!=="combobox")return Y;var g=(C=u[0])===null||C===void 0?void 0:C.value;return typeof g=="string"||typeof g=="number"?String(g):""},[Y,M,u]),on=M==="combobox"&&typeof Z=="function"&&Z()||null,Pe=typeof z=="function"&&z(),an=ct(Ae,Pe==null||(a=Pe.props)===null||a===void 0?void 0:a.ref),rn=pn(void 0,{defaultValue:le,value:G}),je=ae(rn,2),Ze=je[0],en=je[1],ie=Ze,un=!N&&d;(T||un&&ie&&M==="combobox")&&(ie=!1);var We=un?!1:ie,f=t.useCallback(function(C){var g=C!==void 0?C:!ie;T||(en(g),ie!==g&&(V==null||V(g)))},[T,ie,en,V]),b=t.useMemo(function(){return(R||[]).some(function(C){return[`
`,`\r
`].includes(C)})},[R]),v=function(g,me,be){var te=!0,ye=g;X==null||X(null);var Me=be?null:_t(g,R);return M!=="combobox"&&Me&&(ye="",J==null||J(Me),f(!1),te=!1),ee&&Re!==ye&&ee(ye,{source:me?"typing":"effect"}),te},E=function(g){!g||!g.trim()||ee(g,{source:"submit"})};t.useEffect(function(){!ie&&!de&&M!=="combobox"&&v("",!1,!1)},[ie]),t.useEffect(function(){Ze&&T&&en(!1),T&&$e(!1)},[T]);var B=Fn(),H=ae(B,2),_e=H[0],Ne=H[1],Ge=function(g){var me=_e(),be=g.which;if(be===y.ENTER&&(M!=="combobox"&&g.preventDefault(),ie||f(!0)),Ne(!!Re),be===y.BACKSPACE&&!me&&de&&!Re&&u.length){for(var te=Oe(u),ye=null,Me=te.length-1;Me>=0;Me-=1){var tn=te[Me];if(!tn.disabled){te.splice(Me,1),ye=tn;break}}ye&&p(te,{type:"remove",values:[ye]})}for(var ze=arguments.length,Ye=new Array(ze>1?ze-1:0),He=1;He<ze;He++)Ye[He-1]=arguments[He];if(ie&&he.current){var Mn;(Mn=he.current).onKeyDown.apply(Mn,[g].concat(Ye))}Se==null||Se.apply(void 0,[g].concat(Ye))},fe=function(g){for(var me=arguments.length,be=new Array(me>1?me-1:0),te=1;te<me;te++)be[te-1]=arguments[te];if(ie&&he.current){var ye;(ye=he.current).onKeyUp.apply(ye,[g].concat(be))}ue==null||ue.apply(void 0,[g].concat(be))},Be=function(g){var me=u.filter(function(be){return be!==g});p(me,{type:"remove",values:[g]})},nn=t.useRef(!1),fn=function(){$e(!0),T||(A&&!nn.current&&A.apply(void 0,arguments),Q.includes("focus")&&f(!0)),nn.current=!0},wn=function(){$e(!1,function(){nn.current=!1,f(!1)}),!T&&(Re&&(M==="tags"?ee(Re,{source:"submit"}):M==="multiple"&&ee("",{source:"blur"})),ne&&ne.apply(void 0,arguments))},Ve=[];t.useEffect(function(){return function(){Ve.forEach(function(C){return clearTimeout(C)}),Ve.splice(0,Ve.length)}},[]);var Fe=function(g){var me,be=g.target,te=(me=xe.current)===null||me===void 0?void 0:me.getPopupElement();if(te&&te.contains(be)){var ye=setTimeout(function(){var Ye=Ve.indexOf(ye);if(Ye!==-1&&Ve.splice(Ye,1),dn(),!Ce&&!te.contains(document.activeElement)){var He;(He=De.current)===null||He===void 0||He.focus()}});Ve.push(ye)}for(var Me=arguments.length,tn=new Array(Me>1?Me-1:0),ze=1;ze<Me;ze++)tn[ze-1]=arguments[ze];se==null||se.apply(void 0,[g].concat(tn))},Xn=t.useState(null),Cn=ae(Xn,2),yn=Cn[0],Yn=Cn[1],Jn=t.useState({}),Qn=ae(Jn,2),qn=Qn[1];function Zn(){qn({})}st(function(){if(We){var C,g=Math.ceil((C=Ee.current)===null||C===void 0?void 0:C.offsetWidth);yn!==g&&!Number.isNaN(g)&&Yn(g)}},[We]);var In;Pe&&(In=function(g){f(g)}),wt(function(){var C;return[Ee.current,(C=xe.current)===null||C===void 0?void 0:C.getPopupElement()]},We,f,!!Pe);var et=t.useMemo(function(){return q(q({},n),{},{notFoundContent:N,open:ie,triggerOpen:We,id:i,showSearch:K,multiple:de,toggleOpen:f})},[n,N,We,ie,i,K,de,f]),En=O!==void 0?O:_||!de&&M!=="combobox",Dn;En&&(Dn=t.createElement(cn,{className:Ue("".concat(r,"-arrow"),oe({},"".concat(r,"-arrow-loading"),_)),customizeIcon:P,customizeIconProps:{loading:_,searchValue:Re,open:ie,focused:qe,showSearch:K}}));var Rn,nt=function(){var g;j==null||j(),(g=De.current)===null||g===void 0||g.focus(),p([],{type:"clear",values:u}),v("",!1,!1)};!T&&x&&(u.length||Re)&&!(M==="combobox"&&Re==="")&&(Rn=t.createElement(cn,{className:"".concat(r,"-clear"),onMouseDown:nt,customizeIcon:pe},"×"));var tt=t.createElement(ce,{ref:he}),ot=Ue(r,l,(o={},oe(o,"".concat(r,"-focused"),qe),oe(o,"".concat(r,"-multiple"),de),oe(o,"".concat(r,"-single"),!de),oe(o,"".concat(r,"-allow-clear"),x),oe(o,"".concat(r,"-show-arrow"),En),oe(o,"".concat(r,"-disabled"),T),oe(o,"".concat(r,"-loading"),_),oe(o,"".concat(r,"-open"),ie),oe(o,"".concat(r,"-customize-input"),on),oe(o,"".concat(r,"-show-search"),K),o)),On=t.createElement($n,{ref:xe,disabled:T,prefixCls:r,visible:We,popupElement:tt,containerWidth:yn,animation:ke,transitionName:re,dropdownStyle:ve,dropdownClassName:Ie,direction:h,dropdownMatchSelectWidth:I,dropdownRender:c,dropdownAlign:D,placement:F,getPopupContainer:L,empty:d,getTriggerDOMNode:function(){return Ae.current},onPopupVisibleChange:In,onPopupMouseEnter:Zn},Pe?t.cloneElement(Pe,{ref:an}):t.createElement(Kn,Le({},n,{domRef:Ae,prefixCls:r,inputElement:on,ref:De,id:i,showSearch:K,autoClearSearchValue:W,mode:M,activeDescendantId:U,tagRender:s,values:u,open:ie,onToggleOpen:f,activeValue:$,searchValue:Re,onSearch:v,onSearchSubmit:E,onRemove:Be,tokenWithEnter:b}))),vn;return Pe?vn=On:vn=t.createElement("div",Le({className:ot},Te,{ref:Ee,onMouseDown:Fe,onKeyDown:Ge,onKeyUp:fe,onFocus:fn,onBlur:wn}),qe&&!ie&&t.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(u.map(function(C){var g=C.label,me=C.value;return["number","string"].includes(bn(g))?g:me}).join(", "))),On,Dn,Rn),t.createElement(_n.Provider,{value:et},vn)});const Kt=function(n,e){var a=t.useRef({values:new Map,options:new Map}),o=t.useMemo(function(){var r=a.current,l=r.values,m=r.options,s=n.map(function(u){if(u.label===void 0){var p;return q(q({},u),{},{label:(p=l.get(u.value))===null||p===void 0?void 0:p.label})}return u}),h=new Map,S=new Map;return s.forEach(function(u){h.set(u.value,u),S.set(u.value,e.get(u.value)||m.get(u.value))}),a.current.values=h,a.current.options=S,s},[n,e]),i=t.useCallback(function(r){return e.get(r)||a.current.options.get(r)},[e]);return[o,i]};function mn(n,e){return Ln(n).join("").toUpperCase().includes(e)}const $t=function(n,e,a,o,i){return t.useMemo(function(){if(!a||o===!1)return n;var r=e.options,l=e.label,m=e.value,s=[],h=typeof o=="function",S=a.toUpperCase(),u=h?o:function(d,w){return i?mn(w[i],S):w[r]?mn(w[l!=="children"?l:"label"],S):mn(w[m],S)},p=h?function(d){return gn(d)}:function(d){return d};return n.forEach(function(d){if(d[r]){var w=u(a,p(d));if(w)s.push(d);else{var N=d[r].filter(function(j){return u(a,p(j))});N.length&&s.push(q(q({},d),{},oe({},r,N)))}return}u(a,p(d))&&s.push(d)}),s},[n,o,i,a,e])};var Vn=0,Wt=dt();function Bt(){var n;return Wt?(n=Vn,Vn+=1):n="TEST_OR_SSR",n}function zt(n){var e=t.useState(),a=ae(e,2),o=a[0],i=a[1];return t.useEffect(function(){i("rc_select_".concat(Bt()))},[]),n||o}var Ht=["children","value"],Ut=["children"];function jt(n){var e=n,a=e.key,o=e.props,i=o.children,r=o.value,l=Je(o,Ht);return q({key:a,value:r!==void 0?r:a,children:i},l)}function Bn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ft(n).map(function(a,o){if(!t.isValidElement(a)||!a.type)return null;var i=a,r=i.type.isSelectOptGroup,l=i.key,m=i.props,s=m.children,h=Je(m,Ut);return e||!r?jt(a):q(q({key:"__RC_SELECT_GRP__".concat(l===null?o:l,"__"),label:l},h),{},{options:Bn(s)})}).filter(function(a){return a})}function Gt(n,e,a,o,i){return t.useMemo(function(){var r=n,l=!n;l&&(r=Bn(e));var m=new Map,s=new Map,h=function(p,d,w){w&&typeof w=="string"&&p.set(d[w],d)};function S(u){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d=0;d<u.length;d+=1){var w=u[d];!w[a.options]||p?(m.set(w[a.value],w),h(s,w,a.label),h(s,w,o),h(s,w,i)):S(w[a.options],!0)}}return S(r),{options:r,valueOptions:m,labelOptions:s}},[n,e,a,o,i])}function Tn(n){var e=t.useRef();e.current=n;var a=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return a}var zn=function(){return null};zn.isSelectOptGroup=!0;var Hn=function(){return null};Hn.isSelectOption=!0;var Un=t.createContext(null);function Xt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Yt=["disabled","title","children","style","className"];function An(n){return typeof n=="string"||typeof n=="number"}var Jt=function(e,a){var o=bt(),i=o.prefixCls,r=o.id,l=o.open,m=o.multiple,s=o.mode,h=o.searchValue,S=o.toggleOpen,u=o.notFoundContent,p=o.onPopupScroll,d=t.useContext(Un),w=d.flattenOptions,N=d.onActiveValue,j=d.defaultActiveFirstOption,M=d.onSelect,T=d.menuItemSelectedIcon,_=d.rawValues,Z=d.fieldNames,z=d.virtual,G=d.listHeight,le=d.listItemHeight,V="".concat(i,"-item"),$=vt(function(){return w},[l,w],function(I,c){return c[0]&&I[1]!==c[1]}),X=t.useRef(null),U=function(c){c.preventDefault()},Y=function(c){X.current&&X.current.scrollTo(typeof c=="number"?{index:c}:c)},W=function(c){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,F=$.length,L=0;L<F;L+=1){var k=(c+L*D+F)%F,Q=$[k],A=Q.group,ne=Q.data;if(!A&&!ne.disabled)return k}return-1},ee=t.useState(function(){return W(0)}),J=ae(ee,2),R=J[0],x=J[1],O=function(c){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;x(c);var F={source:D?"keyboard":"mouse"},L=$[c];if(!L){N(null,-1,F);return}N(L.value,c,F)};t.useEffect(function(){O(j!==!1?W(0):-1)},[$.length,h]);var P=t.useCallback(function(I){return _.has(I)&&s!=="combobox"},[s,Oe(_).toString(),_.size]);t.useEffect(function(){var I=setTimeout(function(){if(!m&&l&&_.size===1){var D=Array.from(_)[0],F=$.findIndex(function(L){var k=L.data;return k.value===D});F!==-1&&(O(F),Y(F))}});if(l){var c;(c=X.current)===null||c===void 0||c.scrollTo(void 0)}return function(){return clearTimeout(I)}},[l,h]);var pe=function(c){c!==void 0&&M(c,{selected:!_.has(c)}),m||S(!1)};if(t.useImperativeHandle(a,function(){return{onKeyDown:function(c){var D=c.which,F=c.ctrlKey;switch(D){case y.N:case y.P:case y.UP:case y.DOWN:{var L=0;if(D===y.UP?L=-1:D===y.DOWN?L=1:Xt()&&F&&(D===y.N?L=1:D===y.P&&(L=-1)),L!==0){var k=W(R+L,L);Y(k),O(k,!0)}break}case y.ENTER:{var Q=$[R];Q&&!Q.data.disabled?pe(Q.value):pe(void 0),l&&c.preventDefault();break}case y.ESC:S(!1),l&&c.stopPropagation()}},onKeyUp:function(){},scrollTo:function(c){Y(c)}}}),$.length===0)return t.createElement("div",{role:"listbox",id:"".concat(r,"_list"),className:"".concat(V,"-empty"),onMouseDown:U},u);var ce=Object.keys(Z).map(function(I){return Z[I]}),ke=function(c){return c.label};function re(I,c){var D=I.group;return{role:D?"presentation":"option",id:"".concat(r,"_list_").concat(c)}}var ve=function(c){var D=$[c];if(!D)return null;var F=D.data||{},L=F.value,k=D.group,Q=ln(F,!0),A=ke(D);return D?t.createElement("div",Le({"aria-label":typeof A=="string"&&!k?A:null},Q,{key:c},re(D,c),{"aria-selected":P(L)}),L):null},Ie={role:"listbox",id:"".concat(r,"_list")};return t.createElement(t.Fragment,null,z&&t.createElement("div",Le({},Ie,{style:{height:0,width:0,overflow:"hidden"}}),ve(R-1),ve(R),ve(R+1)),t.createElement(ht,{itemKey:"key",ref:X,data:$,height:G,itemHeight:le,fullHeight:!1,onMouseDown:U,onScroll:p,virtual:z,innerProps:z?null:Ie},function(I,c){var D,F=I.group,L=I.groupOption,k=I.data,Q=I.label,A=I.value,ne=k.key;if(F){var ue,Se=(ue=k.title)!==null&&ue!==void 0?ue:An(Q)?Q.toString():void 0;return t.createElement("div",{className:Ue(V,"".concat(V,"-group")),title:Se},Q!==void 0?Q:ne)}var se=k.disabled,we=k.title;k.children;var de=k.style,K=k.className,Te=Je(k,Yt),Ke=mt(Te,ce),ge=P(A),Ce="".concat(V,"-option"),Qe=Ue(V,Ce,K,(D={},oe(D,"".concat(Ce,"-grouped"),L),oe(D,"".concat(Ce,"-active"),R===c&&!se),oe(D,"".concat(Ce,"-disabled"),se),oe(D,"".concat(Ce,"-selected"),ge),D)),Ee=ke(I),Ae=!T||typeof T=="function"||ge,xe=typeof Ee=="number"?Ee:Ee||A,De=An(xe)?xe.toString():void 0;return we!==void 0&&(De=we),t.createElement("div",Le({},ln(Ke),z?{}:re(I,c),{"aria-selected":ge,className:Qe,title:De,onMouseMove:function(){R===c||se||O(c)},onClick:function(){se||pe(A)},style:de}),t.createElement("div",{className:"".concat(Ce,"-content")},xe),t.isValidElement(T)||ge,Ae&&t.createElement(cn,{className:"".concat(V,"-option-state"),customizeIcon:T,customizeIconProps:{isSelected:ge}},ge?"✓":null))}))},jn=t.forwardRef(Jt);jn.displayName="OptionList";var Qt=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],qt=["inputValue"];function Zt(n){return!n||bn(n)!=="object"}var eo=t.forwardRef(function(n,e){var a=n.id,o=n.mode,i=n.prefixCls,r=i===void 0?"rc-select":i,l=n.backfill,m=n.fieldNames,s=n.inputValue,h=n.searchValue,S=n.onSearch,u=n.autoClearSearchValue,p=u===void 0?!0:u,d=n.onSelect,w=n.onDeselect,N=n.dropdownMatchSelectWidth,j=N===void 0?!0:N,M=n.filterOption,T=n.filterSort,_=n.optionFilterProp,Z=n.optionLabelProp,z=n.options,G=n.children,le=n.defaultActiveFirstOption,V=n.menuItemSelectedIcon,$=n.virtual,X=n.listHeight,U=X===void 0?200:X,Y=n.listItemHeight,W=Y===void 0?20:Y,ee=n.value,J=n.defaultValue,R=n.labelInValue,x=n.onChange,O=Je(n,Qt),P=zt(a),pe=hn(o),ce=!!(!z&&G),ke=t.useMemo(function(){return M===void 0&&o==="combobox"?!1:M},[M,o]),re=t.useMemo(function(){return Wn(m,ce)},[JSON.stringify(m),ce]),ve=pn("",{value:h!==void 0?h:s,postState:function(b){return b||""}}),Ie=ae(ve,2),I=Ie[0],c=Ie[1],D=Gt(z,G,re,_,Z),F=D.valueOptions,L=D.labelOptions,k=D.options,Q=t.useCallback(function(f){var b=Ln(f);return b.map(function(v){var E,B,H,_e,Ne;if(Zt(v))E=v;else{var Ge;H=v.key,B=v.label,E=(Ge=v.value)!==null&&Ge!==void 0?Ge:H}var fe=F.get(E);if(fe){var Be;B===void 0&&(B=fe==null?void 0:fe[Z||re.label]),H===void 0&&(H=(Be=fe==null?void 0:fe.key)!==null&&Be!==void 0?Be:E),_e=fe==null?void 0:fe.disabled,Ne=fe==null?void 0:fe.title}return{label:B,value:E,key:H,disabled:_e,title:Ne}})},[re,Z,F]),A=pn(J,{value:ee}),ne=ae(A,2),ue=ne[0],Se=ne[1],se=t.useMemo(function(){var f,b=Q(ue);return o==="combobox"&&!((f=b[0])!==null&&f!==void 0&&f.value)?[]:b},[ue,Q,o]),we=Kt(se,F),de=ae(we,2),K=de[0],Te=de[1],Ke=t.useMemo(function(){if(!o&&K.length===1){var f=K[0];if(f.value===null&&(f.label===null||f.label===void 0))return[]}return K.map(function(b){var v;return q(q({},b),{},{label:(v=b.label)!==null&&v!==void 0?v:b.value})})},[o,K]),ge=t.useMemo(function(){return new Set(K.map(function(f){return f.value}))},[K]);t.useEffect(function(){if(o==="combobox"){var f,b=(f=K[0])===null||f===void 0?void 0:f.value;c(Et(b)?String(b):"")}},[K]);var Ce=Tn(function(f,b){var v,E=b??f;return v={},oe(v,re.value,f),oe(v,re.label,E),v}),Qe=t.useMemo(function(){if(o!=="tags")return k;var f=Oe(k),b=function(E){return F.has(E)};return Oe(K).sort(function(v,E){return v.value<E.value?-1:1}).forEach(function(v){var E=v.value;b(E)||f.push(Ce(E,v.label))}),f},[Ce,k,F,K,o]),Ee=$t(Qe,re,I,ke,_),Ae=t.useMemo(function(){return o!=="tags"||!I||Ee.some(function(f){return f[_||"value"]===I})?Ee:[Ce(I)].concat(Oe(Ee))},[Ce,_,o,Ee,I]),xe=t.useMemo(function(){return T?Oe(Ae).sort(function(f,b){return T(f,b)}):Ae},[Ae,T]),De=t.useMemo(function(){return At(xe,{fieldNames:re,childrenAsData:ce})},[xe,re,ce]),he=function(b){var v=Q(b);if(Se(v),x&&(v.length!==K.length||v.some(function(H,_e){var Ne;return((Ne=K[_e])===null||Ne===void 0?void 0:Ne.value)!==(H==null?void 0:H.value)}))){var E=R?v:v.map(function(H){return H.value}),B=v.map(function(H){return gn(Te(H.value))});x(pe?E:E[0],pe?B:B[0])}},sn=t.useState(null),Xe=ae(sn,2),qe=Xe[0],$e=Xe[1],dn=t.useState(0),Re=ae(dn,2),on=Re[0],Pe=Re[1],an=le!==void 0?le:o!=="combobox",rn=t.useCallback(function(f,b){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},E=v.source,B=E===void 0?"keyboard":E;Pe(b),l&&o==="combobox"&&f!==null&&B==="keyboard"&&$e(String(f))},[l,o]),je=function(b,v,E){var B=function(){var Ve,Fe=Te(b);return[R?{label:Fe==null?void 0:Fe[re.label],value:b,key:(Ve=Fe==null?void 0:Fe.key)!==null&&Ve!==void 0?Ve:b}:b,gn(Fe)]};if(v&&d){var H=B(),_e=ae(H,2),Ne=_e[0],Ge=_e[1];d(Ne,Ge)}else if(!v&&w&&E!=="clear"){var fe=B(),Be=ae(fe,2),nn=Be[0],fn=Be[1];w(nn,fn)}},Ze=Tn(function(f,b){var v,E=pe?b.selected:!0;E?v=pe?[].concat(Oe(K),[f]):[f]:v=K.filter(function(B){return B.value!==f}),he(v),je(f,E),o==="combobox"?$e(""):(!hn||p)&&(c(""),$e(""))}),en=function(b,v){he(b);var E=v.type,B=v.values;(E==="remove"||E==="clear")&&B.forEach(function(H){je(H.value,!1,E)})},ie=function(b,v){if(c(b),$e(null),v.source==="submit"){var E=(b||"").trim();if(E){var B=Array.from(new Set([].concat(Oe(ge),[E])));he(B),je(E,!0),c("")}return}v.source!=="blur"&&(o==="combobox"&&he(b),S==null||S(b))},un=function(b){var v=b;o!=="tags"&&(v=b.map(function(B){var H=L.get(B);return H==null?void 0:H.value}).filter(function(B){return B!==void 0}));var E=Array.from(new Set([].concat(Oe(ge),Oe(v))));he(E),E.forEach(function(B){je(B,!0)})},We=t.useMemo(function(){var f=$!==!1&&j!==!1;return q(q({},D),{},{flattenOptions:De,onActiveValue:rn,defaultActiveFirstOption:an,onSelect:Ze,menuItemSelectedIcon:V,rawValues:ge,fieldNames:re,virtual:f,listHeight:U,listItemHeight:W,childrenAsData:ce})},[D,De,rn,an,Ze,V,ge,re,$,j,U,W,ce]);return t.createElement(Un.Provider,{value:We},t.createElement(kt,Le({},O,{id:P,prefixCls:r,ref:e,omitDomProps:qt,mode:o,displayValues:Ke,onDisplayValuesChange:en,searchValue:I,onSearch:ie,autoClearSearchValue:p,onSearchSplit:un,dropdownMatchSelectWidth:j,OptionList:jn,emptyOptions:!De.length,activeValue:qe,activeDescendantId:"".concat(P,"_list_").concat(on)})))}),Gn=eo;Gn.Option=Hn;Gn.OptGroup=zn;export{kt as B,Hn as O,Gn as T,zn as a,zt as b,bt as u};
