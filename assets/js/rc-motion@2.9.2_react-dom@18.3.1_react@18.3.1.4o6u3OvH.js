import{l as e,c as n,d as t,a as r,_ as a,f as o,g as i,h as u,b as c,e as s,j as f}from"./@babel_runtime@7.24.7.uphKh7BM.js";import{c as v}from"./classnames@2.5.1.Xo58IrnT.js";import{c as l,p as d,y as m,M as p,b as E,f as y,s as h,N as k}from"./rc-util@5.43.0_react-dom@18.3.1_react@18.3.1.bvtOFkwB.js";import{r as b}from"./react@18.3.1.zIIbIvjs.js";var A=["children"],L=b.createContext({});function g(n){var t=n.children,r=e(n,A);return b.createElement(L.Provider,{value:r},t)}var C=function(e){n(i,e);var o=t(i);function i(){return r(this,i),o.apply(this,arguments)}return a(i,[{key:"render",value:function(){return this.props.children}}]),i}(b.Component),w="none",R="appear",S="enter",P="leave",j="none",N="prepare",O="start",M="active",T="end",x="prepared";function V(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit".concat(e)]="webkit".concat(n),t["Moz".concat(e)]="moz".concat(n),t["ms".concat(e)]="MS".concat(n),t["O".concat(e)]="o".concat(n.toLowerCase()),t}var _,D,z,F=(_=l(),D="undefined"!=typeof window?window:{},z={animationend:V("Animation","AnimationEnd"),transitionend:V("Transition","TransitionEnd")},_&&("AnimationEvent"in D||delete z.animationend.animation,"TransitionEvent"in D||delete z.transitionend.transition),z),I={};if(l()){var K=document.createElement("div");I=K.style}var H={};function U(e){if(H[e])return H[e];var n=F[e];if(n)for(var t=Object.keys(n),r=t.length,a=0;a<r;a+=1){var o=t[a];if(Object.prototype.hasOwnProperty.call(n,o)&&o in I)return H[e]=n[o],H[e]}return""}var W=U("animationend"),q=U("transitionend"),B=!(!W||!q),G=W||"animationend",J=q||"transitionend";function Q(e,n){return e?"object"===o(e)?e[n.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(n):null}const X=function(e){var n=b.useRef();function t(n){n&&(n.removeEventListener(J,e),n.removeEventListener(G,e))}return b.useEffect((function(){return function(){t(n.current)}}),[]),[function(r){n.current&&n.current!==r&&t(n.current),r&&r!==n.current&&(r.addEventListener(J,e),r.addEventListener(G,e),n.current=r)},t]};var Y=l()?b.useLayoutEffect:b.useEffect;var Z=[N,O,M,T],$=[N,x],ee=!1,ne=!0;function te(e){return e===M||e===T}const re=function(e,n,t){var r=m(j),a=i(r,2),o=a[0],u=a[1],c=function(){var e=b.useRef(null);function n(){d.cancel(e.current)}return b.useEffect((function(){return function(){n()}}),[]),[function t(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var o=d((function(){a<=1?r({isCanceled:function(){return o!==e.current}}):t(r,a-1)}));e.current=o},n]}(),s=i(c,2),f=s[0],v=s[1];var l=n?$:Z;return Y((function(){if(o!==j&&o!==T){var e=l.indexOf(o),n=l[e+1],r=t(o);r===ee?u(n,!0):n&&f((function(e){function t(){e.isCanceled()||u(n,!0)}!0===r?t():Promise.resolve(r).then(t)}))}}),[e,o]),b.useEffect((function(){return function(){v()}}),[]),[function(){u(N,!0)},o]};const ae=function(e){var n=e;"object"===o(e)&&(n=e.transitionSupport);var t=b.forwardRef((function(e,t){var r=e.visible,a=void 0===r||r,o=e.removeOnLeave,s=void 0===o||o,f=e.forceRender,l=e.children,d=e.motionName,A=e.leavedClassName,g=e.eventProps,j=function(e,t){return!(!e.motionName||!n||!1===t)}(e,b.useContext(L).motion),T=b.useRef(),V=b.useRef();var _=function(e,n,t,r){var a=r.motionEnter,o=void 0===a||a,s=r.motionAppear,f=void 0===s||s,v=r.motionLeave,l=void 0===v||v,d=r.motionDeadline,y=r.motionLeaveImmediately,h=r.onAppearPrepare,k=r.onEnterPrepare,A=r.onLeavePrepare,L=r.onAppearStart,g=r.onEnterStart,C=r.onLeaveStart,j=r.onAppearActive,T=r.onEnterActive,V=r.onLeaveActive,_=r.onAppearEnd,D=r.onEnterEnd,z=r.onLeaveEnd,F=r.onVisibleChanged,I=m(),K=i(I,2),H=K[0],U=K[1],W=p(w),q=i(W,2),B=q[0],G=q[1],J=m(null),Q=i(J,2),Z=Q[0],$=Q[1],ae=B(),oe=b.useRef(!1),ie=b.useRef(null);function ue(){return t()}var ce=b.useRef(!1);function se(){G(w),$(null,!0)}var fe=E((function(e){var n=B();if(n!==w){var t=ue();if(!e||e.deadline||e.target===t){var r,a=ce.current;n===R&&a?r=null==_?void 0:_(t,e):n===S&&a?r=null==D?void 0:D(t,e):n===P&&a&&(r=null==z?void 0:z(t,e)),a&&!1!==r&&se()}}})),ve=X(fe),le=i(ve,1)[0],de=function(e){switch(e){case R:return c(c(c({},N,h),O,L),M,j);case S:return c(c(c({},N,k),O,g),M,T);case P:return c(c(c({},N,A),O,C),M,V);default:return{}}},me=b.useMemo((function(){return de(ae)}),[ae]),pe=re(ae,!e,(function(e){if(e===N){var n=me[N];return n?n(ue()):ee}var t;return he in me&&$((null===(t=me[he])||void 0===t?void 0:t.call(me,ue(),null))||null),he===M&&ae!==w&&(le(ue()),d>0&&(clearTimeout(ie.current),ie.current=setTimeout((function(){fe({deadline:!0})}),d))),he===x&&se(),ne})),Ee=i(pe,2),ye=Ee[0],he=Ee[1],ke=te(he);ce.current=ke,Y((function(){U(n);var t,r=oe.current;oe.current=!0,!r&&n&&f&&(t=R),r&&n&&o&&(t=S),(r&&!n&&l||!r&&y&&!n&&l)&&(t=P);var a=de(t);t&&(e||a[N])?(G(t),ye()):G(w)}),[n]),b.useEffect((function(){(ae===R&&!f||ae===S&&!o||ae===P&&!l)&&G(w)}),[f,o,l]),b.useEffect((function(){return function(){oe.current=!1,clearTimeout(ie.current)}}),[]);var be=b.useRef(!1);b.useEffect((function(){H&&(be.current=!0),void 0!==H&&ae===w&&((be.current||H)&&(null==F||F(H)),be.current=!0)}),[H,ae]);var Ae=Z;return me[N]&&he===O&&(Ae=u({transition:"none"},Ae)),[ae,he,Ae,null!=H?H:n]}(j,a,(function(){try{return T.current instanceof HTMLElement?T.current:k(V.current)}catch(e){return null}}),e),D=i(_,4),z=D[0],F=D[1],I=D[2],K=D[3],H=b.useRef(K);K&&(H.current=!0);var U,W=b.useCallback((function(e){T.current=e,y(t,e)}),[t]),q=u(u({},g),{},{visible:a});if(l)if(z===w)U=K?l(u({},q),W):!s&&H.current&&A?l(u(u({},q),{},{className:A}),W):f||!s&&!A?l(u(u({},q),{},{style:{display:"none"}}),W):null;else{var B;F===N?B="prepare":te(F)?B="active":F===O&&(B="start");var G=Q(d,"".concat(z,"-").concat(B));U=l(u(u({},q),{},{className:v(Q(d,z),c(c({},G,G&&B),d,"string"==typeof d)),style:I}),W)}else U=null;b.isValidElement(U)&&h(U)&&(U.ref||(U=b.cloneElement(U,{ref:W})));return b.createElement(C,{ref:V},U)}));return t.displayName="CSSMotion",t}(B);var oe="add",ie="keep",ue="remove",ce="removed";function se(e){var n;return n=e&&"object"===o(e)&&"key"in e?e:{key:e},u(u({},n),{},{key:String(n.key)})}function fe(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(se)}var ve=["component","children","onVisibleChanged","onAllRemoved"],le=["status"],de=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];const me=function(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae,v=function(o){n(l,o);var v=t(l);function l(){var e;r(this,l);for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return e=v.call.apply(v,[this].concat(t)),c(s(e),"state",{keyEntities:[]}),c(s(e),"removeKey",(function(n){var t=e.state.keyEntities.map((function(e){return e.key!==n?e:u(u({},e),{},{status:ce})}));return e.setState({keyEntities:t}),t.filter((function(e){return e.status!==ce})).length})),e}return a(l,[{key:"render",value:function(){var n=this,t=this.state.keyEntities,r=this.props,a=r.component,o=r.children,c=r.onVisibleChanged,s=r.onAllRemoved,v=e(r,ve),l=a||b.Fragment,d={};return de.forEach((function(e){d[e]=v[e],delete v[e]})),delete v.keys,b.createElement(l,v,t.map((function(t,r){var a=t.status,v=e(t,le),l=a===oe||a===ie;return b.createElement(i,f({},d,{key:v.key,visible:l,eventProps:v,onVisibleChanged:function(e){(null==c||c(e,{key:v.key}),e)||0===n.removeKey(v.key)&&s&&s()}}),(function(e,n){return o(u(u({},e),{},{index:r}),n)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t=e.keys,r=n.keyEntities,a=fe(t),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],r=0,a=n.length,o=fe(e),i=fe(n);o.forEach((function(e){for(var n=!1,o=r;o<a;o+=1){var c=i[o];if(c.key===e.key){r<o&&(t=t.concat(i.slice(r,o).map((function(e){return u(u({},e),{},{status:oe})}))),r=o),t.push(u(u({},c),{},{status:ie})),r+=1,n=!0;break}}n||t.push(u(u({},e),{},{status:ue}))})),r<a&&(t=t.concat(i.slice(r).map((function(e){return u(u({},e),{},{status:oe})}))));var c={};return t.forEach((function(e){var n=e.key;c[n]=(c[n]||0)+1})),Object.keys(c).filter((function(e){return c[e]>1})).forEach((function(e){(t=t.filter((function(n){var t=n.key,r=n.status;return t!==e||r!==ue}))).forEach((function(n){n.key===e&&(n.status=ie)}))})),t}(r,a);return{keyEntities:o.filter((function(e){var n=r.find((function(n){var t=n.key;return e.key===t}));return!n||n.status!==ce||e.status!==ue}))}}}]),l}(b.Component);return c(v,"defaultProps",{component:"div"}),v}(B);export{ae as C,g as M,me as a};
