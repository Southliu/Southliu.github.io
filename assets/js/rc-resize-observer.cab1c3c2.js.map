{"version":3,"file":"rc-resize-observer.cab1c3c2.js","sources":["../../../node_modules/.pnpm/rc-resize-observer@1.2.1_biqbaboplfbrettd7655fr4n2y/node_modules/rc-resize-observer/es/utils/observerUtil.js","../../../node_modules/.pnpm/rc-resize-observer@1.2.1_biqbaboplfbrettd7655fr4n2y/node_modules/rc-resize-observer/es/SingleObserver/DomWrapper.js","../../../node_modules/.pnpm/rc-resize-observer@1.2.1_biqbaboplfbrettd7655fr4n2y/node_modules/rc-resize-observer/es/Collection.js","../../../node_modules/.pnpm/rc-resize-observer@1.2.1_biqbaboplfbrettd7655fr4n2y/node_modules/rc-resize-observer/es/SingleObserver/index.js","../../../node_modules/.pnpm/rc-resize-observer@1.2.1_biqbaboplfbrettd7655fr4n2y/node_modules/rc-resize-observer/es/index.js"],"sourcesContent":["import ResizeObserver from 'resize-observer-polyfill';\n// =============================== Const ===============================\nvar elementListeners = new Map();\nfunction onResize(entities) {\n  entities.forEach(function (entity) {\n    var _elementListeners$get;\n    var target = entity.target;\n    (_elementListeners$get = elementListeners.get(target)) === null || _elementListeners$get === void 0 ? void 0 : _elementListeners$get.forEach(function (listener) {\n      return listener(target);\n    });\n  });\n}\n// Note: ResizeObserver polyfill not support option to measure border-box resize\nvar resizeObserver = new ResizeObserver(onResize);\n// Dev env only\nexport var _el = process.env.NODE_ENV !== 'production' ? elementListeners : null; // eslint-disable-line\nexport var _rs = process.env.NODE_ENV !== 'production' ? onResize : null; // eslint-disable-line\n// ============================== Observe ==============================\nexport function observe(element, callback) {\n  if (!elementListeners.has(element)) {\n    elementListeners.set(element, new Set());\n    resizeObserver.observe(element);\n  }\n  elementListeners.get(element).add(callback);\n}\nexport function unobserve(element, callback) {\n  if (elementListeners.has(element)) {\n    elementListeners.get(element).delete(callback);\n    if (!elementListeners.get(element).size) {\n      resizeObserver.unobserve(element);\n      elementListeners.delete(element);\n    }\n  }\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\n/**\n * Fallback to findDOMNode if origin ref do not provide any dom element\n */\nvar DomWrapper = /*#__PURE__*/function (_React$Component) {\n  _inherits(DomWrapper, _React$Component);\n  var _super = _createSuper(DomWrapper);\n  function DomWrapper() {\n    _classCallCheck(this, DomWrapper);\n    return _super.apply(this, arguments);\n  }\n  _createClass(DomWrapper, [{\n    key: \"render\",\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n  return DomWrapper;\n}(React.Component);\nexport { DomWrapper as default };","import * as React from 'react';\nexport var CollectionContext = /*#__PURE__*/React.createContext(null);\n/**\n * Collect all the resize event from children ResizeObserver\n */\nexport function Collection(_ref) {\n  var children = _ref.children,\n    onBatchResize = _ref.onBatchResize;\n  var resizeIdRef = React.useRef(0);\n  var resizeInfosRef = React.useRef([]);\n  var onCollectionResize = React.useContext(CollectionContext);\n  var onResize = React.useCallback(function (size, element, data) {\n    resizeIdRef.current += 1;\n    var currentId = resizeIdRef.current;\n    resizeInfosRef.current.push({\n      size: size,\n      element: element,\n      data: data\n    });\n    Promise.resolve().then(function () {\n      if (currentId === resizeIdRef.current) {\n        onBatchResize === null || onBatchResize === void 0 ? void 0 : onBatchResize(resizeInfosRef.current);\n        resizeInfosRef.current = [];\n      }\n    });\n    // Continue bubbling if parent exist\n    onCollectionResize === null || onCollectionResize === void 0 ? void 0 : onCollectionResize(size, element, data);\n  }, [onBatchResize, onCollectionResize]);\n  return /*#__PURE__*/React.createElement(CollectionContext.Provider, {\n    value: onResize\n  }, children);\n}","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { composeRef, supportRef } from \"rc-util/es/ref\";\nimport * as React from 'react';\nimport findDOMNode from \"rc-util/es/Dom/findDOMNode\";\nimport { observe, unobserve } from '../utils/observerUtil';\nimport DomWrapper from './DomWrapper';\nimport { CollectionContext } from '../Collection';\nexport default function SingleObserver(props) {\n  var children = props.children,\n    disabled = props.disabled;\n  var elementRef = React.useRef(null);\n  var wrapperRef = React.useRef(null);\n  var onCollectionResize = React.useContext(CollectionContext);\n  // =========================== Children ===========================\n  var isRenderProps = typeof children === 'function';\n  var mergedChildren = isRenderProps ? children(elementRef) : children;\n  // ============================= Size =============================\n  var sizeRef = React.useRef({\n    width: -1,\n    height: -1,\n    offsetWidth: -1,\n    offsetHeight: -1\n  });\n  // ============================= Ref ==============================\n  var canRef = !isRenderProps && /*#__PURE__*/React.isValidElement(mergedChildren) && supportRef(mergedChildren);\n  var originRef = canRef ? mergedChildren.ref : null;\n  var mergedRef = React.useMemo(function () {\n    return composeRef(originRef, elementRef);\n  }, [originRef, elementRef]);\n  // =========================== Observe ============================\n  var propsRef = React.useRef(props);\n  propsRef.current = props;\n  // Handler\n  var onInternalResize = React.useCallback(function (target) {\n    var _propsRef$current = propsRef.current,\n      onResize = _propsRef$current.onResize,\n      data = _propsRef$current.data;\n    var _target$getBoundingCl = target.getBoundingClientRect(),\n      width = _target$getBoundingCl.width,\n      height = _target$getBoundingCl.height;\n    var offsetWidth = target.offsetWidth,\n      offsetHeight = target.offsetHeight;\n    /**\n     * Resize observer trigger when content size changed.\n     * In most case we just care about element size,\n     * let's use `boundary` instead of `contentRect` here to avoid shaking.\n     */\n    var fixedWidth = Math.floor(width);\n    var fixedHeight = Math.floor(height);\n    if (sizeRef.current.width !== fixedWidth || sizeRef.current.height !== fixedHeight || sizeRef.current.offsetWidth !== offsetWidth || sizeRef.current.offsetHeight !== offsetHeight) {\n      var size = {\n        width: fixedWidth,\n        height: fixedHeight,\n        offsetWidth: offsetWidth,\n        offsetHeight: offsetHeight\n      };\n      sizeRef.current = size;\n      // IE is strange, right?\n      var mergedOffsetWidth = offsetWidth === Math.round(width) ? width : offsetWidth;\n      var mergedOffsetHeight = offsetHeight === Math.round(height) ? height : offsetHeight;\n      var sizeInfo = _objectSpread(_objectSpread({}, size), {}, {\n        offsetWidth: mergedOffsetWidth,\n        offsetHeight: mergedOffsetHeight\n      });\n      // Let collection know what happened\n      onCollectionResize === null || onCollectionResize === void 0 ? void 0 : onCollectionResize(sizeInfo, target, data);\n      if (onResize) {\n        // defer the callback but not defer to next frame\n        Promise.resolve().then(function () {\n          onResize(sizeInfo, target);\n        });\n      }\n    }\n  }, []);\n  // Dynamic observe\n  React.useEffect(function () {\n    var currentElement = findDOMNode(elementRef.current) || findDOMNode(wrapperRef.current);\n    if (currentElement && !disabled) {\n      observe(currentElement, onInternalResize);\n    }\n    return function () {\n      return unobserve(currentElement, onInternalResize);\n    };\n  }, [elementRef.current, disabled]);\n  // ============================ Render ============================\n  return /*#__PURE__*/React.createElement(DomWrapper, {\n    ref: wrapperRef\n  }, canRef ? /*#__PURE__*/React.cloneElement(mergedChildren, {\n    ref: mergedRef\n  }) : mergedChildren);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport { warning } from \"rc-util/es/warning\";\nimport SingleObserver from './SingleObserver';\nimport { Collection } from './Collection';\nvar INTERNAL_PREFIX_KEY = 'rc-observer-key';\nfunction ResizeObserver(props) {\n  var children = props.children;\n  var childNodes = typeof children === 'function' ? [children] : toArray(children);\n  if (process.env.NODE_ENV !== 'production') {\n    if (childNodes.length > 1) {\n      warning(false, 'Find more than one child node with `children` in ResizeObserver. Please use ResizeObserver.Collection instead.');\n    } else if (childNodes.length === 0) {\n      warning(false, '`children` of ResizeObserver is empty. Nothing is in observe.');\n    }\n  }\n  return childNodes.map(function (child, index) {\n    var key = (child === null || child === void 0 ? void 0 : child.key) || \"\".concat(INTERNAL_PREFIX_KEY, \"-\").concat(index);\n    return /*#__PURE__*/React.createElement(SingleObserver, _extends({}, props, {\n      key: key\n    }), child);\n  });\n}\nResizeObserver.Collection = Collection;\nexport default ResizeObserver;"],"names":["elementListeners","onResize","entities","entity","_elementListeners$get","target","listener","resizeObserver","ResizeObserver","observe","element","callback","unobserve","DomWrapper","_React$Component","_inherits","_super","_createSuper","_classCallCheck","_createClass","React.Component","CollectionContext","React.createContext","Collection","_ref","children","onBatchResize","resizeIdRef","React.useRef","resizeInfosRef","onCollectionResize","React.useContext","React.useCallback","size","data","currentId","React.createElement","SingleObserver","props","disabled","elementRef","wrapperRef","isRenderProps","mergedChildren","sizeRef","canRef","React.isValidElement","supportRef","originRef","mergedRef","React.useMemo","composeRef","propsRef","onInternalResize","_propsRef$current","_target$getBoundingCl","width","height","offsetWidth","offsetHeight","fixedWidth","fixedHeight","mergedOffsetWidth","mergedOffsetHeight","sizeInfo","_objectSpread","React.useEffect","currentElement","findDOMNode","React.cloneElement","INTERNAL_PREFIX_KEY","childNodes","toArray","child","index","key","_extends"],"mappings":"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"}