import{j as e,r as t}from"./react@18.2.0.CwGjMYfB.js";import{D as a,T as l,r as n,P as s}from"./index.DyZIspDD.js";import{d as r}from"./dayjs@1.11.11.hE--zua5.js";import{g as o,h as i,i as u,j as c,d as p,k as d,I as m,m as f,n as h,o as v,p as b,q as j,r as g,u as P,U as x}from"./antd@5.20.2_react-dom@18.2.0_react@18.2.0.BEb3_9hr.js";import{u as S}from"./react-i18next@14.1.1_i18next@23.11.4_react-dom@18.2.0_react@18.2.0.CoFanrD1.js";function w(e,t=a){return r.isDayjs(e)?e.format(t):e}function y(e){return r.isDayjs(e)?e:r(e)}function C(e,t=a){if(e)return(null==e?void 0:e.length)>1&&r.isDayjs(null==e?void 0:e[0])&&r.isDayjs(null==e?void 0:e[1])?[e[0].format(t),e[1].format(t)]:e}function D(e){if(e)return(null==e?void 0:e.length)>1&&!r.isDayjs(null==e?void 0:e[0])&&r.isDayjs(null==e?void 0:e[1])?[r(e[0]),e[1]]:(null==e?void 0:e.length)>1&&r.isDayjs(null==e?void 0:e[0])&&!r.isDayjs(null==e?void 0:e[1])?[e[0],r(e[1])]:(null==e?void 0:e.length)>1&&!r.isDayjs(null==e?void 0:e[0])&&!r.isDayjs(null==e?void 0:e[1])?[r(e[0]),r(e[1])]:e}function k(e,t){var l;for(let n=0;n<e.length;n++)if(e[n].name===t)return(null==(l=e[n].componentProps)?void 0:l.format)||a;return a}function N(e,t){var a;for(const l in e){if(2===(null==(a=e[l])?void 0:a.length)&&r.isDayjs(e[l][0])&&r.isDayjs(e[l][1])){const a=k(t,l);e[l]=C(e[l],a)}if((null==e?void 0:e[l])&&r.isDayjs(e[l])){const a=k(t,l);e[l]=w(e[l],a)}}return e}const{RangePicker:T}=o;const{RangePicker:F}=i;function R(e){switch(e){case"Switch":return"checked";case"Upload":return"fileList";default:return"value"}}function G(e,t,n){switch(t){case"Select":return{allowClear:!0,showSearch:!0,optionFilterProp:"label",placeholder:e("public.inputPleaseSelect")};case"TreeSelect":return{allowClear:!0,showSearch:!0,treeNodeFilterProp:"label",placeholder:e("public.inputPleaseSelect")};case"InputNumber":return{placeholder:e("public.inputPleaseEnter"),onPressEnter:n};case"Checkbox":case"CheckboxGroup":return{};case"DatePicker":return{placeholder:e("public.inputPleaseSelect"),format:a};case"RangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[a,a]};case"TimePicker":return{placeholder:e("public.inputPleaseSelect"),format:l};case"TimeRangePicker":return{placeholder:[e("public.inputPleaseSelect"),e("public.inputPleaseSelect")],format:[l,l]};default:return{allowClear:!0,placeholder:e("public.inputPleaseEnter")}}}const A=e=>{const t=JSON.parse(JSON.stringify(e));return delete t.componentProps,t};function E(e){return n.get("/authority/common/games",{params:e})}function I(){return e.jsx("div",{className:"absolute left-50% top-50% -translate-x-1/2 -translate-y-1/2 text-center",children:e.jsx(p,{spinning:!0})})}function K(a){var l;const{t:n}=S(),[s,r]=t.useState(!1),[o,i]=t.useState([]),c={...a};delete c.api,delete c.params,delete c.params2,delete c.params3,delete c.apiResultKey;const p=t.useCallback((async()=>{if(a.api)try{const{api:e,params:t,params2:l,params3:n,apiResultKey:s}=a;if(r(!0),e){const{code:a,data:r}=await e(t,l,n);if(200!==Number(a))return;const o=s?null==r?void 0:r[s]:r;i(o)}}finally{r(!1)}}),[a]);t.useEffect((()=>{a.value&&0===o.length&&p()}),[a.value]);return e.jsx(u,{allowClear:!0,showSearch:!0,maxTagCount:V,placeholder:n("public.inputPleaseSelect"),optionFilterProp:(null==(l=null==c?void 0:c.fieldNames)?void 0:l.label)||"label",...c,loading:s,options:o,notFoundContent:s&&e.jsx(I,{}),onDropdownVisibleChange:e=>{var t;e&&p(),null==(t=a.onDropdownVisibleChange)||t.call(a,e)}})}function _(a){var l;const{t:n}=S(),[s,r]=t.useState(!1),[o,i]=t.useState([]),u={...a};delete u.api,delete u.params,delete u.params2,delete u.params3,delete u.apiResultKey;const p=t.useCallback((async()=>{if(a.api)try{const{api:e,params:t,params2:l,params3:n,apiResultKey:s}=a;if(r(!0),e){const{code:a,data:r}=await e(t,l,n);if(200!==Number(a))return;const o=s?null==r?void 0:r[s]:r;i(o)}}finally{r(!1)}}),[a]);t.useEffect((()=>{a.value&&0===(null==o?void 0:o.length)&&p()}),[a.value]);return e.jsx(c,{allowClear:!0,showSearch:!0,maxTagCount:V,treeNodeFilterProp:(null==(l=null==u?void 0:u.fieldNames)?void 0:l.label)||"label",placeholder:n("public.inputPleaseSelect"),...u,loading:s,treeData:o,notFoundContent:s&&e.jsx(I,{}),onDropdownVisibleChange:e=>{var t;e&&p(),null==(t=a.onDropdownVisibleChange)||t.call(a,e)}})}const V="responsive";function J(t){return e.jsx(e.Fragment,{children:e.jsx(_,{...t,multiple:!0,api:E,fieldNames:{label:"name",value:"id"}})})}function U(e){return n.get("/platform/partner",{params:e})}function z(t){return e.jsx(K,{...t,api:U,mode:"multiple",fieldNames:{label:"name",value:"id"}})}const L=new Map;function O(t,a,l){const{component:n,componentProps:s}=a;if("customize"===n){const{render:t}=a;if(!t)return e.jsx(e.Fragment,{});q("customize",t)}const r=L.get(n);return r?e.jsxs(e.Fragment,{children:[e.jsx(r,{...G(t,n,l),...s}),a.unit&&e.jsx("span",{className:"ml-5px whitespace-nowrap",children:a.unit})]}):e.jsx(e.Fragment,{})}function q(e,t){L.set(e,t)}L.set("Input",m),L.set("TextArea",m.TextArea),L.set("InputNumber",f),L.set("InputPassword",m.Password),L.set("AutoComplete",h),L.set("Select",(function(t){var a;const{t:l}=S();return e.jsx(u,{allowClear:!0,showSearch:!0,maxTagCount:V,placeholder:l("public.inputPleaseSelect"),optionFilterProp:(null==(a=null==t?void 0:t.fieldNames)?void 0:a.label)||"label",...t})})),L.set("TreeSelect",(function(t){var a;const{t:l}=S();return e.jsx(c,{allowClear:!0,showSearch:!0,maxTagCount:V,treeNodeFilterProp:(null==(a=null==t?void 0:t.fieldNames)?void 0:a.label)||"label",placeholder:l("public.inputPleaseSelect"),...t})})),L.set("Checkbox",v),L.set("CheckboxGroup",v.Group),L.set("RadioGroup",b.Group),L.set("Switch",j),L.set("Rate",g),L.set("Slider",P),L.set("Upload",x),L.set("Transfer",(function(a){const{value:l}=a,[n,s]=t.useState(l||[]);return e.jsx(d,{...a,targetKeys:n,onChange:e=>{var t;s(e),null==(t=null==a?void 0:a.onChange)||t.call(a,e)}})})),L.set("DatePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=y(a)),e.jsx(o,{...l})})),L.set("RangePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=D(a)),e.jsx(T,{...l})})),L.set("TimePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=y(a)),e.jsx(i,{...l})})),L.set("TimeRangePicker",(function(t){const{value:a}=t,l={...t};return a&&(l.value=D(a)),e.jsx(F,{...l})})),L.set("ApiSelect",K),L.set("ApiTreeSelect",_),L.set("PasswordStrength",s),q("GameSelect",J),q("PartnerSelect",z);export{q as a,O as b,N as c,A as f,E as g,R as h};
