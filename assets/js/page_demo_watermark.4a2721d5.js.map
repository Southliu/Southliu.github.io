{"version":3,"file":"page_demo_watermark.4a2721d5.js","sources":["../../../src/hooks/useWatermark.ts","../../../src/pages/demo/watermark/index.tsx"],"sourcesContent":["interface IOption {\n  content: string; // 内容\n  height: number; // 水印行高\n  width: number; // 水印宽度\n  rotate: number; // 旋转度数（可为负值）\n  color: string; // 水印字体颜色\n  fontSize: number; // 水印字体的大小\n  opacity: number; // 水印透明度（0~1之间取值）\n}\n\n/**\n * 水印\n */\nexport function useWatermark() {\n  /**\n   * 水印\n   * @param options - 操作值\n   */\n  const Watermark = (options: IOption) => {\n    const {\n      content,\n      height,\n      width,\n      rotate,\n      color,\n      fontSize,\n      opacity\n    } = options\n\n    // 判断水印是否存在，如果存在，那么不执行\n    if (document.getElementById('south_watermark') !== null) {\n      return\n    }\n    const TpLine = Math.floor(document.body.clientWidth / width) * 2 // 一行显示几列\n    let StrLine = ''\n    for (let i = 0; i < TpLine; i++) {\n      const style = `\n        display: inline-block;\n        line-height: ${height}px;\n        width: ${width}px;\n        text-align: center;\n        transform:rotate( ${rotate}deg);\n        color: ${color};\n        font-size: ${fontSize}px;\n        opacity: ${opacity};\n        `\n      StrLine += `\n        <span style=\"${style}\">\n          ${content}\n        </span>\n      `\n    }\n    const DivLine = document.createElement('div')\n    DivLine.innerHTML = StrLine\n\n    const TpColumn = (Math.floor(document.body.clientHeight / height) * 2) || 4 // 一列显示几行\n\n    let StrColumn = ''\n    for (let i = 0; i < TpColumn; i++) {\n      StrColumn += `<div style=\"white-space: nowrap;\">${DivLine.innerHTML}</div>`\n    }\n    const DivLayer = document.createElement('div')\n    DivLayer.innerHTML = StrColumn\n    DivLayer.id = 'south_watermark' // 给水印盒子添加类名\n    DivLayer.style.position = 'fixed'\n    DivLayer.style.top = '0px' // 整体水印距离顶部距离\n    DivLayer.style.left = '-100px' // 改变整体水印的left值\n    DivLayer.style.zIndex = '999999' // 水印页面层级\n    DivLayer.style.pointerEvents = 'none'\n    DivLayer.style.userSelect = 'none'\n\n    document.body.appendChild(DivLayer) // 到页面中\n  }\n\n  /** 删除水印 */\n  const RemoveWatermark = () => {\n    // 判断水印是否存在，如果存在，那么执行\n    if (document.getElementById('south_watermark') === null) {\n      return\n    } \n    if (document.getElementById('south_watermark') !== null) {\n      const element = document.getElementById('south_watermark')\n      document.body.removeChild(element as HTMLElement)\n    }\n  }\n\n  return [Watermark, RemoveWatermark] as const\n}","import { Button } from 'antd'\nimport { useTitle } from '@/hooks/useTitle'\nimport { useWatermark } from '@/hooks/useWatermark'\n\nfunction Watermark() {\n  useTitle('水印')\n  const [Watermark, RemoveWatermark] = useWatermark()\n  \n  const openWatermark = () => {\n    Watermark({\n      content: '这是水印',\n      height: 300,\n      width: 350,\n      rotate: -20,\n      color: '#000',\n      fontSize: 30,\n      opacity: .07\n    })\n  }\n\n  const hidWatermark = () => {\n    RemoveWatermark()\n  }\n\n  return (\n    <div className=\"p-30px\">\n      <Button onClick={openWatermark}>\n        打开水印\n      </Button>\n      <Button danger onClick={hidWatermark}>\n        隐藏水印\n      </Button>\n    </div>\n  )\n}\n\nexport default Watermark"],"names":["useWatermark","options","content","height","width","rotate","color","fontSize","opacity","TpLine","StrLine","i","style","DivLine","TpColumn","StrColumn","DivLayer","element","Watermark","useTitle","RemoveWatermark","jsxs","jsx","Button"],"mappings":"yJAaO,SAASA,GAAe,CAyEtB,MAAA,CApEYC,GAAqB,CAChC,KAAA,CACJ,QAAAC,EACA,OAAAC,EACA,MAAAC,EACA,OAAAC,EACA,MAAAC,EACA,SAAAC,EACA,QAAAC,CACE,EAAAP,EAGJ,GAAI,SAAS,eAAe,iBAAiB,IAAM,KACjD,OAEF,MAAMQ,EAAS,KAAK,MAAM,SAAS,KAAK,YAAcL,CAAK,EAAI,EAC/D,IAAIM,EAAU,GACd,QAASC,EAAI,EAAGA,EAAIF,EAAQE,IAAK,CAC/B,MAAMC,EAAQ;AAAA;AAAA,uBAEGT;AAAA,iBACNC;AAAA;AAAA,4BAEWC;AAAA,iBACXC;AAAA,qBACIC;AAAA,mBACFC;AAAA,UAEFE,GAAA;AAAA,uBACME;AAAA,YACXV;AAAA;AAAA,OAGR,CACM,MAAAW,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAYH,EAEd,MAAAI,EAAY,KAAK,MAAM,SAAS,KAAK,aAAeX,CAAM,EAAI,GAAM,EAE1E,IAAIY,EAAY,GAChB,QAASJ,EAAI,EAAGA,EAAIG,EAAUH,IAC5BI,GAAa,qCAAqCF,EAAQ,kBAEtD,MAAAG,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAYD,EACrBC,EAAS,GAAK,kBACdA,EAAS,MAAM,SAAW,QAC1BA,EAAS,MAAM,IAAM,MACrBA,EAAS,MAAM,KAAO,SACtBA,EAAS,MAAM,OAAS,SACxBA,EAAS,MAAM,cAAgB,OAC/BA,EAAS,MAAM,WAAa,OAEnB,SAAA,KAAK,YAAYA,CAAQ,CAAA,EAIZ,IAAM,CAE5B,GAAI,SAAS,eAAe,iBAAiB,IAAM,MAG/C,SAAS,eAAe,iBAAiB,IAAM,KAAM,CACjD,MAAAC,EAAU,SAAS,eAAe,iBAAiB,EAChD,SAAA,KAAK,YAAYA,CAAsB,CAClD,CAAA,CAGgC,CACpC,CCnFA,SAASC,GAAY,CACnBC,EAAS,IAAI,EACb,KAAM,CAACD,EAAWE,CAAe,EAAIpB,EAAa,EAmBhD,OAAAqB,EAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACC,EAAAC,EAAA,CAAO,QAlBU,IAAM,CAC1BL,EAAU,CACR,QAAS,OACT,OAAQ,IACR,MAAO,IACP,OAAQ,IACR,MAAO,OACP,SAAU,GACV,QAAS,GAAA,CACV,CAAA,EASiC,SAEhC,OAAA,IACCK,EAAO,CAAA,OAAM,GAAC,QATE,IAAM,CACTH,GAAA,EAQwB,SAEtC,OAAA,CACF,CAAA,CAAA,CAEJ"}