{"version":3,"file":"components_Modal.286f4c6a.js","sources":["../../../src/components/Modal/BasicModal.tsx"],"sourcesContent":["import type { ReactNode } from 'react'\nimport type { ModalProps } from 'antd'\nimport type { DraggableData, DraggableEvent } from 'react-draggable'\nimport { useRef, useState } from 'react'\nimport { Modal, Tooltip } from 'antd'\nimport { Icon } from '@iconify/react'\nimport Draggable from 'react-draggable'\n\ninterface IProps extends Omit<ModalProps, 'onCancel'> {\n  onCancel: () => void;\n}\n\nfunction BasicModal(props: IProps) {\n  const { width, children, wrapClassName, onCancel } = props\n  const [isDisabled, setDisabled] = useState(true)\n  const [isFullscreen, setFullscreen] = useState(false)\n  const [bounds, setBounds] = useState({ left: 0, top: 0, bottom: 0, right: 0 })\n  const draggleRef = useRef<HTMLDivElement>(null)\n\n  /** 开始拖拽对话框 */\n  const onStartMouse = (_event: DraggableEvent, uiData: DraggableData) => {\n    const { clientWidth, clientHeight } = window.document.documentElement\n    const targetRect = draggleRef.current?.getBoundingClientRect()\n    if (!targetRect) return\n    setBounds({\n      left: -targetRect.left + uiData.x,\n      right: clientWidth - (targetRect.right - uiData.x),\n      top: -targetRect.top + uiData.y,\n      bottom: clientHeight - (targetRect.bottom - uiData.y),\n    })\n  }\n\n  /** 鼠标拖拽结束 */\n  const onMouseOver = () => {\n    if (isDisabled) {\n      setDisabled(false)\n    }\n  }\n\n  /** 最大化 */\n  const onFullscreen = () => {\n    setFullscreen(value => {\n      if (!value) setBounds({ left: 0, top: 0, bottom: 0, right: 0 })\n      return !value\n    })\n  }\n\n  /** 自定义关闭和放大图标 */\n  const CloseRender = () => (\n    <div className=\"flex items-center justify-end absolute right-15px\">\n      <Tooltip\n        className=\"hover:text-#404040\"\n        placement=\"bottom\"\n        title={!isFullscreen ? '最大化' : '退出最大化'}\n      >\n        <div\n          className='p-10px mt-3px cursor-pointer'\n          onClick={onFullscreen}\n        >\n          <Icon\n            className=\"text-lg\"\n            icon={!isFullscreen ? 'ant-design:fullscreen-outlined' : 'ant-design:fullscreen-exit-outlined'}\n          />\n        </div>\n      </Tooltip>\n      <Tooltip\n        placement=\"bottom\"\n        title=\"关闭\"\n      >\n        <div\n          className='p-10px mt-3px cursor-pointer'\n          onClick={() => onCancel?.()}\n        >\n          <Icon\n            className=\"text-lg\"\n            icon=\"ant-design:close-outlined\"\n          />\n        </div>\n      </Tooltip>\n    </div>\n  )\n\n  /** 自定义标题 */\n  const titleRender = (\n    <div\n      className=\"w-full cursor-move flex items-center justify-between\"\n      onMouseOver={onMouseOver}\n      onMouseOut={() => setDisabled(true)}\n    >\n      <span>\n        { props.title || '' }\n      </span>\n\n      { CloseRender() }\n    </div>\n  )\n\n  /** 自定义渲染对话框 */\n  const modalRender = (modal: ReactNode) => (\n    <Draggable\n      disabled={isDisabled}\n      onStart={onStartMouse}\n      bounds={isFullscreen ? undefined : bounds}\n      position={isFullscreen ? { x: 0, y: 0 } : undefined}\n    >\n      <div ref={draggleRef}>\n        {modal}\n      </div>\n    </Draggable>\n  )\n\n  return (\n    <Modal\n      destroyOnClose\n      closable={false}\n      maskClosable={false}\n      modalRender={modalRender}\n      {...props}\n      title={titleRender}\n      wrapClassName={isFullscreen ? 'full-modal' : wrapClassName || ''}\n      width={isFullscreen ? '100%' : width || 520}\n    >\n      { children }\n    </Modal>\n  )\n}\n\nexport default BasicModal"],"names":["BasicModal","props","width","children","wrapClassName","onCancel","isDisabled","setDisabled","useState","isFullscreen","setFullscreen","bounds","setBounds","draggleRef","useRef","onStartMouse","_event","uiData","clientWidth","clientHeight","targetRect","_a","onMouseOver","onFullscreen","value","CloseRender","jsxs","jsx","Tooltip","Icon","titleRender","Modal","modal","Draggable"],"mappings":"oPAYA,SAASA,EAAWC,EAAe,CACjC,KAAM,CAAE,MAAAC,EAAO,SAAAC,EAAU,cAAAC,EAAe,SAAAC,GAAaJ,EAC/C,CAACK,EAAYC,CAAW,EAAIC,WAAS,EAAI,EACzC,CAACC,EAAcC,CAAa,EAAIF,WAAS,EAAK,EAC9C,CAACG,EAAQC,CAAS,EAAIJ,WAAS,CAAE,KAAM,EAAG,IAAK,EAAG,OAAQ,EAAG,MAAO,CAAG,CAAA,EACvEK,EAAaC,SAAuB,IAAI,EAGxCC,EAAe,CAACC,EAAwBC,IAA0B,OACtE,KAAM,CAAE,YAAAC,EAAa,aAAAC,CAAa,EAAI,OAAO,SAAS,gBAChDC,GAAaC,EAAAR,EAAW,UAAX,YAAAQ,EAAoB,wBAClCD,GACKR,EAAA,CACR,KAAM,CAACQ,EAAW,KAAOH,EAAO,EAChC,MAAOC,GAAeE,EAAW,MAAQH,EAAO,GAChD,IAAK,CAACG,EAAW,IAAMH,EAAO,EAC9B,OAAQE,GAAgBC,EAAW,OAASH,EAAO,EAAA,CACpD,CAAA,EAIGK,EAAc,IAAM,CACpBhB,GACFC,EAAY,EAAK,CACnB,EAIIgB,EAAe,IAAM,CACzBb,EAAuBc,IAChBA,GAAiBZ,EAAA,CAAE,KAAM,EAAG,IAAK,EAAG,OAAQ,EAAG,MAAO,CAAA,CAAG,EACvD,CAACY,EACT,CAAA,EAIGC,EAAc,IACjBC,EAAA,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAC,EAACC,EAAA,CACC,UAAU,qBACV,UAAU,SACV,MAAQnB,EAAuB,QAAR,MAEvB,SAAAkB,EAAC,MAAA,CACC,UAAU,+BACV,QAASJ,EAET,SAAAI,EAACE,EAAA,CACC,UAAU,UACV,KAAOpB,EAAkD,sCAAnC,gCAAmC,CAC3D,CAAA,CACF,CAAA,CACF,EACAkB,EAACC,EAAA,CACC,UAAU,SACV,MAAM,KAEN,SAAAD,EAAC,MAAA,CACC,UAAU,+BACV,QAAS,IAAMtB,GAAA,YAAAA,IAEf,SAAAsB,EAACE,EAAA,CACC,UAAU,UACV,KAAK,2BAAA,CACP,CAAA,CACF,CAAA,CACF,CACF,CAAA,CAAA,EAIIC,EACJJ,EAAC,MAAA,CACC,UAAU,uDACV,YAAAJ,EACA,WAAY,IAAMf,EAAY,EAAI,EAElC,SAAA,CAACoB,EAAA,OAAA,CACG,SAAM1B,EAAA,OAAS,GACnB,EAEEwB,EAAY,CAAA,CAAA,CAAA,EAmBhB,OAAAE,EAACI,EAAA,CACC,eAAc,GACd,SAAU,GACV,aAAc,GACd,YAlBiBC,GACnBL,EAACM,EAAA,CACC,SAAU3B,EACV,QAASS,EACT,OAAQN,EAAe,OAAYE,EACnC,SAAUF,EAAe,CAAE,EAAG,EAAG,EAAG,CAAM,EAAA,OAE1C,SAACkB,EAAA,MAAA,CAAI,IAAKd,EACP,SACHmB,EAAA,CAAA,CAAA,EAUC,GAAG/B,EACJ,MAAO6B,EACP,cAAerB,EAAe,aAAeL,GAAiB,GAC9D,MAAOK,EAAe,OAASP,GAAS,IAEtC,SAAAC,CAAA,CAAA,CAGR"}