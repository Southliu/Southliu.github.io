import{e as d,d as z}from"./@babel_runtime.d5939a32.js";import{r}from"./react.402eeaf7.js";import{r as B}from"./react-dom.1f6fe482.js";import{c as _,h as p,k as A,u as N,r as b,s as Y,l as j}from"./rc-util.aac9ba6f.js";var F=r.createContext(null),I=[];function J(e,t){var a=r.useState(function(){if(!_())return null;var u=document.createElement("div");return u}),s=d(a,1),n=s[0],o=r.useRef(!1),c=r.useContext(F),i=r.useState(I),m=d(i,2),f=m[0],S=m[1],$=c||(o.current?void 0:function(u){S(function(l){var y=[u].concat(z(l));return y})});function v(){n.parentElement||document.body.appendChild(n),o.current=!0}function R(){var u;(u=n.parentElement)===null||u===void 0||u.removeChild(n),o.current=!1}return p(function(){return e?c?c(v):v():R(),R},[e]),p(function(){f.length&&(f.forEach(function(u){return u()}),S(I))},[f]),[n,$]}function K(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var V="rc-util-locker-".concat(Date.now()),Q=0;function X(e){var t=!!e,a=r.useState(function(){return Q+=1,"".concat(V,"_").concat(Q)}),s=d(a,1),n=s[0];p(function(){if(t){var o=A(),c=K();N(`
html body {
  overflow-y: hidden;
  `.concat(c?"width: calc(100% - ".concat(o,"px);"):"",`
}`),n)}else b(n);return function(){b(n)}},[t,n])}var H=!1;function Z(e){return typeof e=="boolean"&&(H=e),H}var T=function(t){return t===!1?!1:!_()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},le=r.forwardRef(function(e,t){var a=e.open,s=e.autoLock,n=e.getContainer;e.debug;var o=e.autoDestroy,c=o===void 0?!0:o,i=e.children,m=r.useState(a),f=d(m,2),S=f[0],$=f[1],v=S||a;r.useEffect(function(){(c||a)&&$(a)},[a,c]);var R=r.useState(function(){return T(n)}),u=d(R,2),l=u[0],y=u[1];r.useEffect(function(){var C=T(n);y(C??null)});var k=J(v&&!l),g=d(k,2),w=g[0],P=g[1],h=l??w;X(s&&a&&_()&&(h===w||h===document.body));var D=null;if(i&&Y(i)&&t){var L=i;D=L.ref}var x=j(D,t);if(!v||!_()||l===void 0)return null;var q=h===!1||Z(),E=i;return t&&(E=r.cloneElement(i,{ref:x})),r.createElement(F.Provider,{value:P},q?E:B.createPortal(E,h))}),G=r.createContext(null),U=[];function ee(e,t){var a=r.useState(function(){if(!_())return null;var u=document.createElement("div");return u}),s=d(a,1),n=s[0],o=r.useRef(!1),c=r.useContext(G),i=r.useState(U),m=d(i,2),f=m[0],S=m[1],$=c||(o.current?void 0:function(u){S(function(l){var y=[u].concat(z(l));return y})});function v(){n.parentElement||document.body.appendChild(n),o.current=!0}function R(){var u;(u=n.parentElement)===null||u===void 0||u.removeChild(n),o.current=!1}return p(function(){return e?c?c(v):v():R(),R},[e]),p(function(){f.length&&(f.forEach(function(u){return u()}),S(U))},[f]),[n,$]}function te(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var ne="rc-util-locker-".concat(Date.now()),M=0;function re(e){var t=!!e,a=r.useState(function(){return M+=1,"".concat(ne,"_").concat(M)}),s=d(a,1),n=s[0];p(function(){if(t){var o=A(),c=te();N(`
html body {
  overflow-y: hidden;
  `.concat(c?"width: calc(100% - ".concat(o,"px);"):"",`
}`),n)}else b(n);return function(){b(n)}},[t,n])}var O=!1;function ue(e){return typeof e=="boolean"&&(O=e),O}var W=function(t){return t===!1?!1:!_()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},fe=r.forwardRef(function(e,t){var a=e.open,s=e.autoLock,n=e.getContainer;e.debug;var o=e.autoDestroy,c=o===void 0?!0:o,i=e.children,m=r.useState(a),f=d(m,2),S=f[0],$=f[1],v=S||a;r.useEffect(function(){(c||a)&&$(a)},[a,c]);var R=r.useState(function(){return W(n)}),u=d(R,2),l=u[0],y=u[1];r.useEffect(function(){var C=W(n);y(C??null)});var k=ee(v&&!l),g=d(k,2),w=g[0],P=g[1],h=l??w;re(s&&a&&_()&&(h===w||h===document.body));var D=null;if(i&&Y(i)&&t){var L=i;D=L.ref}var x=j(D,t);if(!v||!_()||l===void 0)return null;var q=h===!1||ue(),E=i;return t&&(E=r.cloneElement(i,{ref:x})),r.createElement(G.Provider,{value:P},q?E:B.createPortal(E,h))});export{le as P,fe as a};
