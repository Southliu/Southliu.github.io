import{r as d,R as c}from"./react.8249fdc7.js";import{c as _}from"./classnames.2e4736b8.js";import{i as h,k as Y,al as p,j as Q,f as U,_ as ee}from"./inheritsLoose.4207bb94.js";import{h as ne,o as ae}from"./rc-util.30994db3.js";function V(e){return!!(e.addonBefore||e.addonAfter)}function Z(e){return!!(e.prefix||e.suffix||e.allowClear)}function W(e,n,i,t){if(i){var r=n;if(n.type==="click"){var o=e.cloneNode(!0);r=Object.create(n,{target:{value:o},currentTarget:{value:o}}),o.value="",i(r);return}if(t!==void 0){r=Object.create(n,{target:{value:e},currentTarget:{value:e}}),e.value=t,i(r);return}i(r)}}function te(e,n){if(e){e.focus(n);var i=n||{},t=i.cursor;if(t){var r=e.value.length;switch(t){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}function X(e){return typeof e>"u"||e===null?"":String(e)}var re=function(n){var i=n.inputElement,t=n.prefixCls,r=n.prefix,o=n.suffix,B=n.addonBefore,x=n.addonAfter,F=n.className,v=n.style,N=n.affixWrapperClassName,H=n.groupClassName,$=n.wrapperClassName,y=n.disabled,E=n.readOnly,w=n.focused,b=n.triggerFocus,s=n.allowClear,R=n.value,T=n.handleReset,k=n.hidden,D=d.useRef(null),z=function(m){var g;(g=D.current)!==null&&g!==void 0&&g.contains(m.target)&&(b==null||b())},O=function(){var m;if(!s)return null;var g=!y&&!E&&R,K="".concat(t,"-clear-icon"),u=Y(s)==="object"&&s!==null&&s!==void 0&&s.clearIcon?s.clearIcon:"âœ–";return c.createElement("span",{onClick:T,onMouseDown:function(I){return I.preventDefault()},className:_(K,(m={},h(m,"".concat(K,"-hidden"),!g),h(m,"".concat(K,"-has-suffix"),!!o),m)),role:"button",tabIndex:-1},u)},A=d.cloneElement(i,{value:R,hidden:k});if(Z(n)){var f,C="".concat(t,"-affix-wrapper"),j=_(C,(f={},h(f,"".concat(C,"-disabled"),y),h(f,"".concat(C,"-focused"),w),h(f,"".concat(C,"-readonly"),E),h(f,"".concat(C,"-input-with-clear-btn"),o&&s&&R),f),!V(n)&&F,N),l=(o||s)&&c.createElement("span",{className:"".concat(t,"-suffix")},O(),o);A=c.createElement("span",{className:j,style:v,hidden:!V(n)&&k,onClick:z,ref:D},r&&c.createElement("span",{className:"".concat(t,"-prefix")},r),d.cloneElement(i,{style:null,value:R,hidden:null}),l)}if(V(n)){var S="".concat(t,"-group"),L="".concat(S,"-addon"),q=_("".concat(t,"-wrapper"),S,$),G=_("".concat(t,"-group-wrapper"),F,H);return c.createElement("span",{className:G,style:v,hidden:k},c.createElement("span",{className:q},B&&c.createElement("span",{className:L},B),d.cloneElement(A,{style:null,hidden:null}),x&&c.createElement("span",{className:L},x)))}return A},ue=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName"],se=d.forwardRef(function(e,n){var i=e.autoComplete,t=e.onChange,r=e.onFocus,o=e.onBlur,B=e.onPressEnter,x=e.onKeyDown,F=e.prefixCls,v=F===void 0?"rc-input":F,N=e.disabled,H=e.htmlSize,$=e.className,y=e.maxLength,E=e.suffix,w=e.showCount,b=e.type,s=b===void 0?"text":b,R=e.inputClassName,T=p(e,ue),k=ne(e.defaultValue,{value:e.value}),D=Q(k,2),z=D[0],O=D[1],A=d.useState(!1),f=Q(A,2),C=f[0],j=f[1],l=d.useRef(null),S=function(a){l.current&&te(l.current,a)};d.useImperativeHandle(n,function(){return{focus:S,blur:function(){var a;(a=l.current)===null||a===void 0||a.blur()},setSelectionRange:function(a,I,P){var M;(M=l.current)===null||M===void 0||M.setSelectionRange(a,I,P)},select:function(){var a;(a=l.current)===null||a===void 0||a.select()},input:l.current}}),d.useEffect(function(){j(function(u){return u&&N?!1:u})},[N]);var L=function(a){e.value===void 0&&O(a.target.value),l.current&&W(l.current,a,t)},q=function(a){B&&a.key==="Enter"&&B(a),x==null||x(a)},G=function(a){j(!0),r==null||r(a)},J=function(a){j(!1),o==null||o(a)},m=function(a){O(""),S(),l.current&&W(l.current,a,t)},g=function(){var a=ae(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","wrapperClassName","htmlSize"]);return c.createElement("input",U({autoComplete:i},a,{onChange:L,onFocus:G,onBlur:J,onKeyDown:q,className:_(v,h({},"".concat(v,"-disabled"),N),R,!V(e)&&!Z(e)&&$),ref:l,size:H,type:s}))},K=function(){var a=Number(y)>0;if(E||w){var I=X(z),P=ee(I).length,M=Y(w)==="object"?w.formatter({value:I,count:P,maxLength:y}):"".concat(P).concat(a?" / ".concat(y):"");return c.createElement(c.Fragment,null,!!w&&c.createElement("span",{className:_("".concat(v,"-show-count-suffix"),h({},"".concat(v,"-show-count-has-suffix"),!!E))},M),E)}return null};return c.createElement(re,U({},T,{prefixCls:v,className:$,inputElement:g(),handleReset:m,value:X(z),focused:C,triggerFocus:S,suffix:K(),disabled:N}))});export{se as I};
