import{h as e,d as t,e as n}from"./@babel_runtime.d775819b.js";import{r as o,e as r}from"./react.a7da97a2.js";import{P as a}from"./@rc-component_portal.e0cb7306.js";import{c}from"./classnames.71976509.js";import{p as s,C as l,D as i,K as u}from"./rc-util.b2252098.js";import{C as m}from"./rc-motion.477113fa.js";function f(e,t,n){var o=t;return!o&&n&&(o="".concat(e,"-").concat(n)),o}function d(e,t){var n=e["page".concat(t?"Y":"X","Offset")],o="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var r=e.document;"number"!=typeof(n=r.documentElement[o])&&(n=r.body[o])}return n}const v=o.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate}));var p={width:0,height:0,overflow:"hidden",outline:"none"},y=r.forwardRef((function(n,a){var s=n.prefixCls,l=n.className,i=n.style,u=n.title,m=n.ariaId,f=n.footer,d=n.closable,y=n.closeIcon,C=n.onClose,b=n.children,E=n.bodyStyle,h=n.bodyProps,N=n.modalRender,g=n.onMouseDown,k=n.onMouseUp,x=n.holderRef,R=n.visible,w=n.forceRender,I=n.width,P=n.height,D=o.useRef(),S=o.useRef();r.useImperativeHandle(a,(function(){return{focus:function(){var e;null===(e=D.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===S.current?D.current.focus():e||t!==D.current||S.current.focus()}}}));var O,T,j,A={};void 0!==I&&(A.width=I),void 0!==P&&(A.height=P),f&&(O=r.createElement("div",{className:"".concat(s,"-footer")},f)),u&&(T=r.createElement("div",{className:"".concat(s,"-header")},r.createElement("div",{className:"".concat(s,"-title"),id:m},u))),d&&(j=r.createElement("button",{type:"button",onClick:C,"aria-label":"Close",className:"".concat(s,"-close")},y||r.createElement("span",{className:"".concat(s,"-close-x")})));var M=r.createElement("div",{className:"".concat(s,"-content")},j,T,r.createElement("div",e({className:"".concat(s,"-body"),style:E},h),b),O);return r.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":u?m:null,"aria-modal":"true",ref:x,style:t(t({},i),A),className:c(s,l),onMouseDown:g,onMouseUp:k},r.createElement("div",{tabIndex:0,ref:D,style:p,"aria-hidden":"true"}),r.createElement(v,{shouldUpdate:R||w},N?N(M):M),r.createElement("div",{tabIndex:0,ref:S,style:p,"aria-hidden":"true"}))})),C=o.forwardRef((function(r,a){var s=r.prefixCls,l=r.title,i=r.style,u=r.className,f=r.visible,v=r.forceRender,p=r.destroyOnClose,C=r.motionName,b=r.ariaId,E=r.onVisibleChanged,h=r.mousePosition,N=o.useRef(),g=o.useState(),k=n(g,2),x=k[0],R=k[1],w={};function I(){var e,t,n,o,r,a=(e=N.current,t=e.getBoundingClientRect(),n={left:t.left,top:t.top},o=e.ownerDocument,r=o.defaultView||o.parentWindow,n.left+=d(r),n.top+=d(r,!0),n);R(h?"".concat(h.x-a.left,"px ").concat(h.y-a.top,"px"):"")}return x&&(w.transformOrigin=x),o.createElement(m,{visible:f,onVisibleChanged:E,onAppearPrepare:I,onEnterPrepare:I,forceRender:v,motionName:C,removeOnLeave:p,ref:N},(function(n,m){var f=n.className,d=n.style;return o.createElement(y,e({},r,{ref:a,title:l,ariaId:b,prefixCls:s,holderRef:m,style:t(t(t({},d),i),w),className:c(u,f)}))}))}));function b(n){var r=n.prefixCls,a=n.style,s=n.visible,l=n.maskProps,i=n.motionName;return o.createElement(m,{key:"mask",visible:s,motionName:i,leavedClassName:"".concat(r,"-mask-hidden")},(function(n,s){var i=n.className,u=n.style;return o.createElement("div",e({ref:s,style:t(t({},u),a),className:c("".concat(r,"-mask"),i)},l))}))}function E(r){var a=r.prefixCls,m=void 0===a?"rc-dialog":a,d=r.zIndex,v=r.visible,p=void 0!==v&&v,y=r.keyboard,E=void 0===y||y,h=r.focusTriggerAfterClose,N=void 0===h||h,g=r.wrapStyle,k=r.wrapClassName,x=r.wrapProps,R=r.onClose,w=r.afterOpenChange,I=r.afterClose,P=r.transitionName,D=r.animation,S=r.closable,O=void 0===S||S,T=r.mask,j=void 0===T||T,A=r.maskTransitionName,M=r.maskAnimation,U=r.maskClosable,V=void 0===U||U,z=r.maskStyle,K=r.maskProps,L=r.rootClassName,B=o.useRef(),_=o.useRef(),q=o.useRef(),H=o.useState(p),W=n(H,2),X=W[0],Y=W[1],F=s();function G(e){null==R||R(e)}var J=o.useRef(!1),Q=o.useRef(),Z=null;return V&&(Z=function(e){J.current?J.current=!1:_.current===e.target&&G(e)}),o.useEffect((function(){p&&(Y(!0),i(_.current,document.activeElement)||(B.current=document.activeElement))}),[p]),o.useEffect((function(){return function(){clearTimeout(Q.current)}}),[]),o.createElement("div",e({className:c("".concat(m,"-root"),L)},l(r,{data:!0})),o.createElement(b,{prefixCls:m,visible:j&&p,motionName:f(m,A,M),style:t({zIndex:d},z),maskProps:K}),o.createElement("div",e({tabIndex:-1,onKeyDown:function(e){if(E&&e.keyCode===u.ESC)return e.stopPropagation(),void G(e);p&&e.keyCode===u.TAB&&q.current.changeActive(!e.shiftKey)},className:c("".concat(m,"-wrap"),k),ref:_,onClick:Z,style:t(t({zIndex:d},g),{},{display:X?null:"none"})},x),o.createElement(C,e({},r,{onMouseDown:function(){clearTimeout(Q.current),J.current=!0},onMouseUp:function(){Q.current=setTimeout((function(){J.current=!1}))},ref:q,closable:O,ariaId:F,prefixCls:m,visible:p&&X,onClose:G,onVisibleChanged:function(e){if(e)i(_.current,document.activeElement)||null===(t=q.current)||void 0===t||t.focus();else{if(Y(!1),j&&B.current&&N){try{B.current.focus({preventScroll:!0})}catch(n){}B.current=null}X&&(null==I||I())}var t;null==w||w(e)},motionName:f(m,P,D)}))))}C.displayName="Content";var h=function(t){var r=t.visible,c=t.getContainer,s=t.forceRender,l=t.destroyOnClose,i=void 0!==l&&l,u=t.afterClose,m=o.useState(r),f=n(m,2),d=f[0],v=f[1];return o.useEffect((function(){r&&v(!0)}),[r]),s||!i||d?o.createElement(a,{open:r||s||d,autoDestroy:!1,getContainer:c,autoLock:r||d},o.createElement(E,e({},t,{destroyOnClose:i,afterClose:function(){null==u||u(),v(!1)}}))):null};h.displayName="Dialog";export{h as D,y as P};
