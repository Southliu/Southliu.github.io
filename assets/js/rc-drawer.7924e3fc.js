import{e as d,c as _,h as z,f as L}from"./@babel_runtime.0b96ec9f.js";import{r as t}from"./react.017637b6.js";import{P as de}from"./@rc-component_portal.552ecbef.js";import{c as b}from"./classnames.96a48171.js";import{C as X}from"./rc-motion.80fda60b.js";import{a as ue,K as F}from"./rc-util.5bddd7c5.js";var fe=function(n){var i=n.prefixCls,u=n.className,c=n.style,s=n.children,o=n.containerRef;return t.exports.createElement(t.exports.Fragment,null,t.exports.createElement("div",{className:b("".concat(i,"-content"),u),style:d({},c),"aria-modal":"true",role:"dialog",ref:o},s))},Y=t.exports.createContext(null);function j(e){return typeof e=="string"&&String(Number(e))===e?(ue(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var H={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function me(e){var n,i,u,c,s=e.prefixCls,o=e.open,f=e.placement,w=e.inline,y=e.push,k=e.forceRender,h=e.autoFocus,N=e.keyboard,S=e.rootClassName,E=e.rootStyle,D=e.zIndex,p=e.className,q=e.style,P=e.motion,G=e.width,J=e.height,Q=e.children,U=e.contentWrapperStyle,Z=e.mask,$=e.maskClosable,ee=e.maskMotion,te=e.maskClassName,ae=e.maskStyle,R=e.afterOpenChange,O=e.onClose,T=t.exports.useRef(),I=t.exports.useRef(),K=t.exports.useRef(),ne=function(l){var x=l.keyCode,C=l.shiftKey;switch(x){case F.TAB:{if(x===F.TAB){if(!C&&document.activeElement===K.current){var A;(A=I.current)===null||A===void 0||A.focus({preventScroll:!0})}else if(C&&document.activeElement===I.current){var M;(M=K.current)===null||M===void 0||M.focus({preventScroll:!0})}}break}case F.ESC:{O&&N&&O(l);break}}};t.exports.useEffect(function(){if(o&&h){var a;(a=T.current)===null||a===void 0||a.focus({preventScroll:!0})}},[o,h]);var re=t.exports.useState(!1),V=_(re,2),oe=V[0],W=V[1],r=t.exports.useContext(Y),g;y===!1?g={distance:0}:y===!0?g={}:g=y||{};var m=(n=(i=(u=g)===null||u===void 0?void 0:u.distance)!==null&&i!==void 0?i:r==null?void 0:r.pushDistance)!==null&&n!==void 0?n:180,le=t.exports.useMemo(function(){return{pushDistance:m,push:function(){W(!0)},pull:function(){W(!1)}}},[m]);t.exports.useEffect(function(){if(o){var a;r==null||(a=r.push)===null||a===void 0||a.call(r)}else{var l;r==null||(l=r.pull)===null||l===void 0||l.call(r)}},[o]),t.exports.useEffect(function(){return function(){var a;r==null||(a=r.pull)===null||a===void 0||a.call(r)}},[]);var se=Z&&t.exports.createElement(X,z({key:"mask"},ee,{visible:o}),function(a,l){var x=a.className,C=a.style;return t.exports.createElement("div",{className:b("".concat(s,"-mask"),x,te),style:d(d({},C),ae),onClick:$?O:void 0,ref:l})}),ie=typeof P=="function"?P(f):P,v={};if(oe&&m)switch(f){case"top":v.transform="translateY(".concat(m,"px)");break;case"bottom":v.transform="translateY(".concat(-m,"px)");break;case"left":v.transform="translateX(".concat(m,"px)");break;default:v.transform="translateX(".concat(-m,"px)");break}f==="left"||f==="right"?v.width=j(G):v.height=j(J);var ce=t.exports.createElement(X,z({key:"panel"},ie,{visible:o,forceRender:k,onVisibleChanged:function(l){R==null||R(l)},removeOnLeave:!1,leavedClassName:"".concat(s,"-content-wrapper-hidden")}),function(a,l){var x=a.className,C=a.style;return t.exports.createElement("div",{className:b("".concat(s,"-content-wrapper"),x),style:d(d(d({},v),C),U)},t.exports.createElement(fe,{containerRef:l,prefixCls:s,className:p,style:q},Q))}),B=d({},E);return D&&(B.zIndex=D),t.exports.createElement(Y.Provider,{value:le},t.exports.createElement("div",{className:b(s,"".concat(s,"-").concat(f),S,(c={},L(c,"".concat(s,"-open"),o),L(c,"".concat(s,"-inline"),w),c)),style:B,tabIndex:-1,ref:T,onKeyDown:ne},se,t.exports.createElement("div",{tabIndex:0,ref:I,style:H,"aria-hidden":"true","data-sentinel":"start"}),ce,t.exports.createElement("div",{tabIndex:0,ref:K,style:H,"aria-hidden":"true","data-sentinel":"end"})))}var ve=function(n){var i=n.open,u=n.getContainer,c=n.forceRender,s=n.prefixCls,o=n.afterOpenChange,f=n.destroyOnClose,w=n.mask,y=t.exports.useState(!1),k=_(y,2),h=k[0],N=k[1],S=function(p){N(p),o==null||o(p)};if(!c&&!h&&!i&&f)return null;var E=d(d({},n),{},{prefixCls:s,afterOpenChange:S});return t.exports.createElement(de,{open:i||c||h,autoDestroy:!1,getContainer:u,autoLock:w&&(i||h)},t.exports.createElement(me,z({},E,{inline:u===!1})))};ve.defaultProps={open:!1,prefixCls:"rc-drawer",placement:"right",autoFocus:!0,keyboard:!0,width:378,mask:!0,maskClosable:!0};export{ve as D};
